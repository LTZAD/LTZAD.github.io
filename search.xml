<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>自用的中学数学常用公式</title>
      <link href="/2024/08/03/%E8%87%AA%E7%94%A8%E7%9A%84%E4%B8%AD%E5%AD%A6%E6%95%B0%E5%AD%A6%E5%B8%B8%E7%94%A8%E5%85%AC%E5%BC%8F/"/>
      <url>/2024/08/03/%E8%87%AA%E7%94%A8%E7%9A%84%E4%B8%AD%E5%AD%A6%E6%95%B0%E5%AD%A6%E5%B8%B8%E7%94%A8%E5%85%AC%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h1 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h1><script type="math/tex; mode=display">\begin{aligned}& \sin x+\sin y= 2 \sin \frac{x+y}{2} \cos \frac{x-y}{2} \\& \sin x-\sin y= 2 \cos \frac{x+y}{2} \sin \frac{x-y}{2} \\& \cos x+\cos y= 2 \cos \frac{x+y}{2} \cos \frac{x-y}{2} \\& \cos x-\cos y=-2 \sin \frac{x+y}{2} \sin \frac{x-y}{2} \\& \sin x \sin y=-\frac{1}{2}[\cos (x+y)-\cos (x-y)] \\& \cos x \cos y= \frac{1}{2}[\cos (x+y)+\cos (x-y)] \\& \sin x \cos y= \frac{1}{2}[\sin (x+y)+\sin (x-y)] \\& \sin a=\frac{2 \tan \frac{\alpha}{2}}{1+\tan ^{2} \frac{\alpha}{2}} \\& \cos \alpha=\frac{1-\tan ^{2} \frac{\alpha}{2}}{1+\tan ^{2} \frac{\alpha}{2}} \\& \tan \alpha=\frac{2 \tan \frac{\alpha}{2}}{1-\tan ^{2} \frac{\alpha}{2}} \\\end{aligned}</script><h1 id="多项式"><a href="#多项式" class="headerlink" title="多项式"></a>多项式</h1><script type="math/tex; mode=display">\begin{aligned}& (a+b)^3=(a+b)(a^2-ab+b^2) \\& (a+b)^n=\sum_{k=0}^nC_n^ka^kb^{n-k} \\& a^n-b^n=(a-b)\sum_{k=1}^na^{n-k}b^{k-1} \\\end{aligned}</script><p>韦达定理：设复系数一元n次方程$a_nx^n+a_{n-1}x^{n-1}+\cdots+a_1x+a_0=0$的根为$x_1,x_2,\cdots,x_n$，则成立</p><script type="math/tex; mode=display">x_{1}+x_{2}+\cdots+x_{n}=\sum_{i=1}^{n} x_{i}=-\frac{a_{n-1}}{a_{n}} \\x_{1} x_{2} \cdots x_{n}=\prod_{i=1}^{n} x_{i}=(-1)^{n} \frac{a_{0}}{a_{n}}</script><h1 id="排列组合"><a href="#排列组合" class="headerlink" title="排列组合"></a>排列组合</h1><script type="math/tex; mode=display">\begin{aligned}& C_m^n=\frac{m!}{n!(m-n)!} \\\end{aligned}</script><h1 id="数列"><a href="#数列" class="headerlink" title="数列"></a>数列</h1><p><a href="https://blog.csdn.net/yan59966/article/details/95371566">求数列通项公式的十一种方法</a></p><h1 id="不等式"><a href="#不等式" class="headerlink" title="不等式"></a>不等式</h1><script type="math/tex; mode=display">|x|-|y| \leqslant|x \pm y| \leqslant|x|+|y| \\\frac{2}{\frac{1}{a}+\frac{1}{b}}\le\sqrt{ab}\le\frac{a+b}{2}\le\sqrt{\frac{a^2+b^2}{2}}</script><p>调和均值≤几何均值≤算术均值≤平方均值<br><a href="https://blog.csdn.net/robert_chen1988/article/details/88256626">柯西不等式，琴生Jensen不等式</a></p><h1 id="极坐标"><a href="#极坐标" class="headerlink" title="极坐标"></a>极坐标</h1><script type="math/tex; mode=display">\begin{aligned}& r=2\cos\theta \\\end{aligned}</script><h1 id="三余弦定理"><a href="#三余弦定理" class="headerlink" title="三余弦定理"></a>三余弦定理</h1><p>&emsp;&emsp;直角三角形 $ABC$ 中，角 $B$ 是直角，$AB=1$，$BD$ 垂直于三角形 $ABC$，$\angle CAB=\alpha,\angle DAB=\beta,\angle DAC=\gamma$，那么</p><script type="math/tex; mode=display">\cos\gamma=\cos\alpha\cos\beta</script><p>&emsp;&emsp;证明：$BC=\tan\alpha,BD=\tan\beta,CD^2=BC^2+BD^2=\tan^2\alpha+\tan^2\beta,AC=1/\cos\alpha,AD=1/\cos\beta$，</p><script type="math/tex; mode=display">\begin{aligned}\cos\gamma =& \frac{AD^2+AC^2-CD^2}{2AD\cdot AC} \\=& \frac{\frac{1}{\cos^2\alpha}+\frac{1}{\cos^2\beta}-(\tan^2\alpha+\tan^2\beta)}{2\cdot\frac{1}{\cos\alpha}\cdot\frac{1}{\cos\beta}} \\=& \frac{\cos^2\alpha+\cos^2\beta-(\sin^2\alpha\cos^2\beta+\sin^2\beta\cos^2\alpha)}{2\cos\alpha\cos\beta} \\=& \frac{\cos^2\alpha+\cos^2\beta-((1-\cos^2\alpha)\cos^2\beta+(1-\cos^2\beta)\cos^2\alpha)}{2\cos\alpha\cos\beta} \\=& \frac{\cos^2\alpha\cos^2\beta+\cos^2\beta\cos^2\alpha}{2\cos\alpha\cos\beta} \\=& \cos\alpha\cos\beta \\\end{aligned}</script><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>三角形外切圆半径</p><script type="math/tex; mode=display">R=\frac{abc}{4S}</script>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自用的线性代数与矩阵论笔记</title>
      <link href="/2024/08/03/%E8%87%AA%E7%94%A8%E7%9A%84%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E4%B8%8E%E7%9F%A9%E9%98%B5%E8%AE%BA%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/08/03/%E8%87%AA%E7%94%A8%E7%9A%84%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E4%B8%8E%E7%9F%A9%E9%98%B5%E8%AE%BA%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]<br>大写字母表示矩阵（如$A$），小写粗斜体表示向量（如$\boldsymbol{x}$），正常字体表示标量或坐标点等（如$x_1$）。</p><h1 id="向量"><a href="#向量" class="headerlink" title="向量"></a>向量</h1><script type="math/tex; mode=display">\begin{aligned}& a\times(b\times c)=a^\times b^\times c=(a^\times b^\times)c=a^\times(b^\times c) \\\neq& (a\times b)\times c= a\times b\times c=(a^\times b)^\times c \\\end{aligned}</script><script type="math/tex; mode=display">a\times b\times c\neq a^\times b^\times c \\(Ra)\times b\neq R(a\times b) \\(a\times R)b= a\times (Rb) \\</script><h1 id="方阵的迹"><a href="#方阵的迹" class="headerlink" title="方阵的迹"></a>方阵的迹</h1><p>定义</p><script type="math/tex; mode=display">\text{tr}(A)=\sum_{i=1}^n(a_{ii})</script><p>性质</p><script type="math/tex; mode=display">\begin{aligned}& \text{tr}(A)=\text{tr}(A^{\text{T}})  \\& \text{tr}(A+B)=\text{tr}(A)+\text{tr}(B)  \\& \text{tr}(\alpha A)=\alpha\text{tr}(A) \\& \text{tr}(A)=\sum_{i=1}^n\lambda_i  \\& \text{tr}(AB)=\text{tr}(BA)  \\& \text{tr}(A^{\text{T}} A)=\sum_{i=1}^n\sum_{j=1}^n a_{ij}^2 \end{aligned}</script><p><a href="https://blog.csdn.net/weixin_43989965/article/details/120630050">三个三维矢量叉乘公式（拉格朗日矢量公式）推导 -CSDN博客</a>  </p><h1 id="矩阵的秩"><a href="#矩阵的秩" class="headerlink" title="矩阵的秩"></a>矩阵的秩</h1><ul><li>A和B等价或相似或合同$\Rightarrow r(A)=r(B)$</li><li>$r(A)=r(A^{\text{T}})=r(A^{\text{T}}A)=r(AA^{\text{T}})=r(kA)$</li><li>若$A$列满秩则$r(AB)=r(B)$，若$A$行满秩则$r(BA)=r(B)$</li><li>$r(A\pm B)\le r(A)+r(B)$</li><li>$r(A)+r(B)-n\le r(AB)\le\min\{r(A), r(B)\}\le\max\{r(A), r(B)\}\le r(A\vdots B)\le r(A)+r(B)$</li><li>$AB=O\Rightarrow r(A)+r(B)\le n$</li><li>幂零阵：$A^k=O\Rightarrow r(A)&lt;n$</li><li>幂等阵：$A^2=A\Rightarrow r(A)+r(I-A)=n$</li><li>幂幺阵：$A^k=I\Rightarrow r(A)=n$</li><li>$r\left(\begin{array}{ll}<br>A &amp; O \\ O &amp; B<br>\end{array}\right)=r(A)+r(B) \leq r\left(\begin{array}{ll}<br>A &amp; 0 \\ C &amp; B<br>\end{array}\right) \leq r(A)+r(B)+r(C)$</li><li>$r(A*)=\begin{cases}<br>n \Leftrightarrow r(A)=n \\<br>1 \Leftrightarrow r(A)=n -1 \\<br>0 \Leftrightarrow r(A)&lt;n -1 \\<br>\end{cases}$</li><li>若A可逆，则$r(AB)=r(BA)=r(B)$</li><li>若$A$是n阶方阵则$r(A)\ge\mu(A)$，$\mu(A)$表示矩阵$A$的非零特征值的个数；若$A$可相似对角化则$r(A)=\mu(A)$</li><li>若$A$是正定或正交矩阵则$r(A)=n$</li><li>m×n 矩阵 A 的秩为 r 的充分与必要条件为：存在 m 阶满秩矩阵 P 与 n 阶满秩矩阵 Q 使得<script type="math/tex; mode=display">PAQ=\Lambda=\left(\begin{matrix}I_r & O \\O & O\end{matrix}\right)</script></li></ul><p>若$r(A)=1$，则</p><ul><li>$|\lambda I-A|=\lambda^n-\text{tr}(A)\lambda^{n-1}$</li><li>$\lambda_1=\text{tr}(A)$，$\lambda_2=\cdots=\lambda_n=0$</li><li>$A^2=\text{tr}(A)A$，$A^n=(\text{tr}(A))^{n-1}A$</li><li>（充要条件）存在非零向量$\alpha$、$\beta$使得$A=\alpha\beta$<h1 id="特征值与特征向量"><a href="#特征值与特征向量" class="headerlink" title="特征值与特征向量"></a>特征值与特征向量</h1></li><li>特征值都是单值的矩阵一定可以对角化。</li><li>n阶矩阵有n个线性无关的特征向量是可以相似对角化的充分必要条件。</li><li>实对称矩阵的不同特征值对应的特征向量两两正交。</li><li>实对称矩阵可对角化，即必有n个线性无关的特征向量。</li><li>不同特征值对应的特征向量线性无关。</li><li>特征值相同的两个矩阵不一定相似。</li><li>$\lambda_1+\lambda_2+\cdots+\lambda_n=\text{tr}(A)$</li><li>$\lambda_1\lambda_2\cdots\lambda_n=|A|$</li></ul><p>设$A$是 n 阶矩阵，$\lambda_0$是$A$的$k$阶特征值，则</p><ul><li>若$k=1$，则属于特征值$\lambda_0$的线性无关的特征向量只有一个；</li><li>若$k&gt;1$，则属于特征值$\lambda_0$的线性无关的特征向量不超过$k$个。<h1 id="分块矩阵"><a href="#分块矩阵" class="headerlink" title="分块矩阵"></a>分块矩阵</h1>设矩阵$A$是一个$n+m$阶方阵，它具有分块三角阵的结构，即<script type="math/tex; mode=display">A=\left[\begin{array}{cc}  A_{11} & A_{12} \\ 0 & A_{22}\end{array}\right]\text{或}A=\left[\begin{array}{cc}  A_{11} & 0 \\ A_{21} & A_{22}\end{array}\right]</script>其中$A_{11}$和$A_{22}$分别是n阶和m阶可逆方阵，这意味着 A 是可逆阵。利用<script type="math/tex; mode=display">A^{-1}A=AA^{-1}=I_{n+m}</script>可以推得<script type="math/tex; mode=display">A^{-1}=\left[\begin{array}{cc}  A_{11}^{-1} & -A_{11}^{-1}A_{12}A_{22}^{-1} \\ 0 & A_{22}^{-1}\end{array}\right] \\A^{-1}=\left[\begin{array}{cc}  A_{11}^{-1} & 0 \\ -A_{22}^{-1}A_{21}A_{11}^{-1} & A_{22}^{-1}\end{array}\right]</script>一般地，若n+m阶方阵A可以写成分块形式<script type="math/tex; mode=display">A=\left[\begin{array}{cc}  A_{11} & A_{12} \\ A_{21}A_{11}^{-1} & A_{22}\end{array}\right]</script>其中$A_{11}$和$A_{22}$具有与前相同的性质，那么利用矩阵分解关系式<script type="math/tex; mode=display">A=\left[\begin{array}{cc}  I_n & 0 \\ A_{21}A_{11}^{-1} & I_m\end{array}\right]\left[\begin{array}{cc}  A_{11} & A_{12} \\ 0 & A_{22}-A_{21}A_{11}^{-1}A_{12}\end{array}\right]</script><script type="math/tex; mode=display">A=\left[\begin{array}{cc}  I_n & A_{12}A_{22}^{-1} \\ 0 & I_m\end{array}\right]\left[\begin{array}{cc}  A_{11}-A_{12}A_{22}^{-1}A_{21} & 0 \\ A_{21} & A_{22}\end{array}\right]</script>和前面关于三角阵的求逆结果，可以推得矩阵 A 的分块求逆公式如下：<script type="math/tex; mode=display">A^{-1}=\left[\begin{array}{cc}  A_{11}^{-1}+A_{11}^{-1}A_{12}\tilde{A}_{22}^{-1}A_{21}A_{11}^{-1} & -A_{11}^{-1}A_{12}\tilde{A}_{22}^{-1} \\  -\tilde{A}_{22}^{-1}A_{21}A_{11}^{-1} & \tilde{A}_{22}^{-1}\end{array}\right]</script><script type="math/tex; mode=display">A^{-1}=\left[\begin{array}{cc}  \tilde{A}_{11}^{-1} & -\tilde{A}_{11}^{-1}A_{12}A_{22}^{-1} \\  -A_{22}^{-1}A_{21}\tilde{A}_{11}^{-1} & A_{22}^{-1}+A_{22}^{-1}A_{21}\tilde{A}_{11}^{-1}A_{12}A_{22}^{-1}\end{array}\right]</script>其中<script type="math/tex; mode=display">\tilde{A}_{11}=A_{11}-A_{12}A_{22}^{-1}A_{21} \\\tilde{A}_{22}=A_{22}-A_{21}A_{11}^{-1}A_{12}</script>假定矩阵A是可逆矩阵，因而$\tilde{A}_{11}^{-1}$和$\tilde{A}_{22}^{-1}$总是存在的。根据逆矩阵的唯一性，对比两式立即得到（这附近的推导可能有问题）<script type="math/tex; mode=display">(A_{11}-A_{12}A_{22}^{-1}A_{21})^{-1}=A_{11}^{-1}+A_{11}^{-1}A_{12}\tilde{A}_{22}^{-1}A_{21}A_{11}^{-1}</script><script type="math/tex; mode=display">A_{22}-A_{21}A_{11}^{-1}A_{12}=A_{22}^{-1}+A_{22}^{-1}A_{21}\tilde{A}_{11}^{-1}A_{12}A_{22}^{-1}</script>这是两个非常重要的矩阵恒等式，在矩阵变换中经常用到。其中第一式习惯上称为矩阵反馈公式。</li><li>若A和B是方阵，则<script type="math/tex; mode=display">|AB|=|A|\cdot|B|</script>上式可用初等变换方法证明。</li><li>若A和D是方阵，则<script type="math/tex; mode=display">\left|\begin{matrix}A & B \\ 0 & D\end{matrix}\right|=|A|\cdot|D|</script>QR分解法证明：<script type="math/tex; mode=display">\begin{aligned}&\left|\begin{matrix}A & 0 \\ 0 & D\end{matrix}\right|=\left|\begin{matrix}A & 0 \\ 0 & I\end{matrix}\right|\left|\begin{matrix}I & 0 \\ 0 & D\end{matrix}\right|=|A|\cdot|D| \\&\left|\begin{matrix}A & B \\ 0 & D\end{matrix}\right|=\left|\begin{matrix}Q_A & 0 \\ 0 & Q_D\end{matrix}\right|\cdot\left|\begin{matrix}R_A & Q_A^{\text{T}}B \\ 0 & R_D\end{matrix}\right|=|Q_A|\cdot|Q_D|\cdot|R_A|\cdot|R_D|\end{aligned}</script></li><li>若A和D是方阵且A可逆，则<script type="math/tex; mode=display">\left|\begin{matrix}A & B \\ C & D\end{matrix}\right|=|A|\cdot|D-CA^{-1}B|</script>若D可逆则<script type="math/tex; mode=display">\left|\begin{matrix}A & B \\ C & D\end{matrix}\right|=|D|\cdot|A-BD^{-1}C|</script>证明<script type="math/tex; mode=display">\begin{aligned}\left|\begin{matrix}A & B \\ C & D\end{matrix}\right|=& \left|\begin{matrix}I & 0 \\ CA^{-1} & I\end{matrix}\right|\left|\begin{matrix}A & B \\ 0 & D-CA^{-1}B\end{matrix}\right|\\=& \left|\begin{matrix}I & BD^{-1} \\ 0 & I\end{matrix}\right|\left|\begin{matrix}A-BD^{-1}C & 0 \\ C & D\end{matrix}\right|\end{aligned}</script><h1 id="矩阵的正定与负定"><a href="#矩阵的正定与负定" class="headerlink" title="矩阵的正定与负定"></a>矩阵的正定与负定</h1>&emsp;&emsp;设矩阵$A$为n阶对称阵，如果对于所有n维列向量$\boldsymbol{x}$，二次型$\boldsymbol{x}^{\text{T}} A\boldsymbol{x}$均为非负，则称矩阵$A$为非负定矩阵，并用$A\ge 0$来表示。进一步，如果矩阵$A$为非负定矩阵，且对所有非零向量$\boldsymbol{x}$，二次型$\boldsymbol{x}^{\text{T}}A\boldsymbol{x}$总大于零，则称矩阵$A$为正定阵，并且用$A&gt;0$来表示。对称矩阵$A$当且仅当其所有特征值非负时才是非负定阵；当且仅当特征值均为正时才是正定阵。显然，若矩阵$A$为正定阵，则其逆矩阵存在且也为正定阵。<br>&emsp;&emsp;如果$D$是任意$n\times m$阶矩阵，则$A=DD’$是非负定阵；当且仅当$D$行满秩时，$A=DD’$才是正定阵。<br>&emsp;&emsp;如果$A$和$B$是同阶非负定阵，$\alpha$和$\beta$为非负常数，则$\alpha A+\beta B$为非负定阵；若$A$、$B$两者之一是正定阵而另一个为非负定阵且$\alpha$和$\beta$均大于零，则$\alpha A+\beta B$是正定阵。设$A$和$B$分别为非负定阵和正定阵，称-A和-$B$分别是非正定阵和负定阵。非正定阵和负定阵分别与非负定阵和正定阵具有相反而类似的性质。<br>&emsp;&emsp;几个名词：</li><li>标准形</li><li>规范形</li><li>矩阵等价</li><li>矩阵相似</li><li>矩阵合同</li></ul><p>&emsp;&emsp;二次型的标准形的系数中正负系数的个数保持不变，分别称为二次型的正负惯性指数。$n$阶实对称矩阵$A$和$B$的正负惯性指数相同是$A$和$B$合同的充分必要条件。<br>&emsp;&emsp;记二次型$f(\boldsymbol{x})=\boldsymbol{x}^{\text{T}} A\boldsymbol{x}$，$A$为$n$阶实对称矩阵，下列命题相互等价：</p><ul><li>$f$是正定（负定）二次型</li><li>$f$的正（负）惯性指数为$n$</li><li>$A$的特征值全为正（负）</li><li>$A$合同于$+I$（$-I$）</li><li>$A$的顺序主子式都大于0（$A$的奇数阶顺序主子式为负，偶数阶顺序主子式为正）</li><li>存在可逆矩阵$B$使得$A=B^TB$</li><li>$a_{ii}&gt;0$，$i=1,2,\cdots,n$<h1 id="内积与范数"><a href="#内积与范数" class="headerlink" title="内积与范数"></a>内积与范数</h1>向量范数：</li><li>非负性：对所有$\vec{x}$均有 $||\vec{x}||\ge 0$；当且仅当 $\vec{x}=0$ 时，才有$||\vec{x}||=0$；</li><li>齐次性：$||k\vec{x}||=|k| \ ||\vec{x}||$；</li><li>三角不等式 $||A+B||\le||A|| + ||B||$。</li></ul><p>矩阵范数除此以外还有次乘性：</p><ul><li>次乘性：$||AB||\le||A||\ ||B||$。 </li></ul><p>如果向量范数$||x||$和矩阵范数$||A||$满足$||Ax||\le||A||\ ||x||$，则称相容。</p><h1 id="矩阵的微分运算"><a href="#矩阵的微分运算" class="headerlink" title="矩阵的微分运算"></a>矩阵的微分运算</h1><p>矩阵微分运算有几种不同的情况。</p><h2 id="矩阵函数对标量的导数"><a href="#矩阵函数对标量的导数" class="headerlink" title="矩阵函数对标量的导数"></a>矩阵函数对标量的导数</h2><p>设n×m阶矩阵$A$、$B$和m×1阶矩阵$C$的元素都是实变数t的函数，$\lambda=\lambda(t)$是$t$的标量实值函数。定义矩阵$A$对$t$的导数等于$A$的每个元素$a_{ij}(t)$对$t$分别求导所构成的n×m阶矩阵，即</p><script type="math/tex; mode=display">\frac{\text{d}A}{\text{d}t}=\left[\frac{\text{d}a_{ij}(t)}{\text{d}t}\right]</script><p>比如，对于n维列向量$\boldsymbol{x}＝[x_1(t)\ x_2(t)\cdots x_n(t)]^{\text{T}}$，按定义就有</p><script type="math/tex; mode=display">\frac{\text{d}\boldsymbol{x}}{\text{d}t}=\left[\frac{\text{d}x_1(t)}{\text{d}t}\frac{\text{d}x_2(t)}{\text{d}t}\cdots\frac{\text{d}x_n(t)}{\text{d}t}\right]^{\text{T}}</script><p>关于矩阵函数对标量的导数，根据上述定义容易验证如下运算规则；</p><script type="math/tex; mode=display">\begin{aligned}    &\frac{\text{d}(A+B)}{\text{d}t}=\frac{\text{d}A}{\text{d}t}+\frac{\text{d}B}{\text{d}t} \\    &\frac{\text{d}(\lambda A)}{\text{d}t}=\frac{\text{d}\lambda}{\text{d}t}A+\lambda\frac{\text{d}A}{\text{d}t} \\    &\frac{\text{d}(AC)}{\text{d}t}=\frac{\text{d}A}{\text{d}t}C+A\frac{\text{d}C}{\text{d}t}\end{aligned}</script><h2 id="标量函数对矩阵的导数"><a href="#标量函数对矩阵的导数" class="headerlink" title="标量函数对矩阵的导数"></a>标量函数对矩阵的导数</h2><p>设$f=f(A)$、$g=g(A)$是以矩阵$A$的n×m个元素为自变量的标量定值函数。定义$f$对$A$的导数为如下$n\times m$阶矩阵</p><script type="math/tex; mode=display">\frac{\text{d}f}{\text{d}A}\triangleq\left[\frac{\partial f}{\partial a_{ij}}\right]</script><p>对于上述这类微分运算，显然有</p><script type="math/tex; mode=display">\begin{aligned}    &\frac{\text{d}(f+g)}{\text{d}A}=\frac{\text{d}f}{\text{d}A}+\frac{\text{d}g}{\text{d}A} \\    &\frac{\text{d}(fg)}{\text{d}A}=\frac{\text{d}f}{\text{d}A}g+f\frac{\text{d}g}{\text{d}A}\end{aligned}</script><h2 id="矩阵函数对向量的导数"><a href="#矩阵函数对向量的导数" class="headerlink" title="矩阵函数对向量的导数"></a>矩阵函数对向量的导数</h2><p>设$F(\boldsymbol{x})$是n维列向量$\boldsymbol{x}$的$m\times l$阶矩阵函数，即$F(\boldsymbol{x})=(f_{ij}(\boldsymbol{x}))_{m×l}$，而$\boldsymbol{x}=[x_1\ x_2\cdots x_n]^{\text{T}}$。定义$F(\boldsymbol{x})$对$\boldsymbol{x}$的导数为如下nm×l阶矩阵：</p><script type="math/tex; mode=display">\frac{\text{d}F}{\text{d}\boldsymbol{x}}\triangleq[\frac{\partial F(\boldsymbol{x})}{\partial x_1}\vdots\frac{\partial F(\boldsymbol{x})}{\partial x_2}\cdots\vdots\frac{\partial F(\boldsymbol{x})}{\partial x_n}]^{\text{T}}</script><p>其中</p><script type="math/tex; mode=display">\frac{\partial F(\boldsymbol{x})}{\partial x_k}\triangleq\frac{\partial f_ij(\boldsymbol{x})}{\partial x_k}</script><p>对于这类运算，我们有</p><script type="math/tex; mode=display">\begin{aligned}    &\frac{\text{d}F(\boldsymbol{x})+G(\boldsymbol{x})}{\text{d}\boldsymbol{x}}    =\frac{\text{d}F(\boldsymbol{x})}{\text{d}\boldsymbol{x}}+\frac{\text{d}G(\boldsymbol{x})}{\text{d}\boldsymbol{x}} \\    &\frac{\text{d}(F^{\text{T}}(\boldsymbol{x})G(\boldsymbol{x}))}{\text{d}\boldsymbol{x}}    =\frac{\text{d}F^{\text{T}}(\boldsymbol{x})}{\text{d}\boldsymbol{x}}G(\boldsymbol{x})+\frac{\text{d}G^{\text{T}}(\boldsymbol{x})}{\text{d}\boldsymbol{x}}F(\boldsymbol{x})\end{aligned}</script><h2 id="几个常用的矩阵微分公式"><a href="#几个常用的矩阵微分公式" class="headerlink" title="几个常用的矩阵微分公式"></a>几个常用的矩阵微分公式</h2><p>根据前面的定义，不难验证以下矩阵微分公式：</p><ul><li>设$f=f(\boldsymbol{x})$是n维列向量$\boldsymbol{x}$的标量定值函数，则有<script type="math/tex; mode=display">\frac{\text{d}f}{\text{d}t}=\left[\frac{\text{d}f}{\text{d}\boldsymbol{x}}\right]^{\text{T}}\frac{\text{d}\boldsymbol{x}}{\text{d}t}</script>式中t为实变数。</li><li>设$\boldsymbol{x}$为n维列向量，$\boldsymbol{a}$和$B$分别为与$\boldsymbol{x}$无关的m维列向量和m×n阶矩阵，f为$\boldsymbol{x}$的一个二次型，且<script type="math/tex; mode=display">f=(\boldsymbol{a}+B\boldsymbol{x})^{\text{T}}(\boldsymbol{a}+B\boldsymbol{x})</script>则有<script type="math/tex; mode=display">\begin{aligned}      &\frac{\text{d}(\boldsymbol{a}+B\boldsymbol{x})}{\text{d}\boldsymbol{x}}=B^{\text{T}} \\      &\frac{\text{d}f}{\text{d}\boldsymbol{x}}=2B^{\text{T}}(\boldsymbol{a}-B\boldsymbol{x})  \end{aligned}</script></li><li>设$A$为n阶方阵，其元素是实变数t的函数，且对所有的t，$A^{-1}$存在，则有<script type="math/tex; mode=display">\frac{\text{d}A^{-1}}{\text{d}t}=-A^{-1}\frac{\text{d}A}{\text{d}t}A^{-1}</script>  此式可通过恒等式<script type="math/tex; mode=display">\frac{\text{d}I_n}{\text{d}t}=\frac{\text{d}AA^{-1}}{\text{d}t}=0</script>  导出。</li><li>设，则有的解为矩阵$A$的伪迹。式中星号*表示转置兼取复数共轭。</li><li>其它常用公式</li></ul><script type="math/tex; mode=display">\begin{aligned}&\frac{\text{d}\boldsymbol{x}^{\text{T}}}{\text{d}\boldsymbol{x}}=\frac{\text{d}\boldsymbol{x}}{\text{d}\boldsymbol{x}^{\text{T}}}=I_n \\& \frac{\text{d}(\boldsymbol{x}^{\text{T}}\mathbf{A}\boldsymbol{x})}{\text{d}\boldsymbol{x}}=(\mathbf{A}+\mathbf{A}^{\text{T}})\boldsymbol{x} \\&\frac{\text{d}(\boldsymbol{x}^{\text{T}}\mathbf{A}\boldsymbol{x})}{\text{d}\mathbf{A}}=\boldsymbol{x}\boldsymbol{x}^{\text{T}} \\&\frac{\text{d}J}{\text{d}\mathbf{X}}    =\frac{\text{d}(\boldsymbol{\alpha}^{\text{T}}\mathbf{X}\boldsymbol{\beta})}{\text{d}\mathbf{X}}    =\boldsymbol{\alpha}\boldsymbol{\beta}^{\text{T}}exp \\\end{aligned}</script><h2 id="矩阵函数及其导数的一些性质"><a href="#矩阵函数及其导数的一些性质" class="headerlink" title="矩阵函数及其导数的一些性质"></a>矩阵函数及其导数的一些性质</h2><p>定义</p><script type="math/tex; mode=display">\begin{aligned}& \text{e}^{A}=I+At+\frac{A^2}{2!}+\frac{A^3}{3!}+\cdots \\& \sin A=A-\frac{A^3}{3!}+\frac{A^5}{5!}-\cdots \\& \cos A=1-\frac{A^2}{2!}+\frac{A^4}{4!}+\cdots\\& \ln(1+A)=A-\frac{A^2}{2}+\frac{A^3}{3}-\cdots\qquad(1)\\\end{aligned}</script><p>性质</p><script type="math/tex; mode=display">\begin{aligned}& A\text{e}^{A}=\text{e}^{A}A \\& \text{e}^{A}\cdot\text{e}^{B}=\text{e}^{B}\cdot\text{e}^{A}=\text{e}^{A+B}\qquad(2) \\& (\text{e}^{A})^{-1}=\text{e}^{-A} \\& \text{e}^{jA}=\cos A+j\sin A \\& \text{e}^{-At}=(\text{e}^{At})^{-1} \\& \text{e}^{P^{-1}APt}=P^{-1}\text{e}^{At}P \\& \ln(\text{e}^A)=A\qquad(3) \\& \ln(AB)=\ln A+\ln B\qquad(4) \\& \frac{\text{d}}{\text{d}t}\text{e}^{At}=A\text{e}^{At}=\text{e}^{At}A \\& \frac{\text{d}}{\text{d}t}(A(t)B(t))=A'B+AB' \\& \frac{\text{d}}{\text{d}t}(A^2(t))=A'A+AA'\neq2AA' \\& \frac{\text{d}}{\text{d}t}(\text{e}^{A(t)})\neq A'(t)\text{e}^{A(t)}\neq\text{e}^{A(t)}A'(t)\qquad(5) \\\end{aligned}</script><p>注：<br>(1)需满足收敛域条件$|A|&lt;1$<br>(2)需满足$AB=BA$。<br>(3)需满足$|\text{e}^A-I|&lt;1$<br>(4)需满足$|AB-I|&lt;1$和$AB=BA$。<br>(5)仅当$A’A=AA’$时才能为等号但一般不等。</p><h2 id="常系数齐次-非齐次线性微分方程组"><a href="#常系数齐次-非齐次线性微分方程组" class="headerlink" title="常系数齐次/非齐次线性微分方程组"></a>常系数齐次/非齐次线性微分方程组</h2><script type="math/tex; mode=display">\begin{aligned}& \boldsymbol{x}'(t)=A\boldsymbol{x}(t) \\& \boldsymbol{x}(t)=\text{e}^{A(t-t_0)}\boldsymbol{x}(t_0) \\& \boldsymbol{x}'(t)=A\boldsymbol{x}(t)+\boldsymbol{f}(t) \\& \boldsymbol{x}(t)=\text{e}^{A(t-t_0)}\boldsymbol{x}(t_0)+\int_{t_0}^t\text{e}^{A(t-\tau)}\boldsymbol{f}(\tau)\text{d}\tau \\\end{aligned}</script><p>证明</p><script type="math/tex; mode=display">\begin{aligned}& x'-Ax=f \\& \text{e}^{-At}(x'-Ax)=(\text{e}^{-At}x)'=\text{e}^{-At}f \\& \text{e}^{-At}x(t)=\int_{t_0}^t\text{e}^{-A\tau}f(\tau)\text{d}\tau+C \\& C=\text{e}^{-At_0}x(t_0) \\& x(t)=\text{e}^{A(t-t_0)}x(t_0)+\int_{t_0}^t\text{e}^{A(t-\tau)}f(\tau)\text{d}\tau \\\end{aligned}</script><h1 id="矩阵的伪逆"><a href="#矩阵的伪逆" class="headerlink" title="矩阵的伪逆"></a>矩阵的伪逆</h1><p>设A为n×m阶矩阵，其元素可以是复数。我们称基于A形成的矩阵代数方程组</p><h1 id="Jordan标准型"><a href="#Jordan标准型" class="headerlink" title="Jordan标准型"></a>Jordan标准型</h1><script type="math/tex; mode=display">A=\left[\begin{matrix}3 & 1 & -1 \\1 & 2 & -1 \\2 & 1 & 0\end{matrix}\right]</script><p>方法一：<br>求矩阵的特征值和特征向量 $f_A(\lambda)=\lambda I-A=(\lambda-1)(\lambda-2)^2$，<br>对于矩阵$A$的特征值$\lambda_0$，<br>$\lambda_0$的代数重数指$\lambda_0$作为特征多项式$f_A(\lambda)$的根的重数。<br>$\lambda_0$的几何重数指$\lambda_0$对应的特征向量的个数。<br>任一特征值的代数重数不小于它的几何重数。<br>$\lambda=1$对应的特征向量为$[0,1,1]^\text{T}$，代数重数1，几何重数1。<br>$\lambda=2$对应的特征向量为$[1,0,1]^\text{T}$，代数重数2，几何重数1。<br>将Jordan标准型写成$AP=PJ$的形式</p><script type="math/tex; mode=display">\begin{aligned}J=&\left[\begin{matrix}1 & 0 & 0 \\0 & 2 & 1 \\0 & 0 & 2\end{matrix}\right] \\\left[\begin{matrix}3 & 1 & -1 \\1 & 2 & -1 \\2 & 1 & 0\end{matrix}\right]\left[\begin{matrix}0 & 1 & 1 \\1 & 0 & 1 \\1 & 1 & 1\end{matrix}\right]=&\left[\begin{matrix}0 & 1 & 1 \\1 & 0 & 1 \\1 & 1 & 1\end{matrix}\right]\left[\begin{matrix}1 & 0 & 0 \\0 & 2 & 1 \\0 & 0 & 2\end{matrix}\right]\end{aligned}</script><p>其中$P$由$A$的特征向量和广义特征向量组成。<br>方法二：<br>行列式因子 $D_k(\lambda)$：所有子式的最大公约数（3阶矩阵有4+4+1个2阶子式）。<br>不变因子 $d_k(\lambda)$：n阶与n-1阶行列式因子的商。<br>初等因子：所有 $(\lambda-a)^b$ 形式的项。<br>几个例子<br>行列式 $D_1=1,D_2=\lambda-1,D_3=(\lambda-1)^3$<br>不变 $d_1=1,d_2=\lambda-1,d_3=(\lambda-1)^2$<br>初等 $\lambda-1,(\lambda-1)^2$<br>行列式 $D_1=1,D_2=1,D_3=(\lambda-1)(\lambda-2)^2$<br>不变 $d_1=1,d_2=1,d_3=(\lambda-1)(\lambda-2)^2$<br>初等 $\lambda-1,(\lambda-2)^2$<br>$\lambda$ 矩阵的初等变换之间等价，Smith标准型中的各个非零元素为不变因子。</p><h1 id="矩阵分解"><a href="#矩阵分解" class="headerlink" title="矩阵分解"></a>矩阵分解</h1><h2 id="LU分解"><a href="#LU分解" class="headerlink" title="LU分解"></a>LU分解</h2><script type="math/tex; mode=display">\begin{aligned}&\left[\begin{matrix}    1 & 0 & 0 \\    0 & 1 & 0 \\    0 & c & 1 \\\end{matrix}\right]\left[\begin{matrix}    1 & 0 & 0 \\    a & 1 & 0 \\    b & 0 & 1 \\\end{matrix}\right]A=U \\A=&\left[\begin{matrix}    1 & 0 & 0 \\    a & 1 & 0 \\    b & 0 & 1 \\\end{matrix}\right]^{-1}\left[\begin{matrix}    1 & 0 & 0 \\    0 & 1 & 0 \\    0 & c & 1 \\\end{matrix}\right]^{-1}U \\=&\left[\begin{matrix}    1 & 0 & 0 \\    -a & 1 & 0 \\    -b & 0 & 1 \\\end{matrix}\right]\left[\begin{matrix}    1 & 0 & 0 \\    0 & 1 & 0 \\    0 & -c & 1 \\\end{matrix}\right]U=\left[\begin{matrix}    1 & 0 & 0 \\    -a & 1 & 0 \\    -b & -c & 1 \\\end{matrix}\right]U\end{aligned}</script><h2 id="QR分解"><a href="#QR分解" class="headerlink" title="QR分解"></a>QR分解</h2><script type="math/tex; mode=display">\begin{aligned}A=&\left[\begin{matrix}    2 & -3 & 1 \\    1 & 1 & -6 \\    2 & 4 & 2 \\\end{matrix}\right] \\H=&I-2\omega\omega^\text{T}\end{aligned}</script><p>将第一列向量$[2,1,2]^\text{T}$变换到x轴上并保持长度不变，即$[3,0,0]^\text{T}$，$\omega^\text{T}=[2,1,2]-[3,0,0]=[-1,1,2]$后再取单位向量，代入$H$，则。</p><script type="math/tex; mode=display">H=\left[\begin{matrix}    \displaystyle\frac{2}{3} &  \displaystyle\frac{1}{3} &  \displaystyle\frac{2}{3} \\    \displaystyle\frac{1}{3} &  \displaystyle\frac{2}{3} & -\displaystyle\frac{2}{3} \\    \displaystyle\frac{2}{3} & -\displaystyle\frac{2}{3} & -\displaystyle\frac{1}{3} \\\end{matrix}\right]\left[\begin{matrix}    2 \\ 1 \\ 2 \\\end{matrix}\right]=\left[\begin{matrix}    3 \\ 0 \\ 0 \\\end{matrix}\right]</script><h2 id="满秩分解"><a href="#满秩分解" class="headerlink" title="满秩分解"></a>满秩分解</h2><script type="math/tex; mode=display">A=[F\vdots G], LF=I \\LA=C=[I\vdots LG], B=F \\BC=F[I\vdots LG]=[F\vdots FLG]=[F\vdots LFG]=A</script><h2 id="奇异值分解"><a href="#奇异值分解" class="headerlink" title="奇异值分解"></a>奇异值分解</h2><script type="math/tex; mode=display">A=UDV^\text{T} \\V_1=A^\text{T}U_1D^{-1} \\U_1=AV_1D^{-1} \\</script><h1 id="广义逆矩阵"><a href="#广义逆矩阵" class="headerlink" title="广义逆矩阵"></a>广义逆矩阵</h1><p>&emsp;&emsp;方程组有解称作相容，否则称为不相容或矛盾方程组。相容方程组的通解为</p><script type="math/tex; mode=display">x=A^-b+(I-A^-A)z</script><p>其中$z$是与$x$同维的任意向量，$A^-$是$A$的任一减号逆，满足</p><script type="math/tex; mode=display">AA^-A=A</script><p>如果还另外满足$A^-AA^-=A^-$，则称$A^-$是$A$的自反减号逆，记作$A_r^-$。证明：</p><script type="math/tex; mode=display">Ax = AA^-b+A(I-A^-A)z = AA^-b</script><p>矩阵$A$的左逆和右逆分别满足 $ A_L^{-1}A=I$和$AA_R^{-1}=I $，当$A$分别列满秩和行满秩时，分别存在左逆和右逆</p><script type="math/tex; mode=display">A_L^{-1} = (A^{\text{T}}A)^{-1}A^\text{T} \\A_R^{-1} = A^\text{T}(AA^{\text{T}})^{-1}</script><p>且分别是列满秩和行满秩矩阵$A$的自反减号逆$A_r^-$，同时也是最小范数广义逆$A_m^-$、最小二乘广义逆$A_l^-$、加号逆$A^+$。<br>&emsp;&emsp;举例，方程组</p><script type="math/tex; mode=display">\begin{cases}    x_1+2x_2+x_3 &= 1 \\    -x_2+2x_3 &= 2\end{cases},Ax=b</script><p>行满秩，可求其右逆$A_R^{-1}$为减号逆$A^-$，并求出通解。<br>$A$的加号逆为同时满足下面4个式子的矩阵，且唯一。</p><script type="math/tex; mode=display">\begin{aligned}    &AGA=A \\    &GAG=G \\    &(AG)^\text{T}=AG \\    &(GA)^\text{T}=GA \\\end{aligned}</script><p>当</p><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><ul><li>列满秩矩阵的列向量线性无关，一般为竖形状。列范数$||A||_1$指对每一列元素(每个列向量)的绝对值求和的最大值。</li><li>$||A||_{m_1}$范数是所有元素绝对值的和；$||A||_{m_2}/||A||_F$范数是所有元素平方和开根号；$||A||_{m_\infty}$范数是所有元素绝对值最大值×阶数。</li></ul><script type="math/tex; mode=display">\begin{aligned}    (A+BCD)^{-1} =& A^{-1}-A^{-1} B    (DA^{-1}B+C^{-1})^{-1}DA^{-1} \\    (A+\vec{u}\vec{u}^\text{T})^{-1} =& A^{-1}    -\frac{A^{-1}\vec{u}\vec{u}^\text{T} A^{-1}}    {1+\vec{u}^\text{T}A^{-1}\vec{u}}\end{aligned}</script><script type="math/tex; mode=display">\vec a\times(\vec b\times\vec c)=(\vec a\cdot\vec c)\vec b -(\vec a\cdot\vec b)\vec c</script><script type="math/tex; mode=display">(\vec a\times\vec b)\times\vec c=(\vec a\cdot\vec c)\vec b -\vec a(\vec b\cdot\vec c)</script><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://www.cnblogs.com/marsggbo/p/10152644.html">【Math for ML】矩阵分解(Matrix Decompositions)</a><br><a href="https://ccjou.wordpress.com/2013/06/07/%E5%88%86%E5%A1%8A%E7%9F%A9%E9%99%A3%E7%9A%84%E8%A1%8C%E5%88%97%E5%BC%8F/">分块矩阵的行列式</a></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自用的高等数学笔记</title>
      <link href="/2024/08/03/%E8%87%AA%E7%94%A8%E7%9A%84%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%A6%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/08/03/%E8%87%AA%E7%94%A8%E7%9A%84%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%A6%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h1 id="泰勒公式"><a href="#泰勒公式" class="headerlink" title="泰勒公式"></a>泰勒公式</h1><script type="math/tex; mode=display">\begin{aligned}& f(x)=f(x_0)+f'(x_0)(x-x_0)+\frac{f''(x_0)}{2!}(x-x_0)^2+\frac{f^{(3)}(x_0)}{2!}(x-x_0)^3+\cdots \\& f(a)=f(x)+f'(x)(a-x)+\frac{f''(\xi_1)}{2!}(a-x)^2 \\\end{aligned}</script><h2 id="一元函数泰勒展开"><a href="#一元函数泰勒展开" class="headerlink" title="一元函数泰勒展开"></a>一元函数泰勒展开</h2><script type="math/tex; mode=display">\begin{aligned}    \sin x&=x-\frac{x^3}{3!}+\frac{x^5}{5!}-\cdots\\    \cos x&=1-\frac{x^2}{2!}+\frac{x^4}{4!}+\cdots\\    \tan x&=x+\frac{x^3}{3}+\frac{x^5}{5}+\cdots\\    \arctan x&=x-\frac{x^3}{3}+\frac{x^5}{5}-\cdots\\    \ln(1+x)&=x-\frac{x^2}{2}+\frac{x^3}{3}-\cdots\\    \text{e}^x&=1+x+\frac{x^2}{2!}+\frac{x^3}{3!}+\cdots\\    \frac{1}{1-x}&=1+x+x^2+x^3+\cdots\\    (1+x)^n&=1+nx+\frac{n(n-1)}{2}x^2\cdots\\\end{aligned}</script><h2 id="多元函数泰勒展开"><a href="#多元函数泰勒展开" class="headerlink" title="多元函数泰勒展开"></a>多元函数泰勒展开</h2><script type="math/tex; mode=display">f(\boldsymbol{x})=\sum_{k=0}^{\infty}\frac{1}{k!}(h_1\frac{\partial}{\partial x_1}+\cdots+h_n\frac{\partial}{\partial x_n})^kf(\boldsymbol{x}_0)</script><p>其中$\boldsymbol{h}=\boldsymbol{x}-\boldsymbol{x}_0$。二阶泰勒展开矢量形式</p><script type="math/tex; mode=display">f(\boldsymbol{x})=f(\boldsymbol{x}_0)+\nabla f(\boldsymbol{x}_0)^T(\boldsymbol{x}-\boldsymbol{x}_0)+\frac{1}{2}(\boldsymbol{x}-\boldsymbol{x}_0)^T\nabla^2f(\boldsymbol{x}_0)(\boldsymbol{x}-\boldsymbol{x}_0)+o(\Vert\boldsymbol{x}-\boldsymbol{x}_0\Vert^2)</script><p>其中$\nabla f(\boldsymbol{x}_0)=\frac{\partial f(\boldsymbol{x})}{\partial \boldsymbol{x}}\bigg|_{\boldsymbol{x}=\boldsymbol{x}_0}$。<br>三元二阶泰勒展开，令</p><script type="math/tex; mode=display">\boldsymbol{v}=\begin{bmatrix}x\\y\\z\end{bmatrix},f=f(\boldsymbol{v}),\frac{\partial f_0}{\partial x}=\frac{\partial f(\boldsymbol{v})}{\partial x}\bigg|_{\boldsymbol{v}=\boldsymbol{v}_0}</script><p>则</p><script type="math/tex; mode=display">f(\boldsymbol{v})=f(\begin{bmatrix}x_0\\y_0\\z_0\end{bmatrix})+\begin{bmatrix}\frac{\partial f_0}{\partial x} & \frac{\partial f_0}{\partial y} & \frac{\partial f_0}{\partial z}\end{bmatrix}\begin{bmatrix}h_x\\h_y\\h_z\end{bmatrix}+\frac{1}{2}\begin{bmatrix}h_x & h_y & h_z\end{bmatrix}\begin{bmatrix}    \frac{\partial^2f_0}{\partial x^2} & \frac{\partial^2f_0}{\partial x\partial y}& \frac{\partial^2f_0}{\partial x\partial z} \\    \frac{\partial^2f_0}{\partial y\partial x} & \frac{\partial^2f_0}{\partial y^2}& \frac{\partial^2f_0}{\partial y\partial z} \\    \frac{\partial^2f_0}{\partial z\partial x} & \frac{\partial^2f_0}{\partial x\partial y}& \frac{\partial^2f_0}{\partial z^2}\end{bmatrix}\begin{bmatrix} h_x \\ h_y \\ h_z\end{bmatrix}</script><p>求导</p><script type="math/tex; mode=display">\frac{\partial f(\boldsymbol{v})}{\partial \boldsymbol{v}}=\begin{bmatrix}\frac{\partial f_0}{\partial x} \\ \frac{\partial f_0}{\partial y} \\ \frac{\partial f_0}{\partial z}\end{bmatrix}+\begin{bmatrix}    \frac{\partial^2f_0}{\partial x^2} & \frac{\partial^2f_0}{\partial x\partial y}& \frac{\partial^2f_0}{\partial x\partial z} \\    \frac{\partial^2f_0}{\partial y\partial x} & \frac{\partial^2f_0}{\partial y^2}& \frac{\partial^2f_0}{\partial y\partial z} \\    \frac{\partial^2f_0}{\partial z\partial x} & \frac{\partial^2f_0}{\partial x\partial y}& \frac{\partial^2f_0}{\partial z^2}\end{bmatrix}\begin{bmatrix}h_x\\h_y\\h_z\end{bmatrix}</script><script type="math/tex; mode=display">\frac{\partial f(\boldsymbol{v})}{\partial \boldsymbol{v}}=\nabla f(\boldsymbol{x}_0)+\nabla^2f(\boldsymbol{x}_0)(\boldsymbol{v}-\boldsymbol{v}_0)</script><p>$f(\boldsymbol{v})$是一个标量，而$\frac{\partial f(\boldsymbol{v})}{\partial \boldsymbol{v}}$是一个矢量。<br>令$\frac{\partial f(\boldsymbol{v})}{\partial \boldsymbol{v}}=0$可解得</p><script type="math/tex; mode=display">\boldsymbol{v}-\boldsymbol{v}_0=-(\nabla^2f(\boldsymbol{x}_0))^{-1}\nabla f(\boldsymbol{x}_0)</script><p>代入$f(\boldsymbol{x})$得</p><script type="math/tex; mode=display">\begin{aligned}f(\boldsymbol{x})&=f(\boldsymbol{x}_0)+\nabla f(\boldsymbol{x}_0)^T(-(\nabla^2f(\boldsymbol{x}_0))^{-1}\nabla f(\boldsymbol{x}_0))\\&+\frac{1}{2}(\nabla^2f(\boldsymbol{x}_0))^{-1}\nabla f(\boldsymbol{x}_0))^T\nabla^2f(\boldsymbol{x}_0)(\nabla^2f(\boldsymbol{x}_0))^{-1}\nabla f(\boldsymbol{x}_0))\\&=f_0-(f'_0)^T(f''_0)^{-1}f'_0+\frac{1}{2}((f''_0)^{-1}f'_0)^Tf''_0((f''_0)^{-1}f'_0)\\&=f_0-(f'_0)^T(f''_0)^{-1}f'_0+\frac{1}{2}(f'_0)^T(f''_0)^{-1}f'_0\\&=f_0-\frac{1}{2}(f'_0)^T(f''_0)^{-1}f'_0\\&=f(\boldsymbol{x}_0)+\frac{1}{2}\frac{\partial f(\boldsymbol{x}_0)}{\partial \boldsymbol{x}}^T\boldsymbol{h}\end{aligned}</script><h1 id="空间解析几何"><a href="#空间解析几何" class="headerlink" title="空间解析几何"></a>空间解析几何</h1><h2 id="平面"><a href="#平面" class="headerlink" title="平面"></a>平面</h2><script type="math/tex; mode=display">A(x-x_0)+B(y-y_0)+C(z-z_0)=0 \\Ax+By+Cz+D=0 \\\frac{x}{a}+\frac{y}{b}+\frac{z}{c}=1 \\\vec{n}=(A,B,C) \\</script><h2 id="直线"><a href="#直线" class="headerlink" title="直线"></a>直线</h2><script type="math/tex; mode=display">\frac{x-x_0}{m}=\frac{y-y_0}{n}=\frac{z-z_0}{p} \\\vec{s}=(m,n,p)</script><h2 id="质心"><a href="#质心" class="headerlink" title="质心"></a>质心</h2><script type="math/tex; mode=display">\begin{aligned}& \bar{x}=\frac{\iint x\rho(x,y)\text{d}\sigma}{\iint\rho(x,y)\text{d}\sigma} \\& \bar{z}=\frac{\iiint z\rho(x,y,z)\text{d}\sigma}{\iiint\rho(x,y,z)\text{d}\sigma} \\\end{aligned}</script><h1 id="双曲函数"><a href="#双曲函数" class="headerlink" title="双曲函数"></a>双曲函数</h1><script type="math/tex; mode=display">\cosh x=\frac{\text{e}^x+\text{e}^{-x}}{2},\sinh x=\frac{\text{e}^x-\text{e}^{-x}}{2} \\\cosh(-x)=\cosh(x),\sinh(-x)=-\sinh(x) \\\cosh(x+y)=\cosh x\cosh y+\sinh x\sinh y \\\sinh(x+y)=\sinh x\cosh y+\cosh x\sinh y \\\cosh^2x-\sinh^2x=1 \\\cosh 2x=\cosh^2x+\sinh^2x \\\sinh 2x=2\sinh x\cosh x \\\cosh'x=\sinh x,\quad\sinh'x=\cosh x</script><h1 id="导数"><a href="#导数" class="headerlink" title="导数"></a>导数</h1><script type="math/tex; mode=display">(\cot x)'=-\frac{1}{\sin^2x}</script><h2 id="隐函数求导"><a href="#隐函数求导" class="headerlink" title="隐函数求导"></a>隐函数求导</h2><script type="math/tex; mode=display">F(x,y)=0,\frac{\text{d}y}{\text{d}x}=-\frac{F_x}{F_y} \\F(x,y,z)=0,\frac{\partial z}{\partial x}=-\frac{F_x}{F_z},\frac{\partial z}{\partial y}=-\frac{F_y}{F_z}</script><h1 id="不定积分"><a href="#不定积分" class="headerlink" title="不定积分"></a>不定积分</h1><script type="math/tex; mode=display">\begin{aligned}& \int\frac{1}{\sqrt{x^2+1}}\text{d}x=\ln|x+\sqrt{x^2+1}|+C \\& \int\text{e}^{ax}\cos bx\text{d}x=\frac{\text{e}^{ax}}{a^2+b^2}(a\cos bx+b\sin bx)+C \\& \int\text{e}^{ax}\sin bx\text{d}x=\frac{\text{e}^{ax}}{a^2+b^2}(a\sin bx-b\cos bx)+C \\& \int\text{e}^{ax}\cos bx+\text{j}\text{e}^{ax}\sin bx\text{d}x=\int \text{e}^{(a+\text{j}b)x}\text{d}x=\frac{\text{e}^{(a+\text{j}b)x}}{a+\text{j}b}+C \\& \int \sec x \mathrm{~d} x=\ln |\sec x+\tan x|+C \\& \int \csc x \mathrm{~d} x=\ln |\csc x-\cot x|+C \\\end{aligned}</script><h2 id="不定积分列表法"><a href="#不定积分列表法" class="headerlink" title="不定积分列表法"></a>不定积分列表法</h2><script type="math/tex; mode=display">\int x^3\text{e}^{2x}\text{d}x=x^3\frac{1}{2}\text{e}^{2x}-3x^2\frac{1}{4}\text{e}^{2x}+6x\frac{1}{8}\text{e}^{2x}-6\frac{1}{16}\text{e}^{2x} \\</script><div class="table-container"><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>$\frac{1}{2}\text{e}^{2x}$</td><td>$\frac{1}{4}\text{e}^{2x}$</td><td>$\frac{1}{8}\text{e}^{2x}$</td><td>$\frac{1}{16}\text{e}^{2x}$</td></tr><tr><td>+</td><td>-</td><td>+</td><td>- </td></tr><tr><td>$x^3$</td><td>$3x^2$</td><td>$6x$</td><td>$6$ \\</td></tr></tbody></table></div><h2 id="没有初等函数的原函数"><a href="#没有初等函数的原函数" class="headerlink" title="没有初等函数的原函数"></a>没有初等函数的原函数</h2><script type="math/tex; mode=display">\int\text{e}^{x^2}\text{d}x\quad\int\frac{\sin x}{x}\text{d}x\quad\int\frac{1}{\ln x}\text{d}x\quad\int\frac{1}{\sqrt{1+x^4}}\text{d}x\quad\int\sqrt{1-k^2\sin^2x}\text{d}x \\\int\text{e}^{\frac{1}{x}}\text{d}x\quad</script><h1 id="定积分"><a href="#定积分" class="headerlink" title="定积分"></a>定积分</h1><script type="math/tex; mode=display">\begin{aligned}\int_0^{+\infty}\text{e}^{-x^2}\text{d}x&\xlongequal[t=\sqrt{x}]{x=t^2}\frac{1}{2}\int_0^{+\infty}\frac{\text{e}^{-t}}{\sqrt{t}}\text{d}t=\frac{1}{2}\Gamma(\frac{1}{2})=\frac{\sqrt{\pi}}{2} \\\int_0^{+\infty}\text{e}^{-x^2}\text{d}x&= \sqrt{\int_0^{+\infty}\int_0^{+\infty}\text{e}^{-x^2-y^2}\text{d}x\text{d}y} \\&= \sqrt{\int_0^{\frac{\pi}{2}}\int_0^{+\infty}\text{e}^{-r^2}r\text{d}r\text{d}\theta} \\&= \sqrt{\int_0^{\frac{\pi}{2}}\frac{1}{2}\text{d}\theta}=\frac{\sqrt{\pi}}{2} \\\int_0^{\frac{\pi}{2}}\sin x\text{d}x &= \int_0^{\frac{\pi}{2}}\sin 2x\text{d}x \\\int_a^bf(x)\text{d}x &= \int_a^bf(a+b-x)\text{d}x \\\end{aligned}</script><h2 id="Gamma-函数"><a href="#Gamma-函数" class="headerlink" title="$\Gamma$函数"></a>$\Gamma$函数</h2><script type="math/tex; mode=display">\begin{aligned}& \Gamma(s)=\int_0^{+\infty}\text{e}^{-x}x^{s-1}\text{d}x \\& \Gamma(s+1)=s\Gamma(s)=s! \\\end{aligned}</script><p>余元公式</p><script type="math/tex; mode=display">\Gamma(s)\Gamma(1-s)=\frac{\pi}{\sin\pi s}</script><h2 id="罗巴切夫斯基-Lobachevsky-积分"><a href="#罗巴切夫斯基-Lobachevsky-积分" class="headerlink" title="罗巴切夫斯基(Lobachevsky)积分"></a>罗巴切夫斯基(Lobachevsky)积分</h2><p>若$f(x)$在$[0,+\infty)$有$f(\pi-x)=f(x)$以及$f(x+\pi)=f(x)$，则有</p><script type="math/tex; mode=display">\int_0^{+\infty} f(x)\frac{\sin x}{x}=\int_0^{\frac{\pi}{2}}f(x)\text{d}x</script><h1 id="微分方程"><a href="#微分方程" class="headerlink" title="微分方程"></a>微分方程</h1><h2 id="常用变量代换"><a href="#常用变量代换" class="headerlink" title="常用变量代换"></a>常用变量代换</h2><script type="math/tex; mode=display">\begin{aligned}& z=\frac{y}{x},z=\frac{1}{y},z=y' \\\end{aligned}</script><h2 id="二阶线性微分方程解的结构"><a href="#二阶线性微分方程解的结构" class="headerlink" title="二阶线性微分方程解的结构"></a>二阶线性微分方程解的结构</h2><script type="math/tex; mode=display">\begin{aligned}& y''+P(x)y'+Q(x)y=0 \\& y=C_1y_1(x)+C_2y_2(x) \\& y''+P(x)y'+Q(x)y=f(x) \\& y=C_1y_1(x)+C_2y_2(x)+f^*(x) \\\end{aligned}</script><h2 id="二阶常系数齐次线性微分方程"><a href="#二阶常系数齐次线性微分方程" class="headerlink" title="二阶常系数齐次线性微分方程"></a>二阶常系数齐次线性微分方程</h2><p>特征方程$x^2+px+q=0$，单根$r_1,r_2$，复根$r$，共轭复根$\alpha\pm \text{j}\beta$。</p><script type="math/tex; mode=display">\begin{aligned}& y''+py'+qy=0 \\& y=C_1\text{e}^{r_1x}+C_2\text{e}^{r_2x} \\& y=(C_1+C_2x)\text{e}^{rx} \\&y=\text{e}^{\alpha x}(C_1\cos\beta x+C_2\sin\beta x) \\\end{aligned}</script><h2 id="二阶常系数非齐次线性微分方程"><a href="#二阶常系数非齐次线性微分方程" class="headerlink" title="二阶常系数非齐次线性微分方程"></a>二阶常系数非齐次线性微分方程</h2><script type="math/tex; mode=display">y''+py'+qy=f(x)</script><p>对于微分方程</p><script type="math/tex; mode=display">f(x)=\text{e}^{\lambda x}P_m(x)</script><p>特解满足形式</p><script type="math/tex; mode=display">y^*=x^kR_m(x)\text{e}^{\lambda x}</script><p>其中$R_m(x)$是与$P_m(x)$同次的多项式，而$k$按$\lambda$不是特征方程的根、是特征方程的单根、复根，依次取0、1、2。n阶常系数非齐次线性微分方程中，$k$是$\lambda$的重复次数。<br>对于微分方程</p><script type="math/tex; mode=display">f(x)=\text{e}^{\lambda x}[P_l(x)\cos\omega x+Q_n(x)\sin\omega x]</script><p>特解满足形式</p><script type="math/tex; mode=display">y^*=x^k\text{e}^{\lambda x}[R_m^{(1)}(x)\cos\omega x+R_m^{(2)}(x)\sin\omega x]</script><p>其中$R_m^{(1)}(x)$，$R_m^{(2)}(x)$是m次多项式，$m=\max\{l,n\}$，$k$按$\lambda+\omega i$(或$\lambda-\omega i$)不是特征方程的根是特征方程的单根分别取0或1。</p><h2 id="欧拉方程"><a href="#欧拉方程" class="headerlink" title="欧拉方程"></a>欧拉方程</h2><p>令$x=\text{e}^t$，$t=\ln x$</p><script type="math/tex; mode=display">\sum_{i=1}^nx^iy^{(i)}=f(x) \\\frac{\text{d}y}{\text{d}x}=\frac{1}{x}\frac{\text{d}y}{\text{d}t} \\\frac{\text{d}^2y}{\text{d}x^2}=\frac{1}{x^2}(\frac{\text{d}^2y}{\text{d}t^2}-\frac{\text{d}y}{\text{d}t}) \\\frac{\text{d}^3y}{\text{d}x^3}=\frac{1}{x^3}(\frac{\text{d}^3y}{\text{d}t^3}-3\frac{\text{d}^2y}{\text{d}t^2}+2\frac{\text{d}y}{\text{d}t}) \\xy'=\text{D}y \\x^2y''=\text{D}(\text{D}-1)y \\x^3y'''=\text{D}(\text{D}-1)(\text{D}-2)y</script><h1 id="级数"><a href="#级数" class="headerlink" title="级数"></a>级数</h1><h2 id="正项级数"><a href="#正项级数" class="headerlink" title="正项级数"></a>正项级数</h2><p>若$a_n\le b_n$且$b_n$收敛，则$a_n$收敛。<br>若$a_n\ge b_n$且$b_n$发散，则$a_n$发散。<br>令$l=\displaystyle\lim_{n\to\infty}\frac{a_n}{b_n}$，<br>若$0<l<+\infty$，则$a_n$与$b_n$敛散性相同。若$l=0$且$b_n$收敛，则$a_n$收敛。若$l=+\infty$且$b_n$发散，则$a_n$发散。令$\rho=\displaystyle\lim_{n\to\infty}\frac{a_{n+1}}{a_n}$，$\rho<1$时收敛，$\rho>1$时发散。<br>令$\rho=\sqrt[n]{a_n}$，$\rho<1$时收敛，$\rho>1$时发散。</p><h2 id="p级数"><a href="#p级数" class="headerlink" title="p级数"></a>p级数</h2><script type="math/tex; mode=display">1+\frac{1}{2^p}+\frac{1}{3^p}+\frac{1}{4^p}+\cdots+\frac{1}{n^p}</script><p>其中$p&gt;0$，$p\le1$时发散。</p><h2 id="交错级数"><a href="#交错级数" class="headerlink" title="交错级数"></a>交错级数</h2><script type="math/tex; mode=display">\sum_{n=0}^{\infty}(-1)^{n} u_{n}</script><p>若$u_n\ge u_{n+1}$且$\displaystyle\lim_{n\to\infty}u_n=0$则交错级数收敛。<br>对于一般的级数</p><script type="math/tex; mode=display">u_1+u_2+\cdots+u_n</script><p>如果级数$|u_n|$收敛则称$u_n$绝对收敛，如果级数$|u_n|$发散但$u_n$收敛则称$u_n$条件收敛。$u_n$绝对收敛是$u_n$收敛的充分不必要条件。</p><h2 id="幂级数"><a href="#幂级数" class="headerlink" title="幂级数"></a>幂级数</h2><script type="math/tex; mode=display">\sum_{n=0}^{\infty} a_{n} x^{n}=a_{0}+a_{1} x+a_{2} x^{2}+\cdots+a_{n} x^{n}</script><h1 id="信号与系统"><a href="#信号与系统" class="headerlink" title="信号与系统"></a>信号与系统</h1><h2 id="傅里叶级数"><a href="#傅里叶级数" class="headerlink" title="傅里叶级数"></a>傅里叶级数</h2><p>傅里叶级数(FS)将连续周期信号分解为非周期离散频谱。</p><script type="math/tex; mode=display">f(t)=\frac{a_0}{2}+\sum_{n=1}^{\infty}a_n\cos n\Omega t+\sum_{n=1}^{\infty}b_n\sin n\Omega t</script><script type="math/tex; mode=display">a_n=\frac{2}{T}\int_{-\frac{T}{2}}^{\frac{T}{2}}f(t)\cos n\Omega t\text{d}t</script><script type="math/tex; mode=display">b_n=\frac{2}{T}\int_{-\frac{T}{2}}^{\frac{T}{2}}f(t)\sin n\Omega t\text{d}t</script><p>其中$T$为周期，$\Omega=\frac{2\pi}{T}$。复数形式</p><script type="math/tex; mode=display">f(t)=\sum_{n=-\infty}^{\infty}F_n\text{e}^{jn\Omega t}</script><script type="math/tex; mode=display">F_n=\frac{1}{T}\int_{-\frac{T}{2}}^{\frac{T}{2}}f(t)\text{e}^{-jn\Omega t}\text{d}t</script><h2 id="傅里叶变换"><a href="#傅里叶变换" class="headerlink" title="傅里叶变换"></a>傅里叶变换</h2><p>连续傅里叶变换(FT)将连续非周期信号分解为非周期连续频谱。</p><h2 id="拉普拉斯变换"><a href="#拉普拉斯变换" class="headerlink" title="拉普拉斯变换"></a>拉普拉斯变换</h2><script type="math/tex; mode=display">\frac{\text{d}y}{\text{d}t}f(t)\longrightarrow sF(s)-f(0)</script><script type="math/tex; mode=display">\frac{\text{d}^2}{\text{d}t^2}f(t)\longrightarrow s^2F(s)-sf(0)-f'(0)</script>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自用的概率论笔记</title>
      <link href="/2024/08/03/%E8%87%AA%E7%94%A8%E7%9A%84%E6%A6%82%E7%8E%87%E8%AE%BA%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/08/03/%E8%87%AA%E7%94%A8%E7%9A%84%E6%A6%82%E7%8E%87%E8%AE%BA%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h1 id="随机事件"><a href="#随机事件" class="headerlink" title="随机事件"></a>随机事件</h1><script type="math/tex; mode=display">\begin{aligned}& A\cap B=AB,A\cup B=A+B \\& P(A+B)=P(A)+P(B)-P(AB) \\& P(A-B)=P(A\overline{B}) \\& P(A+B-C)\neq P(A-C+B),P(A+B-C)\neq P(A+(B-C)) \\& P(A(B-C))\neq P(AB-AC) \\\end{aligned}</script><p>事件运算法则</p><script type="math/tex; mode=display">\begin{aligned}& A+AB=A,A-B=A\overline{B} \\& A(B+C)=AB+AC,A+BC=(A+B)(A+C) \\& A+B+C=A+(B+C) \\& \overline{A+B}=\overline{A}\overline{B},\overline{AB}=\overline{A}+\overline{B} \\\end{aligned}</script><p>独立$P(AB)=P(A)P(B)$，不相容$P(A+B)=P(A)+P(B)$，$AB=\emptyset$</p><h1 id="一元线性回归"><a href="#一元线性回归" class="headerlink" title="一元线性回归"></a>一元线性回归</h1><script type="math/tex; mode=display">\begin{aligned}& y(n)=a^*x(n)+b^* \\& J(a,b)=\sum_{n=1}^N(y(n)-ax(n)-b)^2 \\\end{aligned}</script><script type="math/tex; mode=display">\begin{aligned}& \frac{\partial J}{\partial b} = -2\sum_{n=1}^N[y(n)-ax(n)-b]=0 \\& \sum_{n=1}^Ny(n)-a\sum_{n=1}^Nx(n)-bn=0 \\& b=\frac{1}{N}\left(\sum_{n=1}^Ny(n)-a\sum_{n=1}^Nx(n)\right)=\bar{y}-a\bar{x} \\& \frac{\partial J}{\partial a} = -2\sum_{n=1}^Nx(n)[y(n)-ax(n)-b]=0 \\& \sum_{n=1}^Nx(n)y(n)-a\sum_{n=1}^Nx^2(n)-b\sum_{n=1}^Nx(n)=0 \\& \sum_{n=1}^Nxy-a\sum x^2-\sum x\left(\sum y-a\sum x\right)=0 \\& \sum xy-\sum x\sum y=a\sum x^2-a\sum x\sum x \\&\begin{cases}a=\frac{\displaystyle\sum_{n=1}^Nx(n)y(n)-\sum_{n=1}^Nx(n)\sum_{n=1}^Ny(n)}{\displaystyle\sum_{n=1}^Nx^2(n)-\left(\sum_{n=1}^Nx(n)\right)^2} \\b=\bar{y}-a\bar{x}\end{cases}\end{aligned}</script><h1 id="分布律"><a href="#分布律" class="headerlink" title="分布律"></a>分布律</h1><h2 id="二项分布"><a href="#二项分布" class="headerlink" title="二项分布"></a>二项分布</h2><p>$X\sim B(n,p)$<br>设事件X发生的概率为p，进行n次实验，事件X发生k次的概率为$P(X=k)=C_n^kp^k(1-p)^{n-k}$<br>$E(X)=np,DX=np(1-p)$</p><h2 id="几何分布"><a href="#几何分布" class="headerlink" title="几何分布"></a>几何分布</h2><script type="math/tex; mode=display">X\sim G(p)</script><p>设事件X发生的概率为p，事件X首次发生时的实验次数k满足$P(X=k)=p(1-p)^{k-1}$</p><h2 id="超几何分布"><a href="#超几何分布" class="headerlink" title="超几何分布"></a>超几何分布</h2><script type="math/tex; mode=display">X\sim H(n,M,N)</script><p>N件产品中有m件次品，从中任取n件产品不放回，有X件次品的概率为</p><script type="math/tex; mode=display">P(X=k)=\frac{C_M^k\cdot C_{N-M}^{n-k}}{C_N^n}</script><h2 id="泊松分布"><a href="#泊松分布" class="headerlink" title="泊松分布"></a>泊松分布</h2><script type="math/tex; mode=display">X\sim P(\lambda)</script><script type="math/tex; mode=display">\begin{aligned}& P(X=k)=\frac{\lambda^k\text{e}^{-\lambda}}{k!} \\& \lim_{N\to+\infty}\frac{C_M^k\cdot C_{N-M}^{n-k}}{C_N^n}=C_n^kp^k(1-p)^{n-k} \\& \lim_{n\to+\infty}C_n^kp^k(1-p)^{n-k}=\frac{\lambda^k\text{e}^{-\lambda}}{k!} \\\end{aligned}</script><p>证明如下</p><script type="math/tex; mode=display">\begin{aligned}& P(X=k)=\text{C}_n^kp^k(1-p)^{n-k} \\& \text{E}(x)=np=\lambda \\&\lim_{n\rightarrow+\infty}\text{C}_n^kp^k(1-p)^{n-k} \\=&\lim_{n\rightarrow+\infty}\frac{n(n-1)(n-2)\cdots(n-k+1)}{k!}\left(\frac{\lambda}{n}\right)^k\left(1-\frac{\lambda}{n}\right)^{n-k} \\=&\frac{\lambda^k}{k!}\lim_{n\rightarrow+\infty}1(1-\frac{1}{n})(1-\frac{2}{n})\cdots(1-\frac{k}{n})\left(1-\frac{\lambda}{n}\right)^n\left(1-\frac{\lambda}{n}\right)^{-k} \\=&\frac{\lambda^k}{k!}\lim_{n\rightarrow+\infty}\left(1-\frac{\lambda}{n}\right)^n \\=&\frac{\lambda^k\text{e}^{-\lambda}}{k!}\end{aligned}</script><h2 id="均匀分布"><a href="#均匀分布" class="headerlink" title="均匀分布"></a>均匀分布</h2><script type="math/tex; mode=display">X\sim U[a,b]</script><h2 id="指数分布"><a href="#指数分布" class="headerlink" title="指数分布"></a>指数分布</h2><script type="math/tex; mode=display">X\sim e(\lambda)</script><script type="math/tex; mode=display">f(x)=\begin{cases}    \lambda\text{e}^{-\lambda x} &, x\ge 0 \\    0 &, x<0\end{cases}</script><p>指数分布与泊松分布的关系</p><script type="math/tex; mode=display">\begin{aligned}& P(Y>t)=P(X=0,t)=\frac{\left(\lambda t\right)^0}{0!}e^{-\lambda t}=e^{-\lambda t},\quad t\ge 0 \\& F(x)=1-\text{e}^{-\lambda x},x\ge 0  \\\end{aligned}</script><h2 id="正态分布"><a href="#正态分布" class="headerlink" title="正态分布"></a>正态分布</h2><script type="math/tex; mode=display">X\sim N(\mu,\sigma) \\f(x)=\frac{1}{\sqrt{2\pi}\sigma}\text{exp}\left\{-\frac{(x-\mu)^2}{2\sigma^2}\right\} \\\Phi(x)=\int_{-\infty}^x\frac{1}{\sqrt{2\pi}}\text{e}^{-\frac{t^2}{2}}\text{d}t</script><h1 id="数学期望和方差"><a href="#数学期望和方差" class="headerlink" title="数学期望和方差"></a>数学期望和方差</h1><script type="math/tex; mode=display">\begin{aligned}\text{Cov}(X,X) &= \text{D}X \\\text{Cov}(X,Y) &= \text{E}[(X-\text{E}X)(Y-\text{E}Y)]=\text{E}(XY)-\text{E}X\cdot\text{E}Y \\\rho_{xy} &= \frac{\operatorname{Cov}(X, Y)}{\sqrt{\text{D} X} \sqrt{\text{D} Y}} \\\text{E}(X\pm Y) &= \text{E}X\pm \text{E}Y \\\text{D}(X\pm Y) &= \text{D}X+\text{D}Y\pm 2\text{Cov}(X,Y) \\\text{Cov}(X,Y_1\pm Y_2) &= \text{Cov}(X,Y_1)\pm\text{Cov}(X,Y_2) \\\text{Cov}(X,kY) &= k\text{Cov}(X,Y) \\\end{aligned}</script><h1 id="切比雪夫不等式"><a href="#切比雪夫不等式" class="headerlink" title="切比雪夫不等式"></a>切比雪夫不等式</h1><p>马尔可夫不等式</p><script type="math/tex; mode=display">\text P\{X>\varepsilon\}\le\frac{\text EX}{\varepsilon}</script><p>其中$X\ge0$</p><script type="math/tex; mode=display">\begin{aligned}\text Ex &=\int_{0}^{\infty} x f(x) d x \\& \geq \int_{\varepsilon}^{\infty} x f(x) d x \\&\ge\varepsilon\int_{\varepsilon}^{\infty} f(x) d x \\&=P\{x \geq \varepsilon\}\end{aligned}</script><p>切比雪夫不等式</p><script type="math/tex; mode=display">\text P\{|X-\text EX|\geq\varepsilon\}\leq\frac{\text DX}{\varepsilon^2}</script><h1 id="样本方差的无偏估计"><a href="#样本方差的无偏估计" class="headerlink" title="样本方差的无偏估计"></a>样本方差的无偏估计</h1><script type="math/tex; mode=display">\begin{aligned}\frac{1}{n-1}\sum_{i=1}^{n}(x_{i}-\bar{x})^{2} &= \frac{1}{n-1}\sum_{i=1}^{n}[(x_{i}-\mu)-(\bar{x}-\mu)]^{2} \\&=\frac{1}{n-1} \sum_{i=1}^{n}(x_{i}-\mu)^{2}-\frac{2}{n-1}\sum_{i=1}^{n}(x_{i}-\mu)(\bar{x}-\mu)+\frac{1}{n-1}\sum_{i=1}^{n}(\bar{x}-\mu)^{2} \\&= \frac{1}{n-1} \sum_{i=1}^{n}(x_{i}-\mu)^{2}-\frac{2(\bar{x}-\mu)}{n-1}(n \bar{x}-n \mu)+\frac{n}{n-1}(\bar{x}-\mu)^{2} \\&= \frac{1}{n-1} \sum_{i=1}^{n}(x_{i}-\mu)^{2}-\frac{n}{n-1}(\bar{x}-\mu)^{2} \\\text{E}\left[\frac{1}{n-1}\sum_{i=1}^{n}(x_{i}-\bar{x})^{2}\right]&= \text{E}\left[\frac{1}{n-1} \sum_{i=1}^{n}(x_{i}-\mu)^{2}-\frac{n}{n-1}(\bar{x}-\mu)^{2}\right] \\&=\frac{n}{n-1}\text{D}x-\frac{n}{n-1}\cdot\frac{\text{D}x}{n}=\text{D}x\end{aligned}</script><h1 id="高维正态随机变量"><a href="#高维正态随机变量" class="headerlink" title="高维正态随机变量"></a>高维正态随机变量</h1><p>二维正态随机变量$(X_1,X_2)$的概率密度为</p><script type="math/tex; mode=display">\begin{aligned}f(x_1,x_2)=& \frac{1}{2\pi\sigma_1\sigma_2\sqrt{1-\rho^2}}\exp\left\{\frac{-1}{2(1-\rho^{2})}\left[\frac{(x_1-\mu_1)^2}{\sigma_1^2}-2 \rho \frac{\left(x_{1}-\mu_{1}\right)\left(x_{2}-\mu_{2}\right)}{\sigma_{1} \sigma_{2}}+\frac{\left(x_{2}-\mu_{2}\right)^{2}}{\sigma_{2}^{2}}\right]\right\} \\=& \frac{1}{2\pi\text{det}^{1/2}\mathbf{C}}\exp\left\{-\frac{1}{2}\left[\begin{matrix}x_1-\mu_1 \\ x_2-\mu_2\end{matrix}\right]^\top\mathbf{C}^{-1}\left[\begin{matrix}x_1-\mu_1 \\ x_2-\mu_2\end{matrix}\right]\right\}\end{aligned}</script><p>其中的协方差矩阵$\mathbf{C}$为</p><script type="math/tex; mode=display">\mathbf{C}=\left[\begin{matrix}\sigma_1^2 & \rho\sigma_1\sigma_2 \\\rho\sigma_1\sigma_2 & \sigma_2^2 \\\end{matrix}\right]=\left[\begin{matrix}\text{D}X_1 & \text{Cov}(X_1,X_2) \\\text{Cov}(X_1,X_2) & \text{D}X_2 \\\end{matrix}\right]</script><p>n维正态随机变量的概率密度为</p><script type="math/tex; mode=display">f(\boldsymbol{x})=\frac{1}{(2 \pi)^{n/2}\text{det}^{1/2}\mathbf{C}}\exp \left\{-\frac{1}{2}(\boldsymbol{x}-\boldsymbol{\mu})^{\top}\mathbf{C}^{-1}(\boldsymbol{x}-\boldsymbol{\mu})\right\}</script><h1 id="条件数学期望"><a href="#条件数学期望" class="headerlink" title="条件数学期望"></a>条件数学期望</h1><p>边缘分布</p><script type="math/tex; mode=display">\begin{aligned}& f(x)=\int_{a(x)}^{b(x)} f(x,y)\text{d}y \\& f(y)=\int_{a(y)}^{b(y)} f(x,y)\text{d}x \\\end{aligned}</script><p>其中 $a(x),b(x)$ 或 $a(y),b(y)$ 是与 $x$ 或 $y$ 有关的上下界，概率论教材中用的是 $\infty$。<br>条件分布</p><script type="math/tex; mode=display">f(y|x)=\frac{f(x,y)}{f(x)}</script><p>条件期望</p><script type="math/tex; mode=display">\text{E}(x|y)=\int_{a(y)}^{b(y)} yf(x|y)\text{d}x</script><p><strong>性质1：</strong> $\text{E}(\text{E}(X|Y))=\text{E}X$<br><strong>证明：</strong></p><script type="math/tex; mode=display">\begin{aligned}\text Ex =& \int_{a_x}^{b_x}xf(x)\text dx \\=& \int_{a_x}^{b_x}x\left[\int_{a_y(x)}^{b_y(x)}f(x,y)\text dy\right]\text dx \\=& \int_{a_x}^{b_x}\int_{a_y(x)}^{b_y(x)}xf(x,y)\text dy\text dx \\=& \int_{a_x}^{b_x}\int_{a_y(x)}^{b_y(x)}xf(y)\frac{f(x,y)}{f(y)}\text dy\text dx \\=& \int_{a_y}^{b_y}\int_{a_x(y)}^{b_x(y)}xf(y)\frac{f(x,y)}{f(y)}\text dx\text dy \\=& \int_{a_y}^{b_y}f(y)\left[\int_{a_x(y)}^{b_x(y)}x\frac{f(x,y)}{f(y)}\text dx\right]\text dy \\=& \int_{a_y}^{b_y}f(y)\left[\int_{a_x(y)}^{b_x(y)}xf(x|y)\text dx\right]\text dy \\=& \int_{a_y}^{b_y}\text E(x|y)f(y)\text dy \\=& \text E[\text E(x|y)] \\\end{aligned}</script><p><strong>性质2：</strong> $\text{E}[g(X)h(Y)|Y]=h(Y)\text{E}[g(X)|Y]$<br><strong>证明：</strong></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自用的markdown与latex特殊符号</title>
      <link href="/2024/08/03/%E8%87%AA%E7%94%A8%E7%9A%84markdown%E4%B8%8Elatex%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7/"/>
      <url>/2024/08/03/%E8%87%AA%E7%94%A8%E7%9A%84markdown%E4%B8%8Elatex%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7/</url>
      
        <content type="html"><![CDATA[<p>有些特殊符号不经常用老是忘，偶尔用的时候还得查，总结一下备用。<br><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">\triangleq</span></span><br><span class="line"><span class="keyword">\approx</span></span><br><span class="line"><span class="keyword">\xlongequal</span>[y=<span class="keyword">\arctan</span> x]&#123;x=<span class="keyword">\tan</span> y&#125;</span><br><span class="line"><span class="keyword">\sum</span><span class="built_in">_</span>&#123;<span class="keyword">\substack</span>&#123;j=1 <span class="keyword">\\</span> j<span class="keyword">\neq</span> i&#125;&#125;</span><br><span class="line"><span class="keyword">\iiint</span><span class="keyword">\limits</span><span class="built_in">_</span><span class="keyword">\Omega</span></span><br><span class="line"><span class="keyword">\overset</span>&#123;<span class="keyword">\circ</span>&#125;&#123;<span class="keyword">\vec</span>&#123;r&#125;&#125;</span><br><span class="line"><span class="keyword">\varphi</span></span><br><span class="line"><span class="keyword">\checkmark</span></span><br><span class="line"><span class="keyword">\stackrel</span>&#123;<span class="keyword">\cdot</span><span class="keyword">\cdot</span><span class="keyword">\cdot</span>&#125;&#123;x&#125;</span><br><span class="line"><span class="keyword">\equiv</span></span><br></pre></td></tr></table></figure></p><script type="math/tex; mode=display">\triangleq\approx\xlongequal[y=\arctan x]{x=\tan y}\sum_{\substack{j=1 \\ j\neq i}}\iiint\limits_\Omega\overset{\circ}{\vec{r}}\varphi\checkmark\stackrel{\cdot\cdot\cdot}{x}\geqslant\equiv</script><p><a href="https://www.cmor-faculty.rice.edu/~heinken/latex/symbols.pdf">$\LaTeX$ Mathematical Symbols</a><br><a href="https://oeis.org/wiki/List_of_LaTeX_mathematical_symbols">List of LaTeX mathematical symbols -oeis</a><br><a href="https://www.overleaf.com/learn/latex/List_of_Greek_letters_and_math_symbols">List of Greek letters and math symbols -overleaf</a>  </p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>姿态与轨道动力学笔记</title>
      <link href="/2024/08/03/%E5%A7%BF%E6%80%81%E4%B8%8E%E8%BD%A8%E9%81%93%E5%8A%A8%E5%8A%9B%E5%AD%A6%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/08/03/%E5%A7%BF%E6%80%81%E4%B8%8E%E8%BD%A8%E9%81%93%E5%8A%A8%E5%8A%9B%E5%AD%A6%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="圆锥曲线轨道"><a href="#圆锥曲线轨道" class="headerlink" title="圆锥曲线轨道"></a>圆锥曲线轨道</h1><p>轨道六根数指：<br>半长轴(a)、偏心率(e)，轨道倾角(i)，升交点赤经($\Omega$)、近地点幅角($\omega$)、真近点角($\phi$)。<br>其它参数：<br>角动量 $\vec{h}$、半通径 $p$、远拱点 $r_a$、周期 $T$。</p><script type="math/tex; mode=display">\begin{aligned}    \mathcal{E} =& -\frac{\mu}{2a}=\frac{v^2}{2}-\frac{\mu}{r}    = \frac{v_{inf}^2}{2} \\    \vec{h} =& \vec{r}\times\vec{v} \\    |\vec{h}| =& |\vec{r}||\vec{v}|\sin\theta \\    a =& \frac{p}{1-e^2}=-\frac{\mu}{2\mathcal{E}}    = \frac{\mu r}{2\mu-rv^2} \\    p =& \frac{h^2}{\mu} \\    \vec{e} =& \frac{\vec{v}\times\vec{h}}{\mu}     - \frac{\vec{r}}{|\vec{r}|}     = (\frac{v^2}{\mu}-\frac{1}{r})\vec{r}     - \frac{\vec{v}\cdot\vec{r}}{\mu}\vec{v} \\    e =& \sqrt{1-\frac{h^2}{a\mu}} \\    r =& \frac{p}{1+e\cos f} \\    f =& \arccos(\frac{1}{e}(\frac{h^2}{\mu r}-1)) \\    r_a =& a(1+e) \\    T =& 2\pi\sqrt{\frac{a^3}{\mu}}\end{aligned}</script><p>由轨道元素计算位置和速度向量</p><script type="math/tex; mode=display">\begin{aligned}    R =& \begin{bmatrix}        c_\Omega c_\omega-s_\Omega c_i s_\omega &        -c_\Omega s_\omega-s_\Omega c_i c_\omega &        s_\Omega s_i \\        s_\Omega c_\omega+c_\Omega c_i s_\omega &        -s_\Omega s_\omega+c_\Omega c_i c_\omega &        -c_\Omega s_i \\        s_i s_\omega & s_i c_\omega & c_i    \end{bmatrix} \\    \vec{r} =& R\begin{bmatrix}        \displaystyle\frac{a(1-e^2)}{1+e\cos\theta}\cos\theta \\        \displaystyle\frac{a(1-e^2)}{1+e\cos\theta}\sin\theta \\ 0    \end{bmatrix} \\    \vec{v} =& \sqrt{\frac{\mu}{a(1-e^2)}}R\begin{bmatrix}        -\sin\theta \\ e+\cos\theta \\ 0    \end{bmatrix}\end{aligned}</script><p>平近点角(mean anomaly, $M$)<br>真近点角(true anomaly, $\theta$)<br>偏近点角(eccentric anomaly, $E$)</p><script type="math/tex; mode=display">\begin{aligned}    & E-e\sin E=M \\    & \frac{\tan\frac{E}{2}}{\tan\frac{\theta}{2}}     = \sqrt{\frac{1-e}{1+e}}\end{aligned}</script><p>根据平近点角计算真近点角</p><script type="math/tex; mode=display">\begin{aligned}    \theta =& M+\left(2e-{\frac {1}{4}}e^{3}\right)\sin {M}    + {\frac {5}{4}}e^{2}\sin {2M} \\    &+ {\frac {13}{12}}e^{3}\sin {3M}+O(e^{4})\end{aligned}</script><p>已知 $\mu$、初始位置 $\vec{r}$ 和速度 $\vec{v}$ 计算经过指定时间 $T_0$ 后的位置和速度</p><ol><li>根据初始位置速度计算轨道能量 $\mathcal{E}$ 和偏心率 $\vec{e}$</li><li>根据 $\mu$ 和 $\mathcal{E}$ 计算半长轴 $a$ 进而计算轨道周期 $T$</li><li>根据 $T_0$ 和 $T$ 计算平近点角进而计算偏近点角 $E$</li><li>根据 $\vec{e}$ 计算半短轴 $b$ 和焦距 $c$，由椭圆参数方程得到 $\vec{r}$</li><li>由 $\mathcal{E}$ 计算速度大小 $|\vec{v}|$</li><li>由偏心率公式计算速度 $\vec{v}$</li></ol><script type="math/tex; mode=display">\begin{aligned}    &\left[\begin{matrix}        e \\ 0 \\ 0    \end{matrix}\right]    = (\frac{\vec{v}\times\vec{h}}{\mu} - \frac{\vec{r}}{|\vec{r}|})    \left[\begin{matrix}        r_x \\ r_y \\ 0    \end{matrix}\right]    - \frac{v_xr_x+v_yr_y}{\mu} \left[\begin{matrix}        v_x \\ v_y \\ 0    \end{matrix}\right] \\    & k = \frac{\vec{v}\times\vec{h}}{\mu} - \frac{\vec{r}}{|\vec{r}|} \\    & r_xv_x^2+r_yv_xv_y = \mu(kr_x-e) \\    & r_yv_y^2+r_xv_xv_y = \mu kr_y \\    & r_x^2v_x^2+r_xr_yv_xv_y = \mu(kr_x-e)r_x \\    & r_y^2v_y^2+r_xr_yv_xv_y = \mu kr_yr_y \\    & r_x^2v_x^2-r_y^2v_y^2 = \mu(kr_x-e)r_x - \mu kr_yr_y = k_1 \\    & v_x^2+v_y^2 = v^2 \\    & v_x^2 = \frac{r_y^2v^2 + k_1}{r^2} \\    & v_y^2 = \frac{r_x^2v^2 - k_1}{r^2} \\    &k_1 = \mu k(r_x^2-r_y^2) - er_x     = (v^2 - \frac{\mu}{r})(r_x^2-r_y^2) - \mu er_x\end{aligned}</script><h1 id="四元数、欧拉角、旋转矩阵"><a href="#四元数、欧拉角、旋转矩阵" class="headerlink" title="四元数、欧拉角、旋转矩阵"></a>四元数、欧拉角、旋转矩阵</h1><p><a href="https://blog.csdn.net/qq_34288751/article/details/124308210">四元数、欧拉角、旋转矩阵笔记</a>  </p><h1 id="旋转坐标系下的速度和加速度"><a href="#旋转坐标系下的速度和加速度" class="headerlink" title="旋转坐标系下的速度和加速度"></a>旋转坐标系下的速度和加速度</h1><p><a href="https://blog.csdn.net/qq_34288751/article/details/124308210">自用的刚体姿态动力学推导</a>  </p><h1 id="QUEST-算法"><a href="#QUEST-算法" class="headerlink" title="QUEST 算法"></a>QUEST 算法</h1><p>&emsp;&emsp;QUEST（QUaternion ESTimator）已知多个参考向量 $y_k$ 和对应的多个观测向量 $x_k$，求旋转矩阵 $A$ 使得 $y=Rx$ 的误差最小，即最小化指标函数</p><script type="math/tex; mode=display">J_0=\frac{1}{2}\sum_{k=1}^n\alpha_k|y_k-Ax_k|^2</script><p>或者最大化指标函数</p><script type="math/tex; mode=display">J=\sum_{k=1}^n\alpha_ky_k^\text{T}Ax_k</script><p>其中 $y_k$ 和 $x_k$ 均为单位向量，$\alpha_k\ge 0$ 为加权因子，$\sum\alpha_k=1$，并且 $J=1-J_0$。</p><h2 id="一组数据的情况"><a href="#一组数据的情况" class="headerlink" title="一组数据的情况"></a>一组数据的情况</h2><p>&emsp;&emsp;首先研究一个向量 $y=Ax$，设 $B=yx^\text{T}$，利用关于矩阵的迹的两个公式</p><script type="math/tex; mode=display">x^\text{T}y=\text{tr}(yx^\text{T})=\text{tr}(xy^\text{T}) \\\text{tr}(AB)=\text{tr}(BA)</script><p>则</p><script type="math/tex; mode=display">\begin{aligned}J=y^\text{T}Ax=\text{tr}(y(Ax)^\text{T})=\text{tr}(yx^\text{T}A^\text{T})=\text{tr}(BA^\text{T})=\text{tr}(AB^\text{T})\end{aligned}</script><p>将四元数与旋转矩阵的关系 (<a href="https://blog.csdn.net/qq_34288751/article/details/124308210#t4">四元数、欧拉角、旋转矩阵笔记</a>)</p><script type="math/tex; mode=display">R=(w^2-q_v^\text{T}q_v)I+2q_vq_v^\text{T}-2wq_v^{\wedge}</script><p>代入 $J$ 得</p><script type="math/tex; mode=display">\begin{aligned}J =& \text{tr}([(w^2-q_v^\text{T}q_v)I+2q_vq_v^\text{T}-2wq_v^{\wedge}]B^\text{T}) \\=& (w^2-q_v^\text{T}q_v)\text{tr}(B)+2\text{tr}(q_vq_v^\text{T}B^\text{T})-2w\text{tr}(q_v^{\wedge}B^\text{T})\end{aligned}</script><p>记</p><script type="math/tex; mode=display">\begin{aligned}\sigma =& \text{tr}(B) \\S =& B+B^\text{T} = yx^\text{T}+xy^\text{T} \\Z =& y\times x\end{aligned}</script><p>则</p><script type="math/tex; mode=display">\begin{aligned}J=& (w^2-q_v^\text{T}q_v)\sigma+2\text{tr}(q_vq_v^\text{T}xy^\text{T})-2w\text{tr}(q_v^{\wedge}xy^\text{T}) \\=& w^2\sigma-q_v^\text{T}q_v\sigma+\text{tr}(xy^\text{T}q_vq_v^\text{T})+q_v^\text{T}x\text{tr}(q_vy^\text{T})-2w\text{tr}(q_v^{\wedge}xy^\text{T}) \\=& w^2\sigma-q_v^\text{T}q_v\sigma+y^\text{T}q_v\text{tr}(xq_v^\text{T})+q_v^\text{T}x\text{tr}(y^\text{T}q_v)-2wy^\text{T}q_v^{\wedge}x \\=& w^2\sigma-\sigma q_v^\text{T}q_v+q_v^\text{T}yx^\text{T}q_v+q_v^\text{T}xy^\text{T}q_v+2wq_v^\text{T}y^{\wedge}x \\=& w^2\sigma-\sigma q_v^\text{T}q_v+q_v^\text{T}Sq_v+2wq_v^\text{T}(y\times x) \\=& w^2\sigma+q_v^\text{T}Zw+wZ^\text{T}q_v+q_v^\text{T}Sq_v-\sigma q_v^\text{T}q_v \\=& (w\sigma+q_v^\text{T}Z)w+(wZ^\text{T}+q_v^\text{T}(S-\sigma I))q_v \\=& \begin{bmatrix} w & q_v^\text{T} \end{bmatrix}\begin{bmatrix} \sigma & Z^\text{T} \\ Z & S-\sigma I \\ \end{bmatrix}\begin{bmatrix} w \\ q_v \end{bmatrix} \\=& q^\text{T}Kq\end{aligned}</script><p>其中第3行到第4行 $y^\text{T}q_v^{\wedge}x = -q_v^\text{T}y^{\wedge}x$ 实际上等价于 </p><script type="math/tex; mode=display">a\cdot (b\times c) = b\cdot (c\times a) = c\cdot (a\times b)</script><p>&emsp;&emsp;考虑到单位四元数 $q$ 满足 $|q|=1$，使用拉格朗日乘子法，</p><script type="math/tex; mode=display">\begin{aligned}L =& q^\text{T}Kq+\lambda(q^\text{T}q-1) \\\frac{\partial L}{\partial q} =& 2Kq-2\lambda q=0\end{aligned}</script><p>&emsp;&emsp;进一步扩展到多组数据并加入权重，取</p><script type="math/tex; mode=display">\begin{aligned}B =& \sum_{k=1}^n \alpha_k y_k x_k^\text{T} \\\sigma =& \text{tr}(B) \\S =& B+B^\text{T} \\Z =& \sum_{k=1}^n \alpha_k y_k \times x_k\end{aligned}</script>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>圆锥体转动惯量</title>
      <link href="/2024/08/03/%E5%9C%86%E9%94%A5%E4%BD%93%E8%BD%AC%E5%8A%A8%E6%83%AF%E9%87%8F/"/>
      <url>/2024/08/03/%E5%9C%86%E9%94%A5%E4%BD%93%E8%BD%AC%E5%8A%A8%E6%83%AF%E9%87%8F/</url>
      
        <content type="html"><![CDATA[<p>设圆锥体的体积为 $V$，质量为 $M$，底面半径为 $R$，高为 $H$。</p><p>体积微元</p><script type="math/tex; mode=display">\text dV=r\text dr\text dh\text d\theta</script><p>体积</p><script type="math/tex; mode=display">\begin{aligned}V =& \int_0^{2\pi}\int_0^H\int_0^{r(h)}r\text dr\text dh\text d\theta \\=& 2\pi\int_0^H\int_0^{\frac RH(H-h)}r\text dr\text dh \\=& 2\pi\int_0^H\frac 12\left(\frac RH(H-h)\right)^2\text dh \\\xlongequal[h=Hx]{x=h/H} & \pi R^2\int_0^1(1-2x+x^2)H\text dx \\=& \pi R^2H\left[x-x^2+\frac{x^3}{3}\right]_0^1 \\=& \frac 13\pi R^2H\end{aligned}</script><p>质心高度</p><script type="math/tex; mode=display">\begin{aligned}z =& \frac{\int_0^{2\pi}\int_0^{H}\int_0^{r(h)}hr\text dr\text dh\text d\theta}{\int_0^{2\pi}\int_0^{H}\int_0^{r(h)}r\text dr\text dh\text d\theta} \\=& \frac 1{\frac 13\pi R^2H}2\pi\int_0^Hh\int_0^{\frac RH(H-h)}r\text dr\text dh \\=& \frac 6{R^2H}\int_0^H\frac h2\left(\frac RH(H-h)\right)^2\text dh \\=& \frac 3H\int_0^H\frac {(H-h)^2}{H^2}h\text dh \\\xlongequal[h=Hx]{x=h/H}& \frac 3H\int_0^1(1-2x+x^2)H^2x\text dx \\=& 3H\left[\frac{x^2}2-\frac 23 x^3+\frac{x^4}4\right]_0^1 \\=& \frac H4\end{aligned}</script><p>质量微元</p><script type="math/tex; mode=display">\text dm=\rho\text dV=\frac M{\frac 13\pi R^2H}r\text dr\text dh\text d\theta</script><p>绕z轴转动惯量</p><script type="math/tex; mode=display">\begin{aligned}J_z =& \int_0^{2\pi}\int_0^H\int_0^{r(h)}r^2\text dm \\=& \frac M{\frac 13\pi R^2H}\int_0^{2\pi}\int_0^H\int_0^{r(h)}r^2r\text dr\text dh\text d\theta \\=& \frac {6M}{R^2H}\int_0^H\int_0^{\frac RH(H-h)}r^3\text dr\text dh \\=& \frac {6MR^4}{4R^2H}\int_0^H\frac{(H-h)^4}{H^4}\text dh \\\xlongequal[h=Hx]{x=h/H}& \frac {3MR^2}{2H}\int_0^1(1-x)^4H\text dx \\=& \frac {3MR^2}2(1-4\frac 12+6\frac 13-4\frac 14+1\frac 15) \\=& \frac 3{10}MR^2\end{aligned}</script><p>计算绕x轴转动惯量时，其内一点到旋转轴的距离为</p><script type="math/tex; mode=display">d(r,h,\theta)=\sqrt{(h-\frac H4)^2+r^2\cos^2\theta}</script><script type="math/tex; mode=display">\begin{aligned}J_x=& \int_0^{2\pi}\int_0^H\int_0^{r(h)}d^2(r,h,\theta)\text dm \\=& \frac M{\frac 13\pi R^2H}\int_0^{2\pi}\int_0^H\int_0^{\frac RH(H-h)}\left((h-\frac H4)^2+r^2\cos^2\theta\right)r\text dr\text dh\text d\theta \\=& \frac M{\frac 13\pi R^2H}\left(\pi R^2\int_0^H(h-\frac H4)^2\frac{(H-h)^2}{H^2}\text dh+\int_0^{2\pi}\cos^2\theta\text d\theta\int_0^H\int_0^{\frac RH(H-h)}r^3\text dr\text dh\right) \\=& \frac M{\frac 13\pi R^2H}\left(\pi R^2\int_0^1(1-x)^2(x-\frac14)^2H^3\text dx+\int_0^{2\pi}\frac{\cos 2\theta+1}{2}\text d\theta\frac{R^4}4\int_0^H\frac{(H-h)^4}{H^4}\text dh\right) \\=& \frac M{\frac 13\pi R^2H}\left(\pi R^2H^3\int_0^1(x^4-\frac 52x^3+\frac{33}{16}x^2-\frac 58x+\frac 1{16})\text dx+\frac{\pi R^4}4\int_0^1(1-x)^4H\text dx\right) \\=& \frac M{\frac 13\pi R^2H}\left(\pi R^2H^3\frac 1{80}+\frac 1{20}\pi HR^4\right) \\=& 3M\left(\frac{H^2}{80}+\frac{R^2}{20}\right)\end{aligned}</script><p>草稿纸</p><script type="math/tex; mode=display">(x^2-2x+1)(x^2-\frac12x+\frac1{16})</script><script type="math/tex; mode=display">\frac15-\frac58+\frac{11}{16}-\frac5{16}+\frac1{16}=\frac15-\frac3{16}=\frac1{80}</script>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>万有引力的几个结论证明</title>
      <link href="/2024/08/03/%E4%B8%87%E6%9C%89%E5%BC%95%E5%8A%9B%E7%9A%84%E5%87%A0%E4%B8%AA%E7%BB%93%E8%AE%BA%E8%AF%81%E6%98%8E/"/>
      <url>/2024/08/03/%E4%B8%87%E6%9C%89%E5%BC%95%E5%8A%9B%E7%9A%84%E5%87%A0%E4%B8%AA%E7%BB%93%E8%AE%BA%E8%AF%81%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<h1 id="均匀球体对球体外物体的万有引力等效于位于球心处的质点"><a href="#均匀球体对球体外物体的万有引力等效于位于球心处的质点" class="headerlink" title="均匀球体对球体外物体的万有引力等效于位于球心处的质点"></a>均匀球体对球体外物体的万有引力等效于位于球心处的质点</h1><script type="math/tex; mode=display">\begin{aligned}\cos\alpha &= \frac{D-z}{\sqrt{x^2+y^2+(D-z)^2}} \\&= \frac{D-r\cos\phi}{\sqrt{r^2\sin^2\phi\cos^2\theta +r^2\sin^2\phi\sin^2\theta+D^2-2rD\cos\phi+r^2\cos^2\phi}} \\&= \frac{D-r\cos\phi}{\sqrt{r^2+D^2-2rD\cos\phi}}\end{aligned}</script><script type="math/tex; mode=display">\begin{aligned}F &= \iiint\frac{Gm\rho\text{d}V}{x^2+y^2+(D-z)^2}\cos\alpha \\&= Gm\rho\iiint\frac{r^2\sin\phi(D-r\cos\phi)}{(r^2+D^2-2rD\cos\phi)^{\frac{3}{2}}}\text{d}V\end{aligned}</script><p>令</p><script type="math/tex; mode=display">\begin{aligned}A(\phi) &= r^2\sin\phi(D-r\cos\phi) \\B(\phi) &= r^2+D^2-2rD\cos\phi\end{aligned}</script><p>则</p><script type="math/tex; mode=display">\begin{aligned}\frac{\text{d}B(\phi)}{\text{d}\phi} &= 2rD\sin\phi \\A(\phi) &= r^2\sin\phi(D-r\cos\phi) \\&= \frac{r(D-r\cos\phi)}{2D}\frac{\text{d}B(\phi)}{\text{d}\phi} \\&= \frac{r(B(\phi)+D^2-r^2)}{4D^2}\frac{\text{d}B(\phi)}{\text{d}\phi} \\\end{aligned}</script><p>于是</p><script type="math/tex; mode=display">\begin{aligned}& \int\frac{B(\phi)+D^2-r^2}{B^{\frac{3}{2}}(\phi)}\text{d}B(\phi) \\=& -2\int(B(\phi)+D^2-r^2)\text{d}B^{-\frac{1}{2}}(\phi) \\=& -2\left[\sqrt{B(\phi)}+\frac{D^2-r^2}{\sqrt{B(\phi)}}\right] +2\int B^{-\frac{1}{2}}(\phi)\text{d}B(\phi) \\=& -2\left[\sqrt{B(\phi)}+\frac{D^2-r^2}{\sqrt{B(\phi)}}\right]+4\sqrt{B(\phi)} \\=& 2\sqrt{B(\phi)}-2\frac{D^2-r^2}{\sqrt{B(\phi)}} \\\end{aligned}</script><p>加入上下限</p><script type="math/tex; mode=display">\begin{aligned}\sqrt{B(0)} =& \sqrt{r^2+D^2-2rD}=D-r \\\sqrt{B(\pi)} =& \sqrt{r^2+D^2+2rD}=D+r \\\int_0^{\pi}\frac{B(\phi)+D^2-r^2}{B^{\frac{3}{2}}(\phi)}\text{d}B(\phi)=& 2\left[\sqrt{B(\phi)}-\frac{D^2-r^2}{\sqrt{B(\phi)}}\right]_0^{\pi} \\=& 2[(D+r)-(D-r)]-2[(D-r)-(D+r)] \\=& 8r\end{aligned}</script><p>代入$F$</p><script type="math/tex; mode=display">\begin{aligned}F =& Gm\rho\iiint\frac{r^2\sin\phi(D-r\cos\phi)}{(r^2+D^2-2rD\cos\phi)^{\frac{3}{2}}}\text{d}V \\=& Gm\rho\int_0^{2\pi}\int_0^{\pi}\int_0^{R}\frac{r^2\sin\phi(D-r\cos\phi)}{(r^2+D^2-2rD\cos\phi)^{\frac{3}{2}}}\text{d}r\text{d}\phi\text{d}\theta \\=& 2\pi Gm\rho\int_0^{\pi}\int_0^{R}\frac{r^2\sin\phi(D-r\cos\phi)}{(r^2+D^2-2rD\cos\phi)^{\frac{3}{2}}}\text{d}r\text{d}\phi \\=& 2\pi Gm\rho\int_0^{R}\int_0^{\pi}\int\frac{A(\phi)} {B^{\frac{3}{2}}(\phi)}\text{d}\phi\text{d}r \\=& 2\pi Gm\rho\int_0^{R}\int_0^{\pi}\frac{r(B(\phi)+D^2-r^2)} {4D^2B^{\frac{3}{2}}(\phi)}\text{d}B(\phi)\text{d}r \\=& \frac{\pi Gm\rho r}{2D^2}\int_0^{R}r\int_0^{\pi}\frac{B(\phi)+D^2-r^2} {B^{\frac{3}{2}}(\phi)}\text{d}B(\phi)\text{d}r \\=& \frac{\pi Gm\rho}{2D^2}\int_0^{R}8r^2\text{d}r \\=& \frac{4\pi Gm\rho}{D^2}\frac{R^3}{3} \\=& \frac{4\pi GmR^3}{3D^2}\frac{M}{\frac{4}{3}\pi R^3} \\=& \frac{GMm}{D^2}\end{aligned}</script><h1 id="均匀球壳对球壳内任意一点的万有引力合力为0"><a href="#均匀球壳对球壳内任意一点的万有引力合力为0" class="headerlink" title="均匀球壳对球壳内任意一点的万有引力合力为0"></a>均匀球壳对球壳内任意一点的万有引力合力为0</h1><p>积分</p><script type="math/tex; mode=display">\int_0^{\pi}\frac{B(\phi)+D^2-r^2}{B^{\frac{3}{2}}(\phi)}\text{d}B(\phi)</script><p>中，由于$D\le r$，所以$\sqrt{B(0)}=\sqrt{r^2+D^2-2rD}=r-D$，此时</p><script type="math/tex; mode=display">\begin{aligned}\int_0^{\pi}\frac{B(\phi)+D^2-r^2}{B^{\frac{3}{2}}(\phi)}\text{d}B(\phi)=& 2\left[\sqrt{B(\phi)}-\frac{D^2-r^2}{\sqrt{B(\phi)}}\right]_0^{\pi} \\=& 2[(D+r)-(D-r)]-2[(r-D)+(r+D)] \\=& 0\end{aligned}</script><p>代入$F$</p><script type="math/tex; mode=display">\begin{aligned}F =& Gm\rho\int_0^{2\pi}\int_0^{\pi}\int_{R_1}^{R_2}\frac{r^2\sin\phi(D-r\cos\phi)}{(r^2+D^2-2rD\cos\phi)^{\frac{3}{2}}}\text{d}r\text{d}\phi\text{d}\theta \\=& \frac{\pi Gm\rho r}{2D^2}\int_{R_1}^{R_2}r\int_0^{\pi}\frac{B(\phi)+D^2-r^2} {B^{\frac{3}{2}}(\phi)}\text{d}B(\phi)\text{d}r \\=& 0\end{aligned}</script>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>四元数、欧拉角、旋转矩阵笔记</title>
      <link href="/2024/08/03/%E5%9B%9B%E5%85%83%E6%95%B0%E3%80%81%E6%AC%A7%E6%8B%89%E8%A7%92%E3%80%81%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E7%AC%94%E8%AE%B0/"/>
      <url>/2024/08/03/%E5%9B%9B%E5%85%83%E6%95%B0%E3%80%81%E6%AC%A7%E6%8B%89%E8%A7%92%E3%80%81%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="四元数"><a href="#四元数" class="headerlink" title="四元数"></a>四元数</h1><p>单位四元数</p><script type="math/tex; mode=display">\begin{aligned}& Q=\left[\cos\frac\phi 2,i\sin\frac\phi 2,j\sin\frac\phi 2,k\sin\frac\phi 2\right] \\\end{aligned}</script><p>四元数性质</p><script type="math/tex; mode=display">\begin{aligned}& q_aq_b=[s_a,\vec{a}][s_b,\vec{b}]=[s_as_b-\vec{a}\cdot\vec{b}, s_a\vec{b} + s_b\vec{a} + \vec{a}\times\vec{b}] \\& q^{-1} = \frac{q^*}{|q|^2}\end{aligned}</script><p>任意向量 $\vec{v}$ 沿着以单位向量定义的旋转轴 $\vec{u}$ 旋转 $\theta$ 度之后的 $\vec{v}’$ 可以使用四元数乘法来获得。令 $q_v=[0,\vec{v}]$，$q=[\cos\frac{\theta}{2},\sin\frac{\theta}{2}\vec{u}]$，那么</p><script type="math/tex; mode=display">\vec{v}'=qq_vq^*</script><h2 id="四元数微分方程"><a href="#四元数微分方程" class="headerlink" title="四元数微分方程"></a>四元数微分方程</h2><script type="math/tex; mode=display">\begin{aligned}\begin{bmatrix}\dot{q}_0 \\ \dot{q}_1 \\ \dot{q}_2 \\ \dot{q}_3 \\\end{bmatrix}=& \frac{1}{2}\begin{bmatrix}0 & -\omega_x & -\omega_y & -\omega_z \\\omega_x & 0 & -\omega_z & \omega_y \\\omega_y & -\omega_z & 0 & -\omega_x \\\omega_z & \omega_y & -\omega_x & 0\end{bmatrix}\begin{bmatrix}q_0 \\ q_1 \\ q_2 \\ q_3\end{bmatrix} \\=& \frac{1}{2}\begin{bmatrix}q_{0} & -q_{1} & -q_{2} & -q_{3} \\q_{1} & q_{0} & q_{3} & -q_{2} \\q_{2} & -q_{3} & q_{0} & q_{1} \\q_{3} & q_{2} & -q_{1} & q_{0}\end{bmatrix}\begin{bmatrix}0 \\ \omega_{x} \\ \omega_{y} \\ \omega_{z}\end{bmatrix}\end{aligned}</script><h1 id="旋转矩阵"><a href="#旋转矩阵" class="headerlink" title="旋转矩阵"></a>旋转矩阵</h1><p>横滚角 $\phi$ 绕x轴旋转，向左横滚为正</p><script type="math/tex; mode=display">R_x=\begin{bmatrix}    1 & 0 & 0 \\    0 & \cos\phi & -\sin\phi \\    0 & \sin\phi & \cos\phi\end{bmatrix}</script><p>俯仰角 $\theta$ 绕y轴旋转，抬头为正</p><script type="math/tex; mode=display">R_y=\begin{bmatrix}    \cos\theta & 0 & \sin\theta \\    0 & 1 & 0 \\    -\sin\theta & 0 & \cos\theta \\\end{bmatrix}</script><p>偏航角 $\psi$ 绕z轴旋转，向左偏航为正</p><script type="math/tex; mode=display">R_z=\begin{bmatrix}    \cos\psi & -\sin\psi & 0 \\    \sin\psi & \cos\psi & 0 \\    0 & 0 & 1\end{bmatrix}</script><p>由罗德里格斯公式</p><script type="math/tex; mode=display">R=\cos\theta I+(1-\cos\theta)\vec{n}\vec{n}^{\text{T}}+\sin\theta\vec{n}^{\wedge}</script><p>可以将旋转矩阵和轴角互相转换，有了轴角即可转换成四元数。<br>由旋转矩阵转换成轴角的公式为</p><script type="math/tex; mode=display">\theta=\pm\arccos(\frac{\text{tr}(\mathbf{R})-1}{2})</script><p>由于$\boldsymbol{n}$为旋转轴且满足</p><script type="math/tex; mode=display">\mathbf{R}\boldsymbol{n}=\boldsymbol{n}</script><p>所以 $\boldsymbol{n}$ 为旋转矩阵 $\mathbf{R}$ 的特征值为1对应的模长为1的特征向量。</p><h1 id="欧拉角"><a href="#欧拉角" class="headerlink" title="欧拉角"></a>欧拉角</h1><p>&emsp;&emsp;统一按照本体系zyx轴的旋转顺序，先绕z轴偏航，再绕y轴俯仰，最后绕x轴横滚。本体系x轴朝后为横滚轴，向左横滚为正；y轴朝右为俯仰轴，抬头为正；z轴朝上为偏航轴，向左偏航为正。旋转后横滚俯仰偏航三个角度的定义见后文<code>四元数、旋转矩阵转欧拉角</code>一节。</p><h1 id="四元数转旋转矩阵"><a href="#四元数转旋转矩阵" class="headerlink" title="四元数转旋转矩阵"></a>四元数转旋转矩阵</h1><script type="math/tex; mode=display">\begin{aligned}R =& \begin{bmatrix}1-2q_2^2-2q_3^2 & 2q_1q_2-2q_0q_3 & 2q_1q_3+2q_0q_2 \\2q_1q_2+2q_0q_3 & 1-2q_1^2-2q_3^2 & 2q_2q_3-2q_0q_1 \\2q_1q_3-2q_0q_2 & 2q_2q_3+2q_0q_1 & 1-2q_1^2-2q_2^2\end{bmatrix} \\=& \begin{bmatrix}q_0^2+q_1^2-q_2^2-q_3^2 & 2q_1q_2-2q_0q_3 & 2q_1q_3+2q_0q_2 \\2q_1q_2+2q_0q_3 & q_0^2-q_1^2+q_2^2-q_3^2 & 2q_2q_3-2q_0q_1 \\2q_1q_3-2q_0q_2 & 2q_2q_3+2q_0q_1 & q_0^2-q_1^2-q_2^2+q_3^2\end{bmatrix} \\=& (q_0^2-q_v^\text{T}q_v)I+2q_vq_v^\text{T}+2q_0q_v^{\wedge} \\=& (q_0^2-q_1^2-q_2^2-q_3^2)I+2\begin{bmatrix}q_1^2 & q_1q_2 & q_1q_3 \\ q_1q_2 & q_2^2 & q_2q_3 \\ q_1q_3 & q_2q_3 & q_3^2 \\\end{bmatrix}+2q_0\begin{bmatrix}0 & -q_3 & q_2 \\ q_1 & 0 & -q_1 \\ -q_2 & q_3 & 0 \\\end{bmatrix}\end{aligned}</script><p><a href="http://q_0q_0q_0.songho.ca/opengl/gl_quaternion.html">Quaternion to Rotation Matriq_1 -OpenGL</a></p><h1 id="旋转矩阵转四元数"><a href="#旋转矩阵转四元数" class="headerlink" title="旋转矩阵转四元数"></a>旋转矩阵转四元数</h1><p><a href="https://math.stackexchange.com/questions/893984/conversion-of-rotation-matrix-to-quaternion">Conversion of rotation matrix to quaternion -stackexchange</a><br><a href="https://d3cw3dd2w32x2b.cloudfront.net/wp-content/uploads/2015/01/matrix-to-quat.pdf">Converting a Rotation Matrix to a Quaternion -stackexchange</a><br><a href="https://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/">Maths - Conversion Matrix to Quaternion -EuclideanSpace</a></p><p>旋转矩阵与四元数的各个元素间有如下关系</p><script type="math/tex; mode=display">1+r_{11}-r_{22}-r_{33}=4x^2 \\1-r_{11}+r_{22}-r_{33}=4y^2 \\1-r_{11}-r_{22}+r_{33}=4z^2 \\r_{12}+r_{21}=4xy \\r_{13}+r_{31}=4xz \\r_{23}+r_{32}=4yz \\r_{21}-r_{12}=4wz \\r_{13}-r_{31}=4wy \\r_{32}-r_{23}=4wx \\</script><p>已知旋转矩阵求四元数，上面方程组可以等价写为已知 $a_1$ 到 $a_9$ 求 $x,y,z,w$：</p><script type="math/tex; mode=display">4x^2=a_1 \\4y^2=a_2 \\4z^2=a_3 \\4xy=a_4 \\4xz=a_5 \\4yz=a_6 \\4wz=a_7 \\4wy=a_8 \\4wx=a_9 \\</script><p>这9个方程中，等式左边包含 $4x,4y,4z,4w$ 项的方程分别有4,4,4,3个，等式两侧同时除以共同项后即可剩下 $x,y,z,w$ 项，而共同项 $4x,4y,4z$ 的计算方法为</p><script type="math/tex; mode=display">4x=\pm 2\sqrt{4x^2}</script><p>例如，</p><script type="math/tex; mode=display">x=\frac{a_1}{4x}=\frac{a_1}{\pm 2\sqrt{4x^2}}=\frac{a_1}{\pm 2\sqrt{a_1}} \\y=\frac{a_4}{4x}=\frac{a_4}{\pm 2\sqrt{4x^2}}=\frac{a_4}{\pm 2\sqrt{a_1}} \\z=\frac{a_5}{4x}=\frac{a_5}{\pm 2\sqrt{4x^2}}=\frac{a_5}{\pm 2\sqrt{a_1}} \\w=\frac{a_9}{4x}=\frac{a_9}{\pm 2\sqrt{4x^2}}=\frac{a_9}{\pm 2\sqrt{a_1}} \\</script><p>这个例子以共同项 $4x$ 或 $a_1$ 为分母，但有时候分母可能为0，所以需要根据实际情况分别以4个共同项为分母。共同项 $4y$、$4z$ 与 $4x$ 类似，而 $4w$ 的计算方法为，将前3式相加得到</p><script type="math/tex; mode=display">3-r_{11}-r_{22}-r_{33}=4(1-w^2) \\4w^2=1+r_{11}+r_{22}+r_{33} \\4w=\pm 2\sqrt{4w^2}</script><p>实际中有一些比较常用的特殊情况。例如，四元数</p><script type="math/tex; mode=display">Q_1=[0, 1, 0, 0] \\Q_2=[0, 0, 1, 0] \\Q_3=[0, 0, 0, 1] \\</script><p>对应的旋转矩阵分别为</p><script type="math/tex; mode=display">\begin{bmatrix} 1 & 0 & 0  \\ 0 & -1 & 0 \\ 0 & 0 & -1 \end{bmatrix}\begin{bmatrix} -1 & 0 & 0 \\ 0 & 1 & 0  \\ 0 & 0 & -1 \end{bmatrix}\begin{bmatrix} -1 & 0 & 0 \\ 0 & -1 & 0 \\ 0 & 0 & 1  \end{bmatrix}</script><p>四元数</p><script type="math/tex; mode=display">[0.5, 0.5, 0.5, 0.5] \\[0.5, -0.5, 0.5, 0.5] \\[0.5, 0.5, -0.5, 0.5] \\[0.5, 0.5, 0.5, -0.5] \\</script><script type="math/tex; mode=display">[-0.5, 0.5, 0.5, 0.5] \\[-0.5, -0.5, 0.5, 0.5] \\[-0.5, 0.5, -0.5, 0.5] \\</script><p>对应的旋转矩阵分别为</p><script type="math/tex; mode=display">\begin{bmatrix} 0 & 0 & 1  \\ 1 & 0 & 0  \\ 0 & 1 & 0  \end{bmatrix}\begin{bmatrix} 0 & -1 & 0 \\ 0 & 0 & 1  \\ -1 & 0 & 0 \end{bmatrix}\begin{bmatrix} 0 & -1 & 0 \\ 0 & 0 & -1 \\ 1 & 0 & 0  \end{bmatrix}\begin{bmatrix} 0 & 1 & 0  \\ 0 & 0 & -1 \\ -1 & 0 & 0 \end{bmatrix} \\\begin{bmatrix} 0 & 1 & 0  \\ 0 & 0 & 1  \\ 1 & 0 & 0  \end{bmatrix}\begin{bmatrix} 0 & 0 & -1 \\ -1 & 0 & 0 \\ 0 & 1 & 0  \end{bmatrix}\begin{bmatrix} 0 & 0 & 1  \\ -1 & 0 & 0 \\ 0 & -1 & 0 \end{bmatrix}</script><h1 id="欧拉角转旋转矩阵"><a href="#欧拉角转旋转矩阵" class="headerlink" title="欧拉角转旋转矩阵"></a>欧拉角转旋转矩阵</h1><p><a href="https://en.wikipedia.org/wiki/Euler_angles">https://en.wikipedia.org/wiki/Euler_angles</a></p><script type="math/tex; mode=display">\begin{aligned}& \begin{bmatrix}    \cos\psi & -\sin\psi & 0 \\    \sin\psi & \cos\psi & 0 \\    0 & 0 & 1\end{bmatrix}\begin{bmatrix}    \cos\theta & 0 & \sin\theta \\    0 & 1 & 0 \\    -\sin\theta & 0 & \cos\theta \\\end{bmatrix}\begin{bmatrix}    1 & 0 & 0 \\    0 & \cos\phi & -\sin\phi \\    0 & \sin\phi & \cos\phi\end{bmatrix} \\=& \begin{bmatrix}    c_1c_2 & -s_1 & c_1s_2 \\    s_1c_2 & c_1 & s_1s_2 \\    -s_2 & 0 & c_2\end{bmatrix}\begin{bmatrix}    1 & 0 & 0 \\    0 & c_3 & -s_3 \\    0 & s_3 & c_3\end{bmatrix} \\=& \begin{bmatrix}    c_1c_2 & c_1s_2s_3-s_1c_3 & c_1s_2 \\    s_1c_2 & s_1s_2s_3+c_1c_3 & s_1s_2 \\    -s_2 & c_2s_3 & c_2\end{bmatrix}\end{aligned}</script><h1 id="四元数、旋转矩阵转欧拉角"><a href="#四元数、旋转矩阵转欧拉角" class="headerlink" title="四元数、旋转矩阵转欧拉角"></a>四元数、旋转矩阵转欧拉角</h1><p>航模飞控上用的四元数转欧拉角代码如下<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rol=<span class="built_in">atan2</span>(<span class="number">2</span>*(q0*q1+q2*q3),<span class="number">1</span><span class="number">-2</span>*(q1*q1+q2*q2));</span><br><span class="line">pit=<span class="built_in">asin</span>(<span class="number">2</span>*(q0*q2-q1*q3));</span><br><span class="line">yaw=<span class="built_in">atan2</span>(<span class="number">2</span>*(q0*q3+q1*q2),<span class="number">1</span><span class="number">-2</span>*(q2*q2+q3*q3));</span><br></pre></td></tr></table></figure><br>四元数转旋转矩阵代码<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Mat <span class="title">matqr</span><span class="params">(<span class="number">3</span>, <span class="number">3</span>, vecdble&#123;</span></span></span><br><span class="line"><span class="params"><span class="function">    q0*q0+q1*q1-q2*q2-q3*q3, <span class="number">2</span>*q1*q2<span class="number">-2</span>*q0*q3, <span class="number">2</span>*q1*q3<span class="number">+2</span>*q0*q2,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="number">2</span>*q1*q2<span class="number">+2</span>*q0*q3, q0*q0-q1*q1+q2*q2-q3*q3, <span class="number">2</span>*q2*q3<span class="number">-2</span>*q0*q1,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="number">2</span>*q1*q3<span class="number">-2</span>*q0*q2, <span class="number">2</span>*q2*q3<span class="number">+2</span>*q0*q1, q0*q0-q1*q1-q2*q2+q3*q3,</span></span></span><br><span class="line"><span class="params"><span class="function">&#125;)</span></span>;</span><br></pre></td></tr></table></figure><br>对应得到旋转矩阵转欧拉角<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rol=<span class="built_in">atan2</span>(r23, r33);</span><br><span class="line">pit=<span class="built_in">asin</span>(-r31);</span><br><span class="line">yaw=<span class="built_in">atan2</span>(r21, r11);</span><br></pre></td></tr></table></figure><br>二值反正切函数为<code>atan2(y,x)</code>，横滚角的二值反正切函数中的y、x值分别为本体系y坐标轴和z坐标轴在世界系的z坐标(r23, r33)，俯仰角为0时也可以理解成世界系z轴在本体系YOZ平面上的投影与z轴的夹角（但俯仰角不为0时不能这样等价）。偏航角的二值反正切函数中的y、x值分别为本体系x轴在世界系的y坐标和x坐标(r21, r11)，可以理解成本体系x轴在世界系XOY平面上的投影与世界系x轴的夹角。俯仰角为本体系x轴与世界系XOY平面的距离，因为x轴朝向本体后方，所以取负号，表示抬头为正。</p><h1 id="欧拉角速度"><a href="#欧拉角速度" class="headerlink" title="欧拉角速度"></a>欧拉角速度</h1><p><a href="https://blog.csdn.net/a735148617/article/details/116740453">欧拉角速度与角速度的关系推导 -CSDN博客</a><br><a href="https://physics.stackexchange.com/questions/73961/angular-velocity-expressed-via-euler-angles">Angular Velocity expressed via Euler Angles -Physics Stack Exchange</a>  </p><p>assume that $x=x(t),y=y(t)$, then let $z=\text e^x\sin y$, how to use sympy to calculate the total differentiation of $z$, i.e. $\sin y+\text e^x\cos y$?</p><p>角速度 $\vec\omega$ 是表示在惯性坐标系的，可分解为</p><script type="math/tex; mode=display">\vec\omega=\omega_x\vec i+\omega_y\vec j+\omega_z\vec k</script><p>同时，又可以将它分解到刚体固连坐标系三次旋转的转轴上：</p><script type="math/tex; mode=display">\vec\omega=\text{d}\phi\vec e_x+\text{d}\theta\vec e_y+\text{d}\psi\vec e_z</script><p>首先绕 $z$ 轴旋转</p><script type="math/tex; mode=display">\text{d}\psi e_z=\begin{bmatrix}1 & 0 & 0 \\0 & 1 & 0 \\0 & 0 & 1\end{bmatrix}\begin{bmatrix}0 \\ 0 \\ \text{d}\psi\end{bmatrix}</script><p>其次绕 $y$ 轴旋转</p><script type="math/tex; mode=display">\text{d}\theta e_y=\begin{bmatrix}    \cos\psi & -\sin\psi & 0 \\    \sin\psi & \cos\psi & 0 \\    0 & 0 & 1\end{bmatrix}\begin{bmatrix}0 \\ \text{d}\theta \\ 0\end{bmatrix}</script><p>最后绕 $x$ 轴旋转</p><script type="math/tex; mode=display">\text{d}\phi e_x=\begin{bmatrix}    \cos\psi & -\sin\psi & 0 \\    \sin\psi & \cos\psi & 0 \\    0 & 0 & 1\end{bmatrix}\begin{bmatrix}    \cos\theta & 0 & \sin\theta \\    0 & 1 & 0 \\    -\sin\theta & 0 & \cos\theta \\\end{bmatrix}\begin{bmatrix}\text{d}\phi \\ 0 \\ 0\end{bmatrix}</script><p>将三者相加，就可得到角速度与欧拉角速度的关系</p><script type="math/tex; mode=display">\begin{aligned}\vec\omega =& R_zR_y\text{d}\vec\phi+R_z\text{d}\vec\theta+\text{d}\vec\psi \\=& I(\text{d}\vec\psi+R_z(\text{d}\vec\theta+R_y\text{d}\vec\phi)) \\% =& R_x(\text{d}\vec\phi+R_y(\text{d}\vec\theta+R_z\text{d}\vec\psi)) \\=& \begin{bmatrix}    \cos\psi\cos\theta\text{d}\phi \\    \sin\psi\cos\theta\text{d}\phi \\    -\sin\theta\text{d}\phi \\\end{bmatrix}+\begin{bmatrix}    -\sin\psi\text{d}\theta \\    \cos\psi\text{d}\theta \\    0 \\\end{bmatrix}+\begin{bmatrix}0 \\ 0 \\ \text{d}\psi\end{bmatrix} \\=& \begin{bmatrix}    \cos\psi\cos\theta & -\sin\psi & 0 \\    \sin\psi\cos\theta & \cos\psi & 0 \\    -\sin\theta & 0 & 1 \\\end{bmatrix}\begin{bmatrix}\text{d}\phi \\ \text{d}\theta \\ \text{d}\psi\end{bmatrix} \\\end{aligned}</script><p>反过来得到</p><script type="math/tex; mode=display">\begin{aligned}\begin{bmatrix}\text{d}\phi \\ \text{d}\theta \\ \text{d}\psi\end{bmatrix} = \begin{bmatrix}    \cos\psi/\cos\theta & -\sin\psi/\cos\theta & 0 \\    \sin\psi & \cos\psi & 0 \\    -cos\psi\tan\theta & \sin\psi\tan\theta & 1 \\\end{bmatrix}\vec\omega\end{aligned}</script><h1 id="罗德里格斯参数"><a href="#罗德里格斯参数" class="headerlink" title="罗德里格斯参数"></a>罗德里格斯参数</h1><script type="math/tex; mode=display">g=\frac{1}{q_w}\begin{bmatrix}    q_x \\ q_y \\ q_z\end{bmatrix}=e\tan\frac{\Phi}{2}</script><h1 id="xyz固定角和zyx欧拉角相等的直观理解"><a href="#xyz固定角和zyx欧拉角相等的直观理解" class="headerlink" title="xyz固定角和zyx欧拉角相等的直观理解"></a>xyz固定角和zyx欧拉角相等的直观理解</h1><p>&emsp;&emsp;xyz固定角指所有的旋转均在世界坐标系下，刚体先后绕世界坐标系的xyz轴旋转，设旋转前的向量为 $\vec{v}$ (为了便于理解，可以想象 $\vec{v}=(1,0,0)^T$)，则旋转后的向量为</p><script type="math/tex; mode=display">\vec{v}_1=R_zR_yR_x\vec{v}</script><p>&emsp;&emsp;zyx欧拉角指3次旋转均为绕与刚体固连的坐标系的轴旋转，顺序为zyx。旋转前刚体坐标系与世界坐标系重合，绕刚体坐标系z轴旋转一次后的向量在世界坐标系下的坐标为 $R_z\vec{v}$。一直在动的刚体坐标系称为刚体系，刚体系在绕z轴旋转一次后的坐标系称为”刚1系”。此时再绕刚体系(刚1系)y轴旋转，旋转后的坐标在刚体系中仍为 $\vec{v}$，在刚1系中的坐标为 $R_y\vec{v}$。此时注意对向量乘一个矩阵的另一个作用，即将向量从一个坐标系变换到另一个坐标系，刚1系下的任意坐标 $\vec{x}$ 在世界系下的坐标为 $R_z\vec{x}$，所以现在旋转了两次的向量 $\vec{v}$ 在刚1系中的坐标为 $R_y\vec{v}$，在世界系中的坐标就是 $R_zR_y\vec{v}$。<br>&emsp;&emsp;同理，再旋转最后一次后，向量 $\vec{v}$ 在刚体系的坐标仍然为 $\vec{v}$，在刚2系中的坐标为 $R_x\vec{v}$，刚2系的任意坐标 $\vec{x}$ 在刚1系下的坐标为 $R_y\vec{x}$ 所以向量 $\vec{v}$ 在刚2系中的坐标为 $R_x\vec{v}$，在刚1系中的坐标为 $R_yR_x\vec{v}$，在世界系中的坐标为 $R_zR_yR_x\vec{v}$，与xyz固定角相同。</p><ul><li>John J. Craig. 机器人学导论.<h1 id="其他参考"><a href="#其他参考" class="headerlink" title="其他参考"></a>其他参考</h1></li><li><a href="https://www.qiujiawei.com/understanding-quaternions/">理解四元数 -Wyman的原创技术博客</a></li><li><a href="https://www.3dgep.com/understanding-quaternions/">Understanding Quaternions -3D Game Engine Programming</a></li><li><a href="https://blog.csdn.net/waihekor/article/details/103297840">四元数微分方程的推导和代码实现 -CSDN博客</a></li><li><a href="https://zhuanlan.zhihu.com/p/27471300">四元数——基本概念 -知乎</a></li><li><a href="https://www.zhihu.com/question/23005815/answer/483589712">如何形象地理解四元数？ -知乎</a></li><li><a href="https://krasjet.github.io/quaternion/quaternion.pdf">四元数与三维旋转 -知乎</a></li><li><a href="https://graphics.stanford.edu/courses/cs348a-17-winter/Papers/quaternion.pdf">Quaternions and Rotations (PDF) -stanford</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>QR分解求矩阵特征值</title>
      <link href="/2024/08/03/QR%E5%88%86%E8%A7%A3%E6%B1%82%E7%9F%A9%E9%98%B5%E7%89%B9%E5%BE%81%E5%80%BC/"/>
      <url>/2024/08/03/QR%E5%88%86%E8%A7%A3%E6%B1%82%E7%9F%A9%E9%98%B5%E7%89%B9%E5%BE%81%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<h1 id="豪斯霍尔德变换"><a href="#豪斯霍尔德变换" class="headerlink" title="豪斯霍尔德变换"></a>豪斯霍尔德变换</h1><p>&emsp;&emsp;豪斯霍尔德(Householder)变换又称作镜像变换，作用是将任何非零向量$x$变换成另一个向量$y$，且两个向量关于某个平面镜像对称。变换矩阵</p><script type="math/tex; mode=display">H=I-\omega\omega^\text{T}</script><p>称为豪斯霍尔德矩阵，即$Hx=y$，满足</p><script type="math/tex; mode=display">H^\text{T}=H^{-1}=H,\ H^\text{T}H=I</script><p>其中$\omega$是对称平面的单位法向量，从图中可直观看出$x-y=2\omega(\omega^\text{T}x)$。<br>&emsp;&emsp;因为任何两个长度相等的向量肯定关于一个平面对称，所以可以把任何向量镜像到任何位置，现在要做的是将向量镜像到x轴上，对应的镜像矩阵为</p><script type="math/tex; mode=display">H=I-\rho^{-1}uu^\text{T}</script><p>令$\sigma=\pm||x||_2$即向量$\vec{x}$的长度，则矩阵$H$可以将向量$\vec{x}$变换到x轴上，用$-\sigma\vec{e}_1$表示，如右图所示。$\vec{e}_1$表示x轴上的单位向量。此时$\vec{u}=\vec{x}+\sigma\vec{e}_1$为两个镜像向量的差，$\rho=0.5||u||_2^2=\sigma(\sigma+\alpha_1)$，$\alpha_1$是$\vec{x}$的第一个元素，$\sigma+\alpha_1$是$\vec{u}$的第一个元素。</p><h1 id="海森堡矩阵"><a href="#海森堡矩阵" class="headerlink" title="海森堡矩阵"></a>海森堡矩阵</h1><script type="math/tex; mode=display">\left[\begin{matrix}x & x & x & x \\x & x & x & x \\0 & x & x & x \\0 & 0 & x & x \\\end{matrix}\right]</script><p>&emsp;&emsp;形如上面的矩阵称为海森堡(Hessenberg)矩阵，也就是上三角阵下面再多一排斜对角的元素，也称作拟上三角阵。左下角为0的称为上海森堡阵，右上角为0的称为下海森堡阵。<br>&emsp;&emsp;任何实的$n$阶方阵$A$可通过镜像变换化为上海森堡阵，变换思路是，每一步把矩阵$A$的每一列的下半部分清零。<br>&emsp;&emsp;豪斯霍尔德矩阵在具体的迭代中可用于简化迭代所需的矩阵乘法。左乘H矩阵：</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>任务切换的轨迹规划问题</title>
      <link href="/2024/08/03/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2%E7%9A%84%E8%BD%A8%E8%BF%B9%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98/"/>
      <url>/2024/08/03/%E4%BB%BB%E5%8A%A1%E5%88%87%E6%8D%A2%E7%9A%84%E8%BD%A8%E8%BF%B9%E8%A7%84%E5%88%92%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p><strong>摘要</strong> </p><script type="math/tex; mode=display">\vec r(t)=\sqrt{x^2(t)+y^2(t)}</script><script type="math/tex; mode=display">\begin{aligned}\dot \\\end{aligned}</script><h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>有4个坐标点，分别位于 $(0,0),(1,0),(1,1),(0,1)$，现在需要为一个质点设计运动规划方法，使该质点依次穿过这4个坐标点，同时要求最大速度不超过5，最大加速度不超过1，也就是设计质点的运动参数方程 $x(t)$ 和 $y(t)$，使 $\vec r(t)=\sqrt{x^2(t)+y^2(t)}$ 满足<br>&lt;!—</p><script type="math/tex; mode=display">|\dot{\vec r}(t)|=\left|\frac{x\dot x+y\dot{y}}{\sqrt{x^2+y^2}}\right| \leq 5</script><p>—&gt;</p><script type="math/tex; mode=display">|\vec v(t)|=|\dot{\vec r}(t)|=\left|\sqrt{\dot x^2+\dot y^2}\right| \leq 5</script><script type="math/tex; mode=display">|\vec a(t)|=|\ddot{\vec r}(t)|=\left|\sqrt{\ddot x^2+\ddot y^2}\right| \leq 1</script><p>并且当 $t=t_1,t_2,t_f$ 时分别满足</p><script type="math/tex; mode=display">\begin{aligned}& x(t_1),y(t_1)=(1,0) \\& x(t_2),y(t_2)=(1,1) \\& x(t_f),y(t_f)=(0,1) \\\end{aligned}</script><p>另外也可以约束在起点 $(0,0)$ 处和终点 $(0,1)$ 处的速度为0。下图所示为两种可能的质点运动轨迹<br><img src="https://img-blog.csdnimg.cn/direct/91ddd9dacebc46609839f7a366259d0e.png" alt="在这里插入图片描述"><br>可以看出，第三个点(1,1)的位置会影响前两个点之间的路线和移动时间。</p><h1 id="求解思路"><a href="#求解思路" class="headerlink" title="求解思路"></a>求解思路</h1><p>&emsp;&emsp;正确的方法应该是最优控制，但除了末端状态固定末端时刻自由的条件以外，还有很多中间点的约束，不知道能不能使用变分法求解。<br>&emsp;&emsp;机械臂路径规划使用的方法是使用3次多项式并用智能优化算法计算多项式系数，但智能优化算法速度较慢。</p><h1 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h1><p>用下面的问题去问各种大语言模型，一般会得到两种方法。<br><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">there are 4 positions(points) on a plane, located at (0,0),(1,0),(1,1),(0,1) respectively, the question is design a route which start from (0,0) and end at (1,0), and go throuth (0,0),(1,0),(1,1),(0,1) in order, the constraints are as follows: the route line must be differentiable, a point moving on the line also has a limitted speed and accelerate, for example, the length of its speed vector satisfies</span><br><span class="line">$$|\dot&#123;r&#125;(t)|=|\vec v(t)|=\sqrt&#123;v<span class="emphasis">_x^2(t)+v_</span>y^2(t)&#125;\leq 5$$</span><br><span class="line">and the length of its acceleration vector satisfies</span><br><span class="line">$$|\ddot&#123;r&#125;(t)|=|\vec a(t)|=\sqrt&#123;a<span class="emphasis">_x^2(t)+a_</span>y^2(t)&#125;\leq 1$$</span><br><span class="line">how to design the route function $r(t)$ ?</span><br></pre></td></tr></table></figure><br>&emsp;&emsp;chatGPT给出的方法是贝塞尔曲线，但贝塞尔曲线无法满足最大速度和最大加速度的约束。新必应给出的样条函数的问题是只能处理单射的函数的情况，但上面图中从点 $(1,0)$ 到点 $(1,1)$ 就不是函数。所以在问题中使用参数方程 $x(t)$ 和 $y(t)$ 而不是单一的函数。其他大语言模型几乎给不出有价值的回答。<br>&emsp;&emsp;有一篇论文认为可以转化为凸二次规划问题用matlab求解，但没给出任何细节。</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>几个数学问题记录</title>
      <link href="/2024/08/03/%E5%87%A0%E4%B8%AA%E6%95%B0%E5%AD%A6%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/"/>
      <url>/2024/08/03/%E5%87%A0%E4%B8%AA%E6%95%B0%E5%AD%A6%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="飞蛾扑火问题"><a href="#飞蛾扑火问题" class="headerlink" title="飞蛾扑火问题"></a>飞蛾扑火问题</h1><script type="math/tex; mode=display">\begin{aligned}& dr=-rd\theta\sin(\frac{\pi}{2}-\alpha) \\& r=e^{-\theta\cos\alpha} \\\end{aligned}</script><h1 id="最速降线"><a href="#最速降线" class="headerlink" title="最速降线"></a>最速降线</h1><script type="math/tex; mode=display">\begin{aligned}& T=\int_{t_1}^{t_2}\frac{\text{d}s}{v}=\int_{x_1}^{x_2}\frac{\sqrt{1+y'^2}}{\sqrt{2gy}}\text{d}x \\& f(y,y')=\frac{\sqrt{1+y'^2}}{\sqrt{2gy}} \\& y(1+y'^2)=C \\&     \text{d}x=\sqrt{\frac{y}{2a-y}}\text{d}y    \xlongequal{y=a-az}-a\sqrt{\frac{1-z}{1+z}}\text{d}z    \xlongequal{z=\cos\theta}2a\sin^2\frac{\theta}{2}\text{d}\theta \\    x&=a(\theta-\sin\theta) \\    y&=a(1-\cos\theta)\end{aligned}</script><h1 id="悬链线"><a href="#悬链线" class="headerlink" title="悬链线"></a>悬链线</h1><h2 id="微分法"><a href="#微分法" class="headerlink" title="微分法"></a>微分法</h2><script type="math/tex; mode=display">\begin{aligned}& T\sin\theta=\rho gs,T\cos\theta=H \\& y'=\frac{1}{a}\int_0^x\sqrt{1+y'^2}\text{d}x \\& \frac{\text{d}p}{\text{d}x}=\frac{1}{a}\sqrt{1+p^2} \\& y=\frac{a}{2}(\text{e}^{\frac{x}{a}}+\text{e}^{-\frac{x}{a}}) \\\end{aligned}</script><h2 id="变分法"><a href="#变分法" class="headerlink" title="变分法"></a>变分法</h2><p><a href="https://zhuanlan.zhihu.com/p/148762023">续浅谈变分原理：运动常数、拉格朗日乘子法</a></p><h1 id="相同周长时圆的面积最大"><a href="#相同周长时圆的面积最大" class="headerlink" title="相同周长时圆的面积最大"></a>相同周长时圆的面积最大</h1><p>设从$(-r,0)$点到$(r,0)$点的曲线函数为$y(x)$，曲线长度为$L$，即在</p><script type="math/tex; mode=display">\int_{-r}^r\sqrt{1+y'^2}\text{d}x=L</script><p>的约束条件下，求</p><script type="math/tex; mode=display">J=\int_{-r}^ry\text{d}x</script><p>的最大值。<br>设</p><script type="math/tex; mode=display">z(x)=\int_{-r}^x\sqrt{1+y'^2}\text{d}x</script><p>则</p><script type="math/tex; mode=display">z'(x)=\sqrt{1+y'^2}</script><p>拉格朗日乘子法取</p><script type="math/tex; mode=display">H=y+\lambda(z'^2-y'^2-1)</script><p>则</p><script type="math/tex; mode=display">\begin{aligned}& \frac{\partial H}{\partial y}-\frac{\text{d}}{\text{d}x}\frac{\partial H}{\partial y'}=0 \\& 1=-2(\lambda y')' \\& \lambda y'=ax \\& \frac{\partial H}{\partial z}-\frac{\text{d}}{\text{d}x}\frac{\partial H}{\partial z'}=0 \\& \lambda z'=b \\& \frac{b^2}{\lambda^2}=\frac{a^2x^2}{\lambda^2}+1 \\& y'=\pm\frac{ax}{\sqrt{b^2-a^2x^2}} \\& y=\sqrt{\frac{b^2}{a^2}-x^2} \\\end{aligned}</script><p>代入$y(-r)=y(r)=0$得$y=\sqrt{r^2-x^2}$。</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>带遗忘因子的递推最小二乘法推导</title>
      <link href="/2024/08/03/%E5%B8%A6%E9%81%97%E5%BF%98%E5%9B%A0%E5%AD%90%E7%9A%84%E9%80%92%E6%8E%A8%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98%E6%B3%95%E6%8E%A8%E5%AF%BC/"/>
      <url>/2024/08/03/%E5%B8%A6%E9%81%97%E5%BF%98%E5%9B%A0%E5%AD%90%E7%9A%84%E9%80%92%E6%8E%A8%E6%9C%80%E5%B0%8F%E4%BA%8C%E4%B9%98%E6%B3%95%E6%8E%A8%E5%AF%BC/</url>
      
        <content type="html"><![CDATA[<p><strong>摘要：</strong> 首先，已知最小二乘法的解后，推导出解的递推形式；然后通过一个简单的公式y=x+w的形式引入遗忘因子，并改写成递推形式，最后将遗忘因子引入带递推的最小二乘法中。</p><h1 id="递推最小二乘法"><a href="#递推最小二乘法" class="headerlink" title="递推最小二乘法"></a>递推最小二乘法</h1><p>对多组数据 $\vec{x}_i$ 和 $y_i$，满足</p><script type="math/tex; mode=display">y_i = \vec{x}^\mathrm{T}_i\vec{\theta}</script><p>其中 $\vec{x}_i$ 是输入数据向量，$y_i$ 是输出数据标量。写成矩阵形式</p><script type="math/tex; mode=display">\vec{y} = X\vec{\theta}</script><p>其中（以3组数据、2个未知参数为例）</p><script type="math/tex; mode=display">\vec{y} = \begin{bmatrix}    y_1 \\ y_2 \\ y_3\end{bmatrix},X = \begin{bmatrix}    \vec{x}^\mathrm{T}_1 \\    \vec{x}^\mathrm{T}_2 \\    \vec{x}^\mathrm{T}_3\end{bmatrix},\theta = \begin{bmatrix}    \theta_1 \\ \theta_2\end{bmatrix},y_i=x_{i1}\theta_1+x_{i2}\theta_2</script><p>完整地写作（以3组数据、2个未知参数为例）</p><script type="math/tex; mode=display">\begin{bmatrix}    y_1 \\ y_2 \\ y_3\end{bmatrix}=\begin{bmatrix}    x_{11} & x_{12} \\    x_{21} & x_{22} \\    x_{31} & x_{32} \\\end{bmatrix}\begin{bmatrix}    \theta_1 \\ \theta_2\end{bmatrix}</script><p>有$k$组数据时记作</p><script type="math/tex; mode=display">    X^\mathrm{T}_k = \begin{bmatrix}        \vec{x}_1 & \vec{x}_2 & \cdots & \vec{x}_k    \end{bmatrix} \\    \vec{y}_k=\begin{bmatrix} y_1 & y_2 & \cdots & y_k\end{bmatrix}</script><p>(此时注意区分一些符号，例如 $\vec{y}_k$ 与 $y_k$，$X$ 与 $\vec{x}$ 等)<br>已知最小二乘法的解为</p><script type="math/tex; mode=display">    \vec{\theta}    =(X^\mathrm{T}X)^{-1}    X^\mathrm{T}\vec{y} \tag{1}</script><p>令 $P = (X^\mathrm{T}X)^{-1}$，<br>则加上递推后</p><script type="math/tex; mode=display">\begin{aligned}    P_k^{-1} =& X_k^\mathrm{T}X_k    = \sum_{i=1}^k\vec{x}_i\vec{x}^\mathrm{T}_i\\    =& \sum_{i=1}^{k-1}\vec{x}_i\vec{x}^\mathrm{T}_i    +\vec{x}_k\vec{x}^\mathrm{T}_k \\    =& P_{k-1}^{-1} + \vec{x}_k\vec{x}_k^\mathrm{T}\end{aligned} \tag{2}</script><p>同理可得</p><script type="math/tex; mode=display">    X_k^\mathrm{T}\vec{y}_k    =X_{k-1}^\mathrm{T}\vec{y}_{k-1}    +\vec{x}_ky_k \tag{3}</script><p>于是代入式(1)得到</p><script type="math/tex; mode=display">\begin{aligned}    \vec{\theta}_k =& P_kX_k^\mathrm{T}\vec{y}_k \\    =& P_k(X_{k-1}^\mathrm{T}\vec{y}_{k-1}    +\vec{x}_ky_k) \\    =& P_k(P_{k-1}^{-1}\vec{\theta}_{k-1}    +\vec{x}_ky_k) \\    =& P_k(P_k^{-1}\vec{\theta}_{k-1}    -\vec{x}_k\vec{x}_k^\mathrm{T}\theta_{k-1}+\vec{x}_ky_k) \\    =& \vec{\theta}_{k-1} + P_k\vec{x}_k    (y_k-\vec{x}_k^\mathrm{T}\theta_{k-1}) \\    =& \vec{\theta}_{k-1}    +(P_{k-1}^{-1} + \vec{x}_k\vec{x}_k^\mathrm{T})^{-1}    \vec{x}_k(y_k-\vec{x}_k^\mathrm{T}\theta_{k-1}) \\    =& \vec{\theta}_{k-1}    +(P_{k-1}-\frac{P_{k-1}\vec{x}_k\vec{x}_k^\mathrm{T}    P_{k-1}}{1+\vec{x}_k^\mathrm{T}P_{k-1}\vec{x}_k})    \vec{x}_k(y_k-\vec{x}_k^\mathrm{T}\theta_{k-1}) \\\end{aligned}</script><p>其中倒数第3行到倒数第一行的过程</p><script type="math/tex; mode=display">    P_k = P_{k-1}-\frac{P_{k-1}\vec{x}_k\vec{x}_k^\mathrm{T}    P_{k-1}}{1+\vec{x}_k^\mathrm{T}P_{k-1}\vec{x}_k}</script><p>用到了下面的矩阵求逆公式及其引理</p><script type="math/tex; mode=display">\begin{aligned}    (A+BCD)^{-1} =& A^{-1}-A^{-1} B    (DA^{-1}B+C^{-1})^{-1}DA^{-1} \\    (A+\vec{u}\vec{u}^\text{T})^{-1} =& A^{-1}    -\frac{A^{-1}\vec{u}\vec{u}^\text{T} A^{-1}}    {1+\vec{u}^\text{T}A^{-1}\vec{u}}\end{aligned}</script><p>令</p><script type="math/tex; mode=display">    K_k = \frac{P_{k-1}\vec{x}_k}    {1+\vec{x}_k^\mathrm{T}P_{k-1}\vec{x}_k}</script><p>则</p><script type="math/tex; mode=display">\begin{aligned}    P_k =& (I-K_k\vec{x}_k^\mathrm{T})P_{k-1}\\    P_k\vec{x}_k =& P_{k-1}\vec{x}_k    -K_k\vec{x}_k^\mathrm{T}P_{k-1}\vec{x}_k \\    =& \frac{P_{k-1}\vec{x}_k    (1+\vec{x}_k^\mathrm{T}P_{k-1}\vec{x}_k)    -P_{k-1}\vec{x}_k\vec{x}_k^\mathrm{T}    P_{k-1}\vec{x}_k}    {1+\vec{x}_k^\mathrm{T}P_{k-1}\vec{x}_k} \\    =& \frac{P_{k-1}\vec{x}_k}    {1+\vec{x}_k^\mathrm{T}P_{k-1}\vec{x}_k} \\    =& K_k \\\end{aligned}</script><p>总结成递推公式得到</p><script type="math/tex; mode=display">\begin{aligned}    K_k =& \frac{P_{k-1}\vec{x}_k}{1+\vec{x}_k^\mathrm{T}    P_{k-1}\vec{x}_k}\\    P_k =& (I-K_k\vec{x}_k^\mathrm{T})P_{k-1} \\    \vec{\theta}_k =& \vec{\theta}_{k-1}    +K_k(y_k-\vec{x}_k^\mathrm{T}\theta_{k-1})\end{aligned}</script><h1 id="一些注意事项"><a href="#一些注意事项" class="headerlink" title="一些注意事项"></a>一些注意事项</h1><p>&emsp;&emsp;因为 $P=(X^\text{T}X)^{-1}$，$\vec{x}_1\vec{x}_1^\text{T}$ 一般很小，所以实际使用时一般把 $P_1$ 初始化为一个接近无穷大的单位阵。<br>&emsp;&emsp;可以看出 $P$ 是个对称矩阵，如果因为数值计算的原因导致 $P$ 不严格对称时，代码里需要加一步：$P\leftarrow(P+P^\text{T})/2$。</p><h1 id="引入遗忘因子"><a href="#引入遗忘因子" class="headerlink" title="引入遗忘因子"></a>引入遗忘因子</h1><p>先考虑一个比较简单的情况</p><script type="math/tex; mode=display">x_n=\theta+w_n</script><p>其中 $\theta$ 是要估计的参数，$w_n$ 是高斯白噪声，$x_n$ 是观测到的数据，总共有 $N$ 组数据，将 $N$ 组数据取平均得到 $\theta$ 的一个估计值为</p><script type="math/tex; mode=display">\hat{\theta}=\frac{1}{N}\sum_{n=1}^Nx_n</script><p>写成递推形式为</p><script type="math/tex; mode=display">\hat\theta_n=\hat\theta_{n-1}+\frac{1}{n}(x_n-\hat\theta_{n-1})</script><p>例如，</p><script type="math/tex; mode=display">\begin{aligned}    \hat\theta_1 =& x_1\\    \hat\theta_2 =& \hat\theta_1+\frac{1}{2}(x_2-\hat\theta_1)    =\frac{1}{2}(x_1+x_2) \\    \hat\theta_3 =& \hat\theta_2+\frac{1}{3}(x_3-\hat\theta_2)    =\frac{1}{3}(x_1+x_2+x_3) \\\end{aligned}</script><p>现在对之前的值乘一个衰减系数 $\lambda\in(0,1)$，也就是</p><script type="math/tex; mode=display">\begin{aligned}    \hat\theta_2 =& \frac{1}{\lambda+1}(\lambda x_1+x_2) \\    \hat\theta_3 =& \frac{1}{\lambda^2+\lambda+1}(\lambda^2x_1+\lambda x_2+x_3) \\    \vdots\end{aligned}</script><p>写成递推形式为</p><script type="math/tex; mode=display">\begin{aligned}    \hat\theta_2=&\frac{1}{\lambda+1}(\lambda x_1+x_2) \\    \hat\theta_3=&\frac{1}{\lambda^2+\lambda+1}(\lambda(\lambda+1)\hat\theta_2+x_3) \\    =&\hat\theta_2+\frac{1}{\lambda^2+\lambda+1}(x_3-\hat\theta_2)\end{aligned}</script><p>当 $n\rightarrow\infty$ 时，递推形式可以近似为</p><script type="math/tex; mode=display">\begin{aligned}    \hat{\theta}_n =& \hat\theta_{n-1}+\frac{1}{\sum_{n=0}^{N-1}\lambda^{n}}(x_n-\hat\theta_{n-1}) \\    =& \hat\theta_{n-1}+(1-\lambda)(x_n-\hat\theta_{n-1})\end{aligned}</script><h1 id="递推最小二乘中的遗忘因子"><a href="#递推最小二乘中的遗忘因子" class="headerlink" title="递推最小二乘中的遗忘因子"></a>递推最小二乘中的遗忘因子</h1><p>类似地，在最小二乘的误差 $S_i=||y_i-\vec{x}_i^\text{T}\vec\theta||^2$ 中加入遗忘因子，得到总误差（以3组数据为例）</p><script type="math/tex; mode=display">J_3=\lambda^2S_1+\lambda S_2+S_3</script><p>完整的方程可以写作</p><script type="math/tex; mode=display">\vec{y}_3=X_3\theta \\\begin{bmatrix}    \lambda y_1 \\ \sqrt{\lambda}y_2 \\ y_3\end{bmatrix}=\begin{bmatrix}    \lambda x_{11} & \lambda x_{12} \\    \sqrt{\lambda}x_{21} & \sqrt{\lambda}x_{22} \\    x_{31} & x_{32} \\\end{bmatrix}\begin{bmatrix}    \theta_1 \\ \theta_2\end{bmatrix}</script><p>类似地代入最小二乘的解式(1)，并求式(2)(3)的递推形式</p><script type="math/tex; mode=display">\begin{aligned}X_2^\text{T}X_2 =& \begin{bmatrix}\sqrt{\lambda}x_{11} & x_{21} \\\sqrt{\lambda}x_{12} & x_{22} \\\end{bmatrix}\begin{bmatrix}\sqrt{\lambda}x_{11} & \sqrt{\lambda} x_{12} \\x_{21} & x_{22}\end{bmatrix} \\X_3^\text{T}X_3 =& \begin{bmatrix}\lambda x_{11} & \sqrt{\lambda}x_{21} & x_{31} \\\lambda x_{12} & \sqrt{\lambda}x_{22} & x_{32} \\\end{bmatrix}\begin{bmatrix}\lambda x_{11} & \lambda x_{12} \\\sqrt{\lambda}x_{21} & \sqrt{\lambda} x_{22} \\x_{31} & x_{32}\end{bmatrix} \\=& \lambda X_2^\text{T}X_2 + \vec{x}_3\vec{x}_3^\text{T} \\X_2^\text{T}\vec{y}_2 =& \begin{bmatrix}\sqrt{\lambda}x_{11} & x_{21} \\\sqrt{\lambda}x_{12} & x_{22} \\\end{bmatrix}\begin{bmatrix}\sqrt{\lambda}y_1 \\ y_2\end{bmatrix} \\X_3^\text{T}\vec{y}_3 =& \begin{bmatrix}\lambda x_{11} & \sqrt{\lambda}x_{21} & x_{31} \\\lambda x_{12} & \sqrt{\lambda}x_{22} & x_{32} \\\end{bmatrix}\begin{bmatrix}\lambda y_1 \\ \sqrt{\lambda}y_2 \\ y_3\end{bmatrix} \\=& \lambda X_2^\text{T}\vec{y}_2 + \vec{x}_3y_3\end{aligned}</script><p>即</p><script type="math/tex; mode=display">\begin{aligned}P_k^{-1} =& \lambda P_{k-1}^{-1} + \vec{x}_k\vec{x}_k^\text{T} \\X_k^\text{T}\vec{y}_k =& \lambda X_{k-1}^\text{T}\vec{y}_{k-1} + \vec{x}_ky_k\end{aligned}</script><p>代入式(1)得到</p><script type="math/tex; mode=display">\begin{aligned}\vec{\theta}_k =& P_kX_k^\text{T}\vec{y}_k \\=& P_k(\lambda X_{k-1}^\text{T}\vec{y}_{k-1} + \vec{x}_ky_k) \\=& P_k(\lambda P_{k-1}^{-1}\vec{\theta}_{k-1} + \vec{x}_ky_k) \\=& P_k(P_k^{-1}\vec{\theta}_{k-1}-\vec{x}_k\vec{x}_k^\text{T}\theta_{k-1}+\vec{x}_ky_k) \\=& \vec\theta_{k-1} + P_k\vec{x}_k(y_k-\vec{x}_k^\text{T}\theta_{k-1}) \\=& \vec\theta_{k-1} + (\lambda P_{k-1}^{-1} + \vec{x}_k\vec{x}_k^\text{T})^{-1}\vec{x}_k(y_k-\vec{x}_k^\text{T}\theta_{k-1}) \\=& \vec\theta_{k-1}+(\frac{P_{k-1}}{\lambda}-\frac{\frac{P_{k-1}}{\lambda}\vec{x}_k\vec{x}_k^\text{T}\frac{P_{k-1}}{\lambda}}{1+\vec{x}_k^\text{T}\frac{P_{k-1}}{\lambda}\vec{x}_k})\vec{x}_k(y_k-\vec{x}_k^\text{T}\theta_{k-1}) \\=& \vec\theta_{k-1}+(\frac{P_{k-1}}{\lambda}-\frac{1}{\lambda}\frac{P_{k-1}\vec{x}_k\vec{x}_k^\text{T}P_{k-1}}{\lambda + \vec{x}_k^\text{T}P_{k-1}\vec{x}_k})\vec{x}_k(y_k-\vec{x}_k^\text{T}\theta_{k-1}) \\\end{aligned}</script><p>令</p><script type="math/tex; mode=display">K_k = \frac{P_{k-1}\vec{x}_k}{\lambda+\vec{x}_k^\mathrm{T}P_{k-1}\vec{x}_k}</script><p>则</p><script type="math/tex; mode=display">\begin{aligned}P_k =& \frac{1}{\lambda}(I-K_k\vec{x}_k^\mathrm{T})P_{k-1}\\P_k\vec{x}_k =& \frac{1}{\lambda}(P_{k-1}\vec{x}_k-K_k\vec{x}_k^\mathrm{T}P_{k-1}\vec{x}_k) \\=& \frac{1}{\lambda}\frac{P_{k-1}\vec{x}_k(\lambda+\vec{x}_k^\mathrm{T}P_{k-1}\vec{x}_k)-P_{k-1}\vec{x}_k\vec{x}_k^\mathrm{T}P_{k-1}\vec{x}_k}{\lambda+\vec{x}_k^\mathrm{T}P_{k-1}\vec{x}_k} \\=& \frac{1}{\lambda}\frac{P_{k-1}\vec{x}_k\lambda}{\lambda+\vec{x}_k^\mathrm{T}P_{k-1}\vec{x}_k} \\=& K_k \\\end{aligned}</script><p>总结成递推公式得到</p><script type="math/tex; mode=display">\begin{aligned}K_k =& \frac{P_{k-1}\vec{x}_k}{\lambda+\vec{x}_k^\mathrm{T}P_{k-1}\vec{x}_k}\\P_k =& \frac{1}{\lambda}(I-K_k\vec{x}_k^\mathrm{T})P_{k-1} \\\vec{\theta}_k =& \vec{\theta}_{k-1}+K_k(y_k-\vec{x}_k^\mathrm{T}\theta_{k-1})\end{aligned}</script><p>与不带遗忘因子的公式相比，第3个式子 $\vec{\theta}_k$ 不变，前两个稍微有变化。</p><h1 id="一个例子与代码"><a href="#一个例子与代码" class="headerlink" title="一个例子与代码"></a>一个例子与代码</h1><p>&emsp;&emsp;对方程 $y=ax^2+bx+c$，输入多组数据，$x$ 取一些高斯噪声，以4组数据为例，</p><script type="math/tex; mode=display">\begin{bmatrix}    y_1 \\ y_2 \\ y_3 \\ y_4\end{bmatrix}=\begin{bmatrix}    x_1^2 & x_1 & 1 \\    x_2^2 & x_2 & 1 \\    x_3^2 & x_3 & 1 \\    x_4^2 & x_4 & 1 \\\end{bmatrix}\begin{bmatrix}    a \\ b \\ c\end{bmatrix}</script><p>代码使用了自用的矩阵运算库<code>zhnmat</code>，见 <a href="https://blog.csdn.net/qq_34288751/article/details/129314145">自用的矩阵运算库zhnmat使用说明</a><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;zhnmat.hpp&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> zhnmat;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constexpr</span> <span class="type">double</span> a = <span class="number">0.5</span>;</span><br><span class="line">    <span class="keyword">constexpr</span> <span class="type">double</span> b = <span class="number">1.1</span>;</span><br><span class="line">    <span class="keyword">constexpr</span> <span class="type">double</span> c = <span class="number">2.1</span>;</span><br><span class="line">    <span class="type">double</span> U, V, randx;</span><br><span class="line">    <span class="type">double</span> y, lambda=<span class="number">0.5</span>;</span><br><span class="line">    Mat K;</span><br><span class="line">    <span class="function">Mat <span class="title">vx</span><span class="params">(<span class="number">3</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line">    Mat P = <span class="built_in">eye</span>(<span class="number">3</span>)*<span class="number">1e6</span>;</span><br><span class="line">    <span class="function">Mat <span class="title">theta</span><span class="params">(<span class="number">3</span>, <span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        U = (<span class="built_in">rand</span>()<span class="number">+1.0</span>) / (RAND_MAX<span class="number">+1.0</span>);</span><br><span class="line">        V = (<span class="built_in">rand</span>()<span class="number">+1.0</span>) / (RAND_MAX<span class="number">+1.0</span>);</span><br><span class="line">        randx = <span class="built_in">sqrt</span>(<span class="number">-2.0</span> * <span class="built_in">log</span>(U))* <span class="built_in">cos</span>(<span class="number">6.283185307179586477</span> * V);  <span class="comment">// `randx`服从标准正态分布</span></span><br><span class="line">        randx *= <span class="number">2</span>;</span><br><span class="line">        vx.<span class="built_in">set</span>(<span class="number">0</span>, <span class="number">0</span>, randx*randx);</span><br><span class="line">        vx.<span class="built_in">set</span>(<span class="number">1</span>, <span class="number">0</span>, randx);</span><br><span class="line">        vx.<span class="built_in">set</span>(<span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">        y = a*randx*randx + b*randx + c;</span><br><span class="line">        K = P * vx / (lambda + (vx.<span class="built_in">T</span>() * P * vx).<span class="built_in">at</span>(<span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">        P = (<span class="built_in">eye</span>(<span class="number">3</span>) - K * vx.<span class="built_in">T</span>()) * P / lambda;</span><br><span class="line">        theta = theta + K * (y - (vx.<span class="built_in">T</span>() * theta).<span class="built_in">at</span>(<span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;theta&quot;</span> &lt;&lt; theta &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>矩阵求导的几个实际应用例子</title>
      <link href="/2024/08/03/%E7%9F%A9%E9%98%B5%E6%B1%82%E5%AF%BC%E7%9A%84%E5%87%A0%E4%B8%AA%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E4%BE%8B%E5%AD%90/"/>
      <url>/2024/08/03/%E7%9F%A9%E9%98%B5%E6%B1%82%E5%AF%BC%E7%9A%84%E5%87%A0%E4%B8%AA%E5%AE%9E%E9%99%85%E5%BA%94%E7%94%A8%E4%BE%8B%E5%AD%90/</url>
      
        <content type="html"><![CDATA[<p>如果约定所有的向量均为列向量，那么我认为矩阵求导在实际使用中就没有必要讨论行布局或者列布局，因为导数的推导过程和结果就决定了矩阵求导公式是唯一的。<br>大部分情况二阶矩阵或二维向量足以说明问题，剩下的到三阶也够了，不会出现低阶成立而高阶不成立的情况，所以下面举的例子均为三阶及以下。<br>若无特别说明，细斜体(如$J$)表示标量，粗斜体小写(如$\boldsymbol{x}$)表示向量，粗正体大写(如$\mathbf{A}$)表示矩阵。</p><h1 id="损失函数与梯度下降法"><a href="#损失函数与梯度下降法" class="headerlink" title="损失函数与梯度下降法"></a>损失函数与梯度下降法</h1><script type="math/tex; mode=display">    J=\frac{1}{2}(\boldsymbol{y}-\hat{\boldsymbol{y}}(\boldsymbol{x}))^{\top}    (\boldsymbol{y}-\hat{\boldsymbol{y}}(\boldsymbol{x}))</script><p>其中$J$是标量损失值，$\boldsymbol{x}$是待优化参数，其梯度下降法更新公式为</p><script type="math/tex; mode=display">\boldsymbol{x}'=-\gamma\frac{\partial J}{\partial\boldsymbol{x}}</script><p>为简化问题而可以令$\gamma=1$。$\hat{y}$与$x$的函数关系决定了矩阵的导数应该怎么求。按照导数定义先求$\Delta J$</p><script type="math/tex; mode=display">\begin{aligned}    2\Delta J &= (\boldsymbol{y}-(\hat{\boldsymbol{y}}+\Delta\boldsymbol{y}))^{\top}    (\boldsymbol{y}-(\hat{\boldsymbol{y}}+\Delta\boldsymbol{y}))    -(\boldsymbol{y}-\hat{\boldsymbol{y}})^{\top}(\boldsymbol{y}-\hat{\boldsymbol{y}}) \\    &= \Delta\boldsymbol{y}^{\top}\Delta\boldsymbol{y}    -\Delta\boldsymbol{y}^{\top}(\boldsymbol{y}-\hat{\boldsymbol{y}})    -(\boldsymbol{y}-\hat{\boldsymbol{y}})^{\top}\Delta\boldsymbol{y} \\    &= -2(\boldsymbol{y}-\hat{\boldsymbol{y}})^{\top}\Delta\boldsymbol{y} \\\end{aligned}</script><p>令$\boldsymbol{e}=\boldsymbol{y}-\hat{\boldsymbol{y}}$，则</p><script type="math/tex; mode=display">\Delta J=-\boldsymbol{e}^{\top}\Delta\boldsymbol{y}</script><ol><li>$\boldsymbol{y}=\mathbf{A}\boldsymbol{x}$</li></ol><script type="math/tex; mode=display">\begin{aligned}    \Delta y_1=a_{11}\Delta x_1+a_{12}\Delta x_2 \\    \Delta y_2=a_{21}\Delta x_1+a_{22}\Delta x_2 \\\end{aligned}</script><p>于是</p><script type="math/tex; mode=display">\begin{aligned}    \Delta \boldsymbol{y} &= \mathbf{A}\Delta \boldsymbol{x} \\    \Delta J &= -\boldsymbol{e}^{\top}\mathbf{A}\Delta \boldsymbol{x} \\\end{aligned}</script><p>把$\Delta J$拆开得到梯度下降法更新公式</p><script type="math/tex; mode=display">\begin{aligned}    x_1' &= -\frac{\partial J}{\partial x_1}=e_1a_{11}+e_2a_{21} \\    x_2' &= -\frac{\partial J}{\partial x_2}=e_1a_{12}+e_2a_{22} \\\end{aligned}</script><p>写成矩阵形式得</p><script type="math/tex; mode=display">\boldsymbol{x}'=\mathbf{A}^{\top}\boldsymbol{e}</script><ol><li>$\boldsymbol{y}=\boldsymbol{a}^{\top}\mathbf{X}\boldsymbol{b}$<script type="math/tex; mode=display">\left[\begin{matrix} y_1 \\ y_2\end{matrix}\right]=\left[\begin{matrix} a_1 & a_2 & a_3\end{matrix}\right]\left[\begin{matrix} x_{11} & x_{12} \\ x_{21} & x_{22} \\ x_{31} & x_{32} \\\end{matrix}\right]\left[\begin{matrix} b_1 \\ b_2\end{matrix}\right]</script></li></ol><h1 id="非线性系统的线性化"><a href="#非线性系统的线性化" class="headerlink" title="非线性系统的线性化"></a>非线性系统的线性化</h1><h1 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h1><p>有的直接是pdf文件，注意分辨。<br><a href="https://zhuanlan.zhihu.com/p/24709748">矩阵求导术(上)</a><br><a href="https://github.com/soloice/Matrix_Derivatives">matrix vector derivatives for machine learning</a><br><a href="http://www.matrixcalculus.org/">Matrix Calculus</a><br><a href="https://project.hupili.net/tutorial/hu2012-matrix-calculus/hu2012matrix-calculus.pdf">Matrix Calculus: Derivation and Simple Application</a><br><a href="http://paulklein.ca/newsite/teaching/matrix%20calculus.pdf">Matrix Calculus - Notes on the Derivative of a Trace</a><br><a href="http://cs229.stanford.edu/notes2021fall/cs229-notes1.pdf">CS229 Lecture Notes</a><br><a href="http://cal.cs.illinois.edu/~johannes/research/matrix%20calculus.pdf">matrix calculus</a><br><a href="https://zhuanlan.zhihu.com/p/475364267">关于Machine Learning中的基础数学推导值得一看的文章(持续更新)</a><br><a href="https://tminka.github.io/papers/matrix/">Old and New Matrix Algebra Useful for Statistics</a></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>球面几何</title>
      <link href="/2024/08/03/%E7%90%83%E9%9D%A2%E5%87%A0%E4%BD%95/"/>
      <url>/2024/08/03/%E7%90%83%E9%9D%A2%E5%87%A0%E4%BD%95/</url>
      
        <content type="html"><![CDATA[<p><img src="https://img-blog.csdnimg.cn/direct/05d2b93cfe9d4881af0e6cad4e4c385b.png" alt="在这里插入图片描述"><br>正弦定理</p><script type="math/tex; mode=display">\frac{\sin A}{\sin a}=\frac{\sin B}{\sin b}=\frac{\sin C}{\sin c}</script><p>余弦定理</p><script type="math/tex; mode=display">\cos a=\cos b\cos c+\sin b\sin c\cos A</script><p>两点间的球面距离</p><script type="math/tex; mode=display">\cos\overset{\frown}{AB}=\cos A_w\cos B_w\cos(B_j-A_j)+\sin A_w\sin B_w</script><p>其中，$A_j,A_w$ 分别表示 $A$ 点的经度、纬度。</p><h1 id="画圆弧的方法"><a href="#画圆弧的方法" class="headerlink" title="画圆弧的方法"></a>画圆弧的方法</h1><p>给定两个点计算这两个点之间的所有点。</p><ol><li>计算两点间的球面距离</li><li></li></ol><h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://www.zhihu.com/question/382038661/answer/1101649342">怎么证明球面上两点间最短距离是大圆劣弧？ -知乎</a><br><a href="https://blog.csdn.net/GarfieldEr007/article/details/50801789">球面三角基本名称及性质、基本定理和公式、解法 -CSDN博客</a><br><a href="https://en.wikipedia.org/wiki/Spherical_trigonometry">Spherical trigonometry -Wikipedia</a><br><a href="https://zhuanlan.zhihu.com/p/42948839">根据经纬度计算两点间的球面距离 -知乎</a>  </p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在线html调试</title>
      <link href="/2024/07/11/%E5%9C%A8%E7%BA%BFhtml%E8%B0%83%E8%AF%95/"/>
      <url>/2024/07/11/%E5%9C%A8%E7%BA%BFhtml%E8%B0%83%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<p><a href="https://developer.mozilla.org/zh-CN/">https://developer.mozilla.org/zh-CN/</a></p>]]></content>
      
      
      <categories>
          
          <category> 实用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日常 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>文件在线转换格式（自用）</title>
      <link href="/2024/07/10/%E6%96%87%E4%BB%B6%E8%BD%AC%E6%8D%A2/"/>
      <url>/2024/07/10/%E6%96%87%E4%BB%B6%E8%BD%AC%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<ol><li><a href="https://www.freeconvert.com/zh/"><strong>FreeConvert</strong></a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 实用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日常 </tag>
            
            <tag> 转换 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图片在线压缩网站（自用）</title>
      <link href="/2024/07/10/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/"/>
      <url>/2024/07/10/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/</url>
      
        <content type="html"><![CDATA[<ol><li><a href="https://freecompress.com/zh-cn/compress-image"><strong>Freecompress</strong></a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 实用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日常 </tag>
            
            <tag> 壁纸 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>部署Microsoft 365并成功激活</title>
      <link href="/2024/07/10/%E4%BD%BF%E7%94%A8otp%E9%83%A8%E7%BD%B2office/"/>
      <url>/2024/07/10/%E4%BD%BF%E7%94%A8otp%E9%83%A8%E7%BD%B2office/</url>
      
        <content type="html"><![CDATA[<p>进入<a href="https://otp.landian.vip/zh-cn/">Office Tool Plus 官网</a>下载并安装<br>以下是一些官网教程</p><blockquote><p><a href="https://www.coolhub.top/archives/11">安装 Office</a><br><a href="https://www.coolhub.top/archives/14">激活 Office</a><br><a href="https://www.coolhub.top/archives/13">疑难解答</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Office Tool Plus </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Office Tool Plus </tag>
            
            <tag> Microsoft 365 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Windows下安装ubuntu，实现双系统</title>
      <link href="/2024/07/10/ubuntu/"/>
      <url>/2024/07/10/ubuntu/</url>
      
        <content type="html"><![CDATA[<h1 id="安装Windows和Ubuntu双系统教程"><a href="#安装Windows和Ubuntu双系统教程" class="headerlink" title="安装Windows和Ubuntu双系统教程"></a>安装Windows和Ubuntu双系统教程</h1><p>这里暂时没什么内容，因为我懒得更新</p>]]></content>
      
      
      <categories>
          
          <category> ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>高质量壁纸网站</title>
      <link href="/2024/07/09/%E5%A3%81%E7%BA%B8%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/"/>
      <url>/2024/07/09/%E5%A3%81%E7%BA%B8%E7%BD%91%E7%AB%99%E6%8E%A8%E8%8D%90/</url>
      
        <content type="html"><![CDATA[<style>#web_bg{  background: url(/pictures/bg.jpg)!important;  background-position: center !important;  background-size: cover !important;  background-repeat: no-repeat !important;}</style><ol><li><a href="https://wallhaven.cc/"><strong>wallhaven</strong></a></li><li><a href="https://wallpaperscraft.com/"><strong>wallpaperscraft</strong></a></li><li><a href="https://wallroom.io/"><strong>wallroom</strong></a></li><li><a href="https://wallpapercave.com/"><strong>wallpaper cave</strong></a></li><li><a href="https://unsplash.com/"><strong>Unsplash</strong></a></li><li><a href="https://www.gamewallpapers.com/"><strong>gamewallpapers</strong></a></li><li><a href="https://bz.zzzmh.cn/index"><strong>极简壁纸</strong></a></li><li><a href="https://pixabay.com/zh/"><strong>pixabay</strong></a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 实用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日常 </tag>
            
            <tag> 壁纸 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQLite 笔记</title>
      <link href="/2024/07/07/sqlite/"/>
      <url>/2024/07/07/sqlite/</url>
      
        <content type="html"><![CDATA[<h1 id="SQLite-笔记"><a href="#SQLite-笔记" class="headerlink" title="SQLite 笔记"></a>SQLite 笔记</h1><p>SQLite C++依赖库:<br><a href="https://github.com/SRombauts/SQLiteCpp">https://github.com/SRombauts/SQLiteCpp</a>  </p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://www.runoob.com/sqlite/sqlite-tutorial.html">SQLite 教程 -菜鸟教程</a><br><a href="https://www.sqlite.org/download.html">SQLite Download Page</a><br><a href="https://sqlite.readdevdocs.com/">SQLite中文网</a><br><a href="https://sqlitebrowser.org/">DB Browser for SQLite</a><br><a href="https://www.jianshu.com/p/562576ec138c">感受一下C++操作SQLite有多麻烦 -简书</a><br><a href="https://blog.csdn.net/hbsyaaa/article/details/127858034">玩转SQLite-11：C语言高效API之sqlite3_prepare系列函数 -CSDN博客</a><br><a href="https://www.yiibai.com/sqlite/primary-key.html">SQLite主键</a><br><a href="https://blog.csdn.net/gymaisyl/article/details/108404902">Sqlite数据库-使用的查询语句大全 -CSDN博客</a><br><a href="https://geek-docs.com/sqlite">SQLite 教程 -极客教程</a>  </p><h2 id="语法笔记"><a href="#语法笔记" class="headerlink" title="语法笔记"></a>语法笔记</h2><div class="table-container"><table><thead><tr><th>功能</th><th>命令</th></tr></thead><tbody><tr><td>打开文件（cmd）</td><td>sqlite3 filename.db</td></tr><tr><td>打开文件（sql）</td><td>.open filename.db</td></tr><tr><td>退出</td><td>.exit</td></tr><tr><td>列出所有表格</td><td>.tables</td></tr><tr><td>列出表格的键</td><td>.schema tablename</td></tr><tr><td>显示模式</td><td>.header on  \  .mode column</td></tr><tr><td>创建表格</td><td>CREATE TABLE tablename;</td></tr><tr><td>删除表格</td><td>DROP TABLE tablename;</td></tr><tr><td>清空表格</td><td>DELETE FROM sqlite_sequence WHERE name = ‘tablename’;</td></tr><tr><td>修改表格名称</td><td>ALTER TABLE table_name RENAME TO new_table_name;</td></tr><tr><td>添加列</td><td>ALTER TABLE tablename ADD COLUMN columnname INTEGER DEFAULT 0;</td></tr><tr><td>增</td><td>INSERT INTO tablename VALUES (7, ‘James’, 24, ‘Houston’, 10000.00 );</td></tr><tr><td>删</td><td>DELETE FROM tablename WHERE rowid=valuename;</td></tr><tr><td>改</td><td>UPDATE tablename SET columnname=valuename WHERE conditionname;</td></tr><tr><td>查</td><td>SELECT * FROM tablename;</td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> SQLite </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教学 </tag>
            
            <tag> SQLite </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客网站搭建过程</title>
      <link href="/2024/07/07/process/"/>
      <url>/2024/07/07/process/</url>
      
        <content type="html"><![CDATA[<h1 id="搭建记录"><a href="#搭建记录" class="headerlink" title="搭建记录"></a>搭建记录</h1><p>这篇文章的内容为本站的搭建过程，省略一些修改图片路径等简易操作</p><h2 id="1-初始化Hexo项目"><a href="#1-初始化Hexo项目" class="headerlink" title="1.初始化Hexo项目"></a>1.初始化Hexo项目</h2><p>在新的文件夹中打开终端，输入以下<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure></p><h2 id="2-安装初始依赖库"><a href="#2-安装初始依赖库" class="headerlink" title="2.安装初始依赖库"></a>2.安装初始依赖库</h2><p>接着输入<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i</span><br></pre></td></tr></table></figure><br>通过这个使博客内容可以正常显示</p><h2 id="3-将博客挂载到github-pages"><a href="#3-将博客挂载到github-pages" class="headerlink" title="3.将博客挂载到github pages"></a>3.将博客挂载到github pages</h2><p>随后安装hexo-deployer-git使博客能够上传到github<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><br>（在此之后，在_config.yml中修改deploy内容，这里省略）</p><h2 id="4-安装butterfly主题"><a href="#4-安装butterfly主题" class="headerlink" title="4.安装butterfly主题"></a>4.安装butterfly主题</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-theme-butterfly</span><br></pre></td></tr></table></figure><p>随后安装渲染器<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure><br>在此之后将_config.yml中的theme改为butterfly<br>并且将language改为zh-CN</p><h2 id="5-文章显示"><a href="#5-文章显示" class="headerlink" title="5.文章显示"></a>5.文章显示</h2><p>修改主题配置文件_config.butterfly.yml中的post_meta<br>date_type均改为both<br>date_format均改为relative</p><h2 id="6-本地搜索"><a href="#6-本地搜索" class="headerlink" title="6.本地搜索"></a>6.本地搜索</h2><p>安装以下依赖<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><br>_config.yml中加入<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><br>_config.butterfly.yml中local_search的enable改为true</p><h2 id="7-字数统计"><a href="#7-字数统计" class="headerlink" title="7.字数统计"></a>7.字数统计</h2><p>安装以下依赖<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-wordcount --save</span><br></pre></td></tr></table></figure><br>_config.butterfly.yml中wordcount的enable改为true</p><h2 id="8-鼠标点击效果"><a href="#8-鼠标点击效果" class="headerlink" title="8.鼠标点击效果"></a>8.鼠标点击效果</h2><p>_config.butterfly.yml中fireworks或者Heart symbol或者words的enable改为true</p><h2 id="9-修改为一图流"><a href="#9-修改为一图流" class="headerlink" title="9.修改为一图流"></a>9.修改为一图流</h2><p>首先在source文件夹内新建css文件夹，并新建custom.css写入以下代码<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 页脚与头图透明 */</span></span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page-header</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 白天模式遮罩透明 */</span></span><br><span class="line"><span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式遮罩透明 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>随后在_config.butterfly.yml文件中的inject配置项的head子项加入以下代码<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/custom.css&quot;</span> <span class="string">media=&quot;defer&quot;</span> <span class="string">onload=&quot;this.media=&#x27;all&#x27;&quot;&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="10-页脚徽标"><a href="#10-页脚徽标" class="headerlink" title="10.页脚徽标"></a>10.页脚徽标</h2><p>安装以下依赖<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-footer-beautify --save</span><br></pre></td></tr></table></figure><br>在站点配置文件_config.yml或者主题配置文件_config.butterfly.yml中添加（这是我的配置）<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># footer_beautify</span></span><br><span class="line"><span class="comment"># 页脚计时器：[Native JS Timer](https://akilar.top/posts/b941af/)</span></span><br><span class="line"><span class="comment"># 页脚徽标：[Add Github Badge](https://akilar.top/posts/e87ad7f8/)</span></span><br><span class="line"><span class="attr">footer_beautify:</span></span><br><span class="line">  <span class="attr">enable:</span></span><br><span class="line">    <span class="attr">timer:</span> <span class="literal">true</span> <span class="comment"># 计时器开关</span></span><br><span class="line">    <span class="attr">bdage:</span> <span class="literal">true</span> <span class="comment"># 徽标开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">all</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">exclude:</span> <span class="comment">#屏蔽页面</span></span><br><span class="line">    <span class="comment"># - /posts/</span></span><br><span class="line">    <span class="comment"># - /about/</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">footer-wrap</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="comment"># 计时器部分配置项</span></span><br><span class="line">  <span class="attr">runtime_js:</span> <span class="string">/js/runtime.js</span></span><br><span class="line">  <span class="attr">runtime_css:</span> <span class="string">/css/runtime.css</span></span><br><span class="line">  <span class="comment"># 徽标部分配置项</span></span><br><span class="line">  <span class="attr">swiperpara:</span> <span class="number">0</span> <span class="comment">#若非0，则开启轮播功能，每行徽标个数</span></span><br><span class="line">  <span class="attr">bdageitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://hexo.io/</span> <span class="comment">#徽标指向网站链接</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo</span> <span class="comment">#徽标API</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">博客框架为Hexo</span> <span class="comment">#徽标提示语</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://butterfly.js.org/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站主题为Butterfly</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://vercel.com/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站采用Vercel部署</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://github.com/</span></span><br><span class="line">      <span class="attr">shields:</span> <span class="string">https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub</span></span><br><span class="line">      <span class="attr">message:</span> <span class="string">本站项目由Github托管</span></span><br><span class="line">  <span class="attr">swiper_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css</span></span><br><span class="line">  <span class="attr">swiper_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js</span></span><br><span class="line">  <span class="attr">swiperbdage_init_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-footer-beautify/lib/swiperbdage_init.min.js</span></span><br></pre></td></tr></table></figure><br>其中我的css配置为<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*电子钟字体*/</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;UnidreamLED&#x27;</span>;</span><br><span class="line">  <span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&quot;https://cdn.jsdelivr.net/npm/akilar-candyassets/fonts/UnidreamLED.ttf&quot;</span>);</span><br><span class="line">  <span class="attribute">font-display</span>: swap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#runtime</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">280px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">padding-inline</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.7</span>);</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;UnidreamLED&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#runtime</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#28b4c8</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">28</span>,<span class="number">69</span>,<span class="number">218</span>,<span class="number">0.71</span>);</span><br><span class="line">  <span class="attribute">animation</span>: flashlight <span class="number">1s</span> linear infinite alternate;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*悬停显示徽标提示语*/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.github-badge</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">width</span>: fit-content;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">100</span>;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">attr</span>(data-title);</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--text-bg-hover);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span> <span class="selector-tag">a</span><span class="selector-class">.github-badge</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">18</span>,<span class="number">18</span>,<span class="number">18</span>,<span class="number">0.8</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-moz-keyframes</span> flashlight &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#1478d2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#1478d2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> flashlight &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#1478d2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#1478d2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-o-keyframes</span> flashlight &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#1478d2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#1478d2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> flashlight &#123;</span><br><span class="line">  <span class="selector-tag">from</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#1478d2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">to</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">2px</span> <span class="number">#1478d2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>我的js配置为<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> create_time = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&#x27;2024-07-06 22:00:00&#x27;</span>).<span class="title function_">getTime</span>() / <span class="number">1000</span>); <span class="comment">//在此行修改建站时间</span></span><br><span class="line">    <span class="keyword">let</span> timestamp = <span class="title class_">Math</span>.<span class="title function_">round</span>((<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>()) / <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">let</span> second = timestamp - create_time;</span><br><span class="line">    <span class="keyword">let</span> time = <span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> nol = <span class="keyword">function</span>(<span class="params">h</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> h&gt;<span class="number">9</span>?<span class="attr">h</span>:<span class="string">&#x27;0&#x27;</span>+h;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">24</span> * <span class="number">3600</span>) &#123;</span><br><span class="line">      time[<span class="number">1</span>] = <span class="built_in">parseInt</span>(second / (<span class="number">24</span> * <span class="number">3600</span>));</span><br><span class="line">      second %= <span class="number">24</span> * <span class="number">3600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">3600</span>) &#123;</span><br><span class="line">      time[<span class="number">2</span>] = <span class="title function_">nol</span>(<span class="built_in">parseInt</span>(second / <span class="number">3600</span>));</span><br><span class="line">      second %= <span class="number">3600</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">      time[<span class="number">3</span>] = <span class="title function_">nol</span>(<span class="built_in">parseInt</span>(second / <span class="number">60</span>));</span><br><span class="line">      second %= <span class="number">60</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      time[<span class="number">4</span>] = <span class="title function_">nol</span>(second);</span><br><span class="line">    &#125;</span><br><span class="line">     currentTimeHtml =<span class="string">&quot;&lt;div id=&#x27;runtime&#x27;&gt;&quot;</span> + <span class="string">&#x27;本站距今已运行了 &#x27;</span> + time[<span class="number">1</span>] + <span class="string">&#x27; 天 &#x27;</span> + time[<span class="number">2</span>] + <span class="string">&#x27; 时 &#x27;</span> + time[<span class="number">3</span>] + <span class="string">&#x27; 分 &#x27;</span> + time[<span class="number">4</span>] + <span class="string">&#x27; 秒&#x27;</span> + <span class="string">&#x27;&lt;/div&gt;&#x27;</span>;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;workboard&quot;</span>).<span class="property">innerHTML</span> = currentTimeHtml;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure></p><h2 id="11-修改字体"><a href="#11-修改字体" class="headerlink" title="11.修改字体"></a>11.修改字体</h2><p>这个我有心理阴影，不再赘述，有需求自行查阅</p><h2 id="12-文章置顶滚动栏"><a href="#12-文章置顶滚动栏" class="headerlink" title="12.文章置顶滚动栏"></a>12.文章置顶滚动栏</h2><p>安装以下依赖<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-swiper --save</span><br></pre></td></tr></table></figure><br>在站点配置文件_config.yml或者主题配置文件_config.butterfly.yml中添加<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo-butterfly-swiper</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/8e1264d1/</span></span><br><span class="line"><span class="attr">swiper:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 开关</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">5</span> <span class="comment">#过滤器优先权</span></span><br><span class="line">  <span class="attr">enable_page:</span> <span class="string">all</span> <span class="comment"># 应用页面</span></span><br><span class="line">  <span class="attr">timemode:</span> <span class="string">date</span> <span class="comment">#date/updated</span></span><br><span class="line">  <span class="attr">layout:</span> <span class="comment"># 挂载容器类型</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">id</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">recent-posts</span></span><br><span class="line">    <span class="attr">index:</span> <span class="number">0</span></span><br><span class="line">  <span class="attr">default_descr:</span> <span class="string">再怎么看我也不知道怎么描述它的啦！</span></span><br><span class="line">  <span class="attr">swiper_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css</span> <span class="comment">#swiper css依赖</span></span><br><span class="line">  <span class="attr">swiper_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js</span> <span class="comment">#swiper js依赖</span></span><br><span class="line">  <span class="attr">custom_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css</span> <span class="comment"># 适配主题样式补丁</span></span><br><span class="line">  <span class="attr">custom_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js</span> <span class="comment"># swiper初始化方法</span></span><br></pre></td></tr></table></figure><br>在博客中使用swiper_index，后边数字越大越优先展示</p><h2 id="13-文章双侧栏显示及加载动画"><a href="#13-文章双侧栏显示及加载动画" class="headerlink" title="13.文章双侧栏显示及加载动画"></a>13.文章双侧栏显示及加载动画</h2><p>本篇分为两个部分，首先实现双侧栏显示，随后是加载动画</p><h3 id="A-双侧栏显示"><a href="#A-双侧栏显示" class="headerlink" title="A.双侧栏显示"></a>A.双侧栏显示</h3><p>安装以下依赖<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-butterfly-article-double-row --save</span><br></pre></td></tr></table></figure><br>在网站配置文件_config.yml中新增以下项<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">butterfly_article_double_row:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><br>在custom.css中新增以下使按钮居中<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#pagination</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="B-wowjs动画"><a href="#B-wowjs动画" class="headerlink" title="B.wowjs动画"></a>B.wowjs动画</h3><p>安装以下依赖<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-wowjs --save</span><br></pre></td></tr></table></figure><br>在站点配置文件_config.yml或者主题配置文件_config.butterfly.yml中添加（这是我的配置）<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">wowjs:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制动画开关。true是打开，false是关闭</span></span><br><span class="line">  <span class="attr">priority:</span> <span class="number">10</span> <span class="comment">#过滤器优先级</span></span><br><span class="line">  <span class="attr">mobile:</span> <span class="literal">false</span> <span class="comment">#移动端是否启用，默认移动端禁用</span></span><br><span class="line">  <span class="attr">animateitem:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">recent-post-item</span> <span class="comment">#必填项，需要添加动画的元素的class</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__fadeInLeft</span> <span class="comment">#必填项，需要添加的动画</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">1s</span> <span class="comment">#选填项，动画持续时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="number">0</span> <span class="comment">#选填项，动画开始的延迟时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">offset:</span> <span class="number">100</span> <span class="comment">#选填项，开始动画的距离（相对浏览器底部）</span></span><br><span class="line">      <span class="attr">iteration:</span> <span class="number">1</span> <span class="comment">#选填项，动画重复的次数</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">class:</span> <span class="string">card-widget</span></span><br><span class="line">      <span class="attr">style:</span> <span class="string">animate__fadeInRight</span></span><br><span class="line">      <span class="attr">duration:</span> <span class="string">1s</span> <span class="comment">#选填项，动画持续时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">      <span class="attr">delay:</span> <span class="number">0</span> <span class="comment">#选填项，动画开始的延迟时间，单位可以是ms也可以是s。例如3s，700ms。</span></span><br><span class="line">  <span class="attr">animate_css:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css</span></span><br><span class="line">  <span class="attr">wow_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js</span></span><br><span class="line">  <span class="attr">wow_init_js:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js</span></span><br></pre></td></tr></table></figure><br>如需修改动画效果，参考<a href="https://animate.style/">Animate.css</a>，复制并更改style后的内容</p><h2 id="14-菜单栏居中"><a href="#14-菜单栏居中" class="headerlink" title="14.菜单栏居中"></a>14.菜单栏居中</h2><p>在custom.css文件中新增以下<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 一级菜单居中 */</span></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-class">.menus_items</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">width</span>: fit-content <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>修改_config.butterfly.yml中menu的列表，后加hide<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">列表||fas</span> <span class="string">fa-list</span> <span class="string">||</span> <span class="attr">hide:</span></span><br></pre></td></tr></table></figure><br>通过这个可以确保列表在手机端为折叠状态</p><h2 id="15-黑夜模式下文字霓虹灯效果"><a href="#15-黑夜模式下文字霓虹灯效果" class="headerlink" title="15.黑夜模式下文字霓虹灯效果"></a>15.黑夜模式下文字霓虹灯效果</h2><p>在custom.css文件中新增以下<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 日间模式不生效 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-name</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-title</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#site-subtitle</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> <span class="selector-id">#post-info</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 夜间模式生效 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-name</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-title</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_15px <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#site-subtitle</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_10px <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#post-info</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: light_5px <span class="number">10s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 关键帧描述 */</span></span><br><span class="line"><span class="keyword">@keyframes</span> light_15px &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#39c5bb</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> light_10px &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#39c5bb</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> light_5px &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">12.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#11ee5e</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">25%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f14747</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">37.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1a247</span> <span class="number">0</span> <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#f1ee47</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#b347f1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">62.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#002afa</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">75%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#ed709b</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">87.5%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#39c5bb</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#5636ed</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="16-个人卡片渐变色"><a href="#16-个人卡片渐变色" class="headerlink" title="16.个人卡片渐变色"></a>16.个人卡片渐变色</h2><p>在custom.css中新增<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 侧边栏个人信息卡片动态渐变色 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(</span><br><span class="line">    -<span class="number">45deg</span>,</span><br><span class="line">    <span class="number">#e8d8b9</span>,</span><br><span class="line">    <span class="number">#eccec5</span>,</span><br><span class="line">    <span class="number">#a3e9eb</span>,</span><br><span class="line">    <span class="number">#bdbdf0</span>,</span><br><span class="line">    <span class="number">#eec1ea</span></span><br><span class="line">  );</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgb</span>(<span class="number">66</span>, <span class="number">68</span>, <span class="number">68</span>);</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">background-size</span>: <span class="number">400%</span> <span class="number">400%</span>;</span><br><span class="line">  -webkit-<span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite;</span><br><span class="line">  -moz-<span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite;</span><br><span class="line">  <span class="attribute">animation</span>: Gradient <span class="number">10s</span> ease infinite <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@-moz-keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@keyframes</span> Gradient &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">100%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">0%</span> <span class="number">50%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 黑夜模式适配 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#191919ee</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 个人信息Follow me按钮 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> &gt; <span class="selector-class">.card-widget</span><span class="selector-class">.card-info</span> &gt; <span class="selector-id">#card-info-btn</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#3eb8be</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>颜色内容可以自行更改</p><h2 id="17-页面样式调节"><a href="#17-页面样式调节" class="headerlink" title="17.页面样式调节"></a>17.页面样式调节</h2><p>在css中添加<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--trans-light</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.88</span>);</span><br><span class="line">  <span class="attr">--trans-dark</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.88</span>);</span><br><span class="line">  <span class="attr">--border-style</span>: <span class="number">1px</span> solid <span class="built_in">rgb</span>(<span class="number">169</span>, <span class="number">169</span>, <span class="number">169</span>);</span><br><span class="line">  <span class="attr">--backdrop-filter</span>: <span class="built_in">blur</span>(<span class="number">5px</span>) <span class="built_in">saturate</span>(<span class="number">150%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 首页文章卡片 */</span></span><br><span class="line"><span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">25px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 首页侧栏卡片 */</span></span><br><span class="line"><span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 文章页、归档页、普通页面 */</span></span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#post</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#page</span>,</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-id">#archive</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-light);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">  <span class="attribute">border</span>: <span class="built_in">var</span>(--border-style);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 导航栏 */</span></span><br><span class="line"><span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.75</span>);</span><br><span class="line">  backdrop-<span class="attribute">filter</span>: <span class="built_in">var</span>(--backdrop-filter);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-class">.nav-fixed</span> <span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式遮罩 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#recent-posts</span> &gt; <span class="selector-class">.recent-post-item</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#post</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#archive</span>,</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-tag">div</span><span class="selector-id">#page</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--trans-dark);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式页脚页头遮罩透明 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#footer</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-id">#page-header</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: transparent <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 阅读模式 */</span></span><br><span class="line"><span class="selector-class">.read-mode</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">158</span>, <span class="number">204</span>, <span class="number">171</span>, <span class="number">0.5</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.read-mode</span> <span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">158</span>, <span class="number">204</span>, <span class="number">171</span>, <span class="number">0.5</span>) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 夜间模式下的阅读模式 */</span></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.read-mode</span> <span class="selector-id">#aside-content</span> <span class="selector-class">.card-widget</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span> <span class="selector-class">.read-mode</span> <span class="selector-tag">div</span><span class="selector-id">#post</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">25</span>, <span class="number">25</span>, <span class="number">25</span>, <span class="number">0.9</span>) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="18-音乐播放器"><a href="#18-音乐播放器" class="headerlink" title="18.音乐播放器"></a>18.音乐播放器</h2><p>安装以下依赖<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-tag-aplayer --save</span><br></pre></td></tr></table></figure><br>在_config.yml中添加<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 音乐插件</span></span><br><span class="line"><span class="attr">aplayer:</span> </span><br><span class="line">  <span class="attr">meting:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">asset_inject:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><br>并且在_config.butterfly.yml中修改aplayerInject<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">aplayerInject:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><br>其余用法等不再赘述，详情见<a href="https://butterfly.js.org/posts/507c070f/">Butterfly添加全局吸底Aplayer教程</a>或者参考<a href="https://aplayer.js.org/#/zh-Hans/">APlayer官网档案</a></p><h3 id="附：再在这里贴一个魔改音乐播放器教程"><a href="#附：再在这里贴一个魔改音乐播放器教程" class="headerlink" title="附：再在这里贴一个魔改音乐播放器教程"></a>附：再在这里贴一个魔改音乐播放器教程</h3><p>详情见<a href="https://blog.anheyu.com/posts/6c69.html">butterfly魔改aplayer音乐</a></p><h2 id="19-引入iconfont自定义图标"><a href="#19-引入iconfont自定义图标" class="headerlink" title="19.引入iconfont自定义图标"></a>19.引入iconfont自定义图标</h2><p>参考<a href="https://akilar.top/posts/d2ebecef/">Iconfont Inject</a>以及<a href="https://akilar.top/posts/615e2dec/#%E5%8A%A8%E6%80%81%E6%A0%87%E7%AD%BE-anima">修改动态样式</a></p><h2 id="20-渐变色版权美化"><a href="#20-渐变色版权美化" class="headerlink" title="20.渐变色版权美化"></a>20.渐变色版权美化</h2><p>参考<a href="https://akilar.top/posts/8322f8e6/">（二创）Copyright-beautify</a><br>以后博客内容标头可以如下自定义<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: XXX # 文章名称</span><br><span class="line">date: XXXX-XX-XX XX:XX:XX # 文章发布日期</span><br><span class="line">updated: XXXX-XX-XX XX:XX:XX # 文章更新日期</span><br><span class="line">copyright_author: XXX # 作者覆写</span><br><span class="line">copyright_url: XXX # 原文链接覆写（直接输入网址，不需要加其他符号）</span><br><span class="line">license: # 许可协议名称覆写(一般不用)</span><br><span class="line">license_url: # 许可协议链接覆写（一般不用）</span><br><span class="line">swiper_index: X # 滚动条优先级，数字越大越优先</span><br><span class="line">cover: XX # 封面（后跟路径）</span><br><span class="line">categories: XX # 设置分类</span><br><span class="line">tags: XX # 设置标签</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p><h2 id="21-按照最后更新时间对博客排序"><a href="#21-按照最后更新时间对博客排序" class="headerlink" title="21.按照最后更新时间对博客排序"></a>21.按照最后更新时间对博客排序</h2><p>修改_config.yml中index_generator下的order_by<br><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- order_by: -date</span></span><br><span class="line"><span class="addition">+ order_by: -updated</span></span><br></pre></td></tr></table></figure></p><h2 id="22-双栏布局首页卡片魔改"><a href="#22-双栏布局首页卡片魔改" class="headerlink" title="22.双栏布局首页卡片魔改"></a>22.双栏布局首页卡片魔改</h2><p>参考<a href="https://akilar.top/posts/d6b69c49/">双栏布局首页卡片魔改教程</a></p><h2 id="23-补：在每篇文章中自定义背景"><a href="#23-补：在每篇文章中自定义背景" class="headerlink" title="23.补：在每篇文章中自定义背景"></a>23.补：在每篇文章中自定义背景</h2><p>在markdown文件中添加<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-id">#web_bg</span>&#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">XXX</span>)<span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="comment">/* 这里的url填图片路径 */</span></span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-position</span>: center <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-size</span>: cover <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-repeat</span>: no-repeat <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure></p><h2 id="24-魔改关于页面"><a href="#24-魔改关于页面" class="headerlink" title="24.魔改关于页面"></a>24.魔改关于页面</h2><p>参考<a href="https://blog.anheyu.com/posts/e62b.html">安知鱼|butterfly魔改关于页面</a></p><h2 id="25-给网站增加悬浮伸缩侧边栏"><a href="#25-给网站增加悬浮伸缩侧边栏" class="headerlink" title="25.给网站增加悬浮伸缩侧边栏"></a>25.给网站增加悬浮伸缩侧边栏</h2><p>参考<a href="https://www.qcqx.cn/article/fab5c3df.html">轻笑Chuckle|给网站增加悬浮伸缩侧边栏</a></p><h2 id="26"><a href="#26" class="headerlink" title="26."></a>26.</h2>]]></content>
      
      
      <categories>
          
          <category> 记录 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> 网站搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客网站更新记录</title>
      <link href="/2024/07/07/record/"/>
      <url>/2024/07/07/record/</url>
      
        <content type="html"><![CDATA[<h1 id="更新记录"><a href="#更新记录" class="headerlink" title="更新记录"></a>更新记录</h1><h2 id="2024年7月7日"><a href="#2024年7月7日" class="headerlink" title="2024年7月7日"></a>2024年7月7日</h2><p>（今日因旧代码报错而不得不放弃，从头开始，有点崩溃，因此开始记录并且做好备份，以便后续出问题更改）</p><ol><li><p><strong>配置了一下butterfly主题的基础，比如设置网页背景，侧边栏头像，以及博客封面之类</strong></p></li><li><p><strong>更新了本地搜索，开启字数统计，打开背景特效，打开通知弹窗</strong></p></li><li><p><strong>更新了鼠标点击特效</strong></p></li><li><p><strong>更新了网页为一图流，且增加页脚徽标</strong></p></li><li><p><strong>更改字体成功，网页中字体为Aa楷体，代码字体为Consolas</strong></p></li></ol><p>（累了，明天再说，绝区零启动！）</p><h2 id="2024年7月8日"><a href="#2024年7月8日" class="headerlink" title="2024年7月8日"></a>2024年7月8日</h2><ol><li><strong>更新文章置顶滚动栏</strong></li></ol><p>（此时已恢复到旧版本状态）</p><ol><li><p><strong>更新双侧栏及加载动画，同时实现菜单栏居中</strong></p></li><li><p><strong>成功实现黑夜模式下，主文字显示霓虹灯效果</strong></p></li><li><p><strong>更新个人卡片渐变色（正常模式下渐变，黑夜模式下纯黑）</strong></p></li></ol><p>（发现一个bug，加上渐变色后卡片没有滑入效果，未来可能去除）</p><ol><li><p><strong>更新页面样式（包括圆角，透明度设置，描边，模糊效果等）</strong></p></li><li><p><strong>新添音乐播放器，歌单设置的为我的网易云歌单</strong></p></li></ol><p>（今日就到这里，勾栏听曲）</p><h2 id="2024年7月9日"><a href="#2024年7月9日" class="headerlink" title="2024年7月9日"></a>2024年7月9日</h2><p>（今天摸鱼，浅浅更新）</p><ol><li><p><strong>引入自定义图标，修改部分图标</strong></p></li><li><p><strong>新增渐变色版权美化</strong></p></li></ol><p>（虽然内容较少，但也花费巨大时间，目前感觉配置差不多了，以后有啥慢慢更新）</p><h2 id="2024年7月10日"><a href="#2024年7月10日" class="headerlink" title="2024年7月10日"></a>2024年7月10日</h2><p>（今日着手写博客，以后重点主要放在发布博客内容上）</p><ol><li><strong>更新首页卡片双栏布局显示，提高观感</strong></li></ol><h2 id="2024年7月11日"><a href="#2024年7月11日" class="headerlink" title="2024年7月11日"></a>2024年7月11日</h2><ol><li><p><strong>更新关于界面</strong></p></li><li><p><strong>更新悬浮伸缩侧边栏，并增加音乐</strong></p></li></ol><p>（这个侧边栏对于手机还不适配，因此原先的音乐通道并没有关闭，日后应该会修）</p><h2 id="2024年7月12日"><a href="#2024年7月12日" class="headerlink" title="2024年7月12日"></a>2024年7月12日</h2><ol><li><p><strong>更新关于界面</strong></p></li><li><p><strong>更新悬浮伸缩侧边栏，并增加音乐</strong></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 记录 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 更新记录 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
